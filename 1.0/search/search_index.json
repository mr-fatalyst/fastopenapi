{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>Beta Release \u2014 v1.0.0b1</p> <p>You are viewing the documentation for v1.0.0b1 (beta). The API is stable, but minor changes may occur before the final release. The last stable version is available here.</p>"},{"location":"#fastopenapi","title":"FastOpenAPI","text":"<p> FastOpenAPI is a library for generating and integrating OpenAPI schemas using Pydantic and various frameworks. </p> <p>   This project was inspired by FastAPI and aims to provide a similar developer-friendly experience. </p> <p> </p>"},{"location":"#what-is-fastopenapi","title":"What is FastOpenAPI?","text":"<p>FastOpenAPI brings FastAPI-style developer experience to frameworks like Flask, Django, Starlette, AIOHTTP, and others. It provides:</p> <ul> <li>Automatic OpenAPI schema generation from your route definitions</li> <li>Interactive API documentation (Swagger UI and ReDoc)</li> <li>Request validation using Pydantic models</li> <li>Response serialization with type safety</li> <li>Framework-agnostic approach - use with your preferred web framework</li> </ul> <p>Inspired by FastAPI, FastOpenAPI aims to provide similar functionality for developers who need to work with existing frameworks or prefer not to adopt a full framework switch.</p>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#multi-framework-support","title":"Multi-Framework Support","text":"<p>FastOpenAPI supports 8 popular Python web frameworks out of the box:</p> <ul> <li>AIOHTTP - Async HTTP client/server framework</li> <li>Django - High-level web framework (sync and async)</li> <li>Falcon - Minimalist ASGI/WSGI framework (sync and async)</li> <li>Flask - Lightweight WSGI framework</li> <li>Quart - Async version of Flask</li> <li>Sanic - Async web framework built for speed</li> <li>Starlette - Lightweight ASGI framework</li> <li>Tornado - Async networking library</li> </ul>"},{"location":"#fastapi-style-api","title":"FastAPI-Style API","text":"<p>Use familiar decorator-based routing and parameter declarations:</p> <pre><code>from fastopenapi import Query, Path, Body\nfrom fastopenapi.routers import FlaskRouter\nfrom pydantic import BaseModel\n\nrouter = FlaskRouter(app=app)\n\nclass User(BaseModel):\n    name: str\n    email: str\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n\n@router.post(\"/users\", response_model=User)\ndef create_user(user: User = Body(...)):\n    return user\n</code></pre>"},{"location":"#automatic-documentation","title":"Automatic Documentation","text":"<p>Once configured, your API documentation is automatically available:</p> <ul> <li>Swagger UI: <code>http://localhost:8000/docs</code></li> <li>ReDoc: <code>http://localhost:8000/redoc</code></li> <li>OpenAPI JSON: <code>http://localhost:8000/openapi.json</code></li> </ul>"},{"location":"#pydantic-v2-integration","title":"Pydantic v2 Integration","text":"<p>Leverage Pydantic v2 for:</p> <ul> <li>Request body validation</li> <li>Response model validation</li> <li>Automatic JSON Schema generation</li> <li>Type coercion and error messages</li> </ul>"},{"location":"#advanced-features","title":"Advanced Features","text":"<p>Dependency Injection <pre><code>from fastopenapi import Depends\n\ndef get_db():\n    db = Database()\n    try:\n        yield db\n    finally:\n        db.close()\n\n@router.get(\"/items\")\ndef list_items(db = Depends(get_db)):\n    return db.get_items()\n</code></pre></p> <p>Security Schemes <pre><code>from fastopenapi import Security, SecuritySchemeType\n\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.BEARER_JWT\n)\n\n@router.get(\"/protected\")\ndef protected_endpoint(token: str = Security(verify_token)):  # Your auth function\n    return {\"message\": \"Access granted\"}\n</code></pre></p> <p>File Uploads <pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\"filename\": file.filename, \"size\": len(content)}\n</code></pre></p>"},{"location":"#project-status","title":"Project Status","text":"<p>FastOpenAPI is currently in beta (version 1.0.0b1). The API is stable, but minor changes may occur before the 1.0.0 release. We welcome feedback and contributions to help improve the library.</p>"},{"location":"#quick-example","title":"Quick Example","text":"<p>Here's a complete working example with Flask:</p> <pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(app=app, title=\"My API\", version=\"1.0.0\")\n\nclass Item(BaseModel):\n    name: str\n    price: float\n    description: str | None = None\n\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"Hello, FastOpenAPI!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    app.run(port=8000)\n</code></pre> <p>Run the app and visit <code>http://localhost:8000/docs</code> to see your interactive API documentation.</p>"},{"location":"#when-to-use-fastopenapi","title":"When to Use FastOpenAPI","text":"<p>Use FastOpenAPI when:</p> <ul> <li>You have an existing application in Flask, Django, or another supported framework</li> <li>You need OpenAPI documentation without switching frameworks</li> <li>You want FastAPI-style DX but can't use FastAPI</li> <li>You're building a library that needs to support multiple frameworks</li> <li>You prefer the flexibility of choosing your own framework</li> </ul> <p>Consider FastAPI when:</p> <ul> <li>You're starting a new project from scratch</li> <li>You want a complete, batteries-included async framework</li> <li>You need built-in features like background tasks, WebSockets, and GraphQL support</li> <li>You need maximum performance with ASGI and modern async features</li> <li>You want the largest ecosystem, extensive documentation, and active community</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<p>Ready to get started? Head over to:</p> <ul> <li>Installation - Install FastOpenAPI</li> <li>Quickstart - Build your first API in 5 minutes</li> <li>Core Concepts - Understand the basics</li> <li>User Guide - Learn all the features</li> </ul>"},{"location":"#community-and-support","title":"Community and Support","text":"<ul> <li>GitHub: mr-fatalyst/fastopenapi</li> <li>Issues: Report bugs or request features</li> <li>Discussions: Ask questions and share ideas</li> </ul>"},{"location":"#license","title":"License","text":"<p>FastOpenAPI is licensed under the MIT License. See the LICENSE file for details.</p>"},{"location":"advanced/architecture/","title":"Architecture","text":"<p>This document explains FastOpenAPI's internal architecture and design principles.</p>"},{"location":"advanced/architecture/#overview","title":"Overview","text":"<p>FastOpenAPI is designed to be framework-agnostic while providing a FastAPI-like developer experience. It achieves this through a composition-based adapter pattern with clear separation of concerns.</p> <pre><code>graph TB\n    subgraph \"User Code\"\n        A[Your Endpoint Functions]\n    end\n\n    subgraph \"FastOpenAPI Core\"\n        B[BaseRouter&lt;br/&gt;Route Registration]\n        C[BaseAdapter&lt;br/&gt;Request Pipeline]\n        D[FrameworkRouter&lt;br/&gt;Framework Glue]\n    end\n\n    subgraph \"Specialized Components\"\n        E[Extractors&lt;br/&gt;Request Data]\n        F[ParameterResolver&lt;br/&gt;Validation]\n        G[DependencyResolver&lt;br/&gt;Injection]\n        H[ResponseBuilder&lt;br/&gt;Serialization]\n        I[OpenAPIGenerator&lt;br/&gt;Schema]\n    end\n\n    subgraph \"Framework\"\n        J[Flask/Django/Starlette/etc.]\n    end\n\n    A --&gt;|decorated by| B\n    B --&gt;|inherits| C\n    C --&gt;|inherits| D\n    D --&gt;|uses| E\n    D --&gt;|uses| F\n    D --&gt;|uses| G\n    D --&gt;|uses| H\n    B --&gt;|uses| I\n    D &lt;--&gt;|integrates| J</code></pre>"},{"location":"advanced/architecture/#core-design-pattern-composition-based-adapter","title":"Core Design Pattern: Composition-Based Adapter","text":"<p>FastOpenAPI uses a three-tier architecture:</p> <ol> <li>BaseRouter - Route registration and metadata storage</li> <li>BaseAdapter - Request processing pipeline (using composition)</li> <li>FrameworkRouter - Framework-specific integration</li> </ol> <p>Key Principle: The router doesn't do the work itself\u2014it delegates to specialized components through composition.</p>"},{"location":"advanced/architecture/#layer-1-baserouter","title":"Layer 1: BaseRouter","text":"<p>Location: <code>fastopenapi/core/router.py</code></p> <p>Responsibilities: - Route registration via HTTP method decorators - Metadata storage (<code>RouteInfo</code> objects) - OpenAPI schema generation (lazy) - Router composition (<code>include_router</code>)</p> <pre><code>class BaseRouter:\n    \"\"\"Base router that collects routes and generates an OpenAPI schema\"\"\"\n\n    def __init__(\n        self,\n        app=None,\n        docs_url=\"/docs\",\n        redoc_url=\"/redoc\",\n        openapi_url=\"/openapi.json\",\n        title=\"My App\",\n        version=\"0.1.0\",\n        # ...\n    ):\n        self._routes: list[RouteInfo] = []\n        self._openapi_schema = None  # Lazy generation\n\n    def get(self, path: str, **meta):\n        \"\"\"Register GET endpoint\"\"\"\n        return self._create_route_decorator(path, \"GET\", meta)\n\n    def add_route(self, path: str, method: str, endpoint: Callable):\n        \"\"\"Store route metadata\"\"\"\n        meta = getattr(endpoint, \"__route_meta__\", {})\n        route = RouteInfo(path, method, endpoint, meta)\n        self._routes.append(route)\n\n    @property\n    def openapi(self) -&gt; dict:\n        \"\"\"Lazy OpenAPI schema generation\"\"\"\n        if self._openapi_schema is None:\n            from fastopenapi.openapi.generator import OpenAPIGenerator\n            generator = OpenAPIGenerator(self)\n            self._openapi_schema = generator.generate()\n        return self._openapi_schema\n</code></pre> <p>What BaseRouter DOES NOT do: - Does not extract request parameters - Does not validate data - Does not call endpoints - Does not handle framework-specific logic</p> <p>These responsibilities are delegated to <code>BaseAdapter</code> and specialized components.</p>"},{"location":"advanced/architecture/#layer-2-baseadapter","title":"Layer 2: BaseAdapter","text":"<p>Location: <code>fastopenapi/routers/base.py</code></p> <p>Responsibilities: - Orchestrate the request processing pipeline - Delegate to specialized components via composition - Provide framework integration interface</p> <pre><code>class BaseAdapter(BaseRouter, ABC):\n    \"\"\"Base adapter for framework integration\"\"\"\n\n    # Composition: Specialized components\n    extractor_cls = BaseRequestDataExtractor\n    extractor_async_cls = BaseAsyncRequestDataExtractor\n    req_param_resolver_cls = ParameterResolver\n    response_builder_cls = ResponseBuilder\n\n    # Thread-safe caches\n    _type_adapter_cache: dict[type, TypeAdapter] = {}\n    _cache_lock = threading.Lock()\n\n    @abstractmethod\n    def build_framework_response(self, response: Response):\n        \"\"\"Convert Response to framework-specific response\"\"\"\n        pass\n\n    @abstractmethod\n    def is_framework_response(self, response):\n        \"\"\"Check if response is already framework-native\"\"\"\n        pass\n\n    def handle_request(self, endpoint: Callable, env: RequestEnvelope):\n        \"\"\"Orchestrate request processing (sync)\"\"\"\n        try:\n            # 1. Extract request data\n            request_data = self.extractor_cls.extract_request_data(env)\n\n            # 2. Resolve parameters\n            kwargs = self.req_param_resolver_cls.resolve(endpoint, request_data)\n\n            # 3. Call endpoint\n            result = endpoint(**kwargs)\n\n            # 4. Validate response\n            route_meta = endpoint.__route_meta__\n            response_model = route_meta.get(\"response_model\")\n            if response_model:\n                result = self._validate_response(result, response_model)\n\n            # 5. Handle framework-native responses\n            if self.is_framework_response(result):\n                return result\n\n            # 6. Build response\n            if route_meta.get(\"status_code\") == 204:\n                return self.build_framework_response(\n                    Response(status_code=204, content=None)\n                )\n            else:\n                response = self.response_builder_cls.build(result, route_meta)\n                return self.build_framework_response(response)\n\n        except Exception as e:\n            api_error = APIError.from_exception(e, self.EXCEPTION_MAPPER)\n            return self.build_framework_response(\n                Response(\n                    content=api_error.to_response(),\n                    status_code=api_error.status_code,\n                )\n            )\n</code></pre> <p>Key Features: - Composition over inheritance - Uses specialized component classes - Thread-safe caching - TypeAdapter cache with lock - Error handling - Converts all exceptions to APIError - Async support - Separate <code>handle_request_async</code> method</p>"},{"location":"advanced/architecture/#layer-3-frameworkrouter","title":"Layer 3: FrameworkRouter","text":"<p>Example: <code>fastopenapi/routers/starlette/async_router.py</code></p> <p>Responsibilities: - Implement three abstract methods from <code>BaseAdapter</code> - Register routes with the framework - Adapt framework requests to <code>RequestEnvelope</code></p> <pre><code>class StarletteRouter(BaseAdapter):\n    \"\"\"Starlette adapter for FastOpenAPI\"\"\"\n\n    extractor_async_cls = StarletteRequestDataExtractor\n\n    def add_route(self, path: str, method: str, endpoint: Callable):\n        \"\"\"Register route with Starlette\"\"\"\n        super().add_route(path, method, endpoint)\n\n        # Create view function\n        view = functools.partial(\n            self._starlette_view,\n            router=self,\n            endpoint=endpoint\n        )\n\n        # Register with Starlette\n        route = Route(path, view, methods=[method.upper()])\n        self.app.router.routes.append(route)\n\n    @staticmethod\n    async def _starlette_view(request, router, endpoint):\n        \"\"\"Adapt Starlette request to RequestEnvelope\"\"\"\n        env = RequestEnvelope(path_params=None, request=request)\n        return await router.handle_request_async(endpoint, env)\n\n    def build_framework_response(self, response: Response):\n        \"\"\"Convert Response to StarletteResponse\"\"\"\n        if isinstance(response.content, bytes):\n            return StarletteResponse(\n                content=response.content,\n                status_code=response.status_code,\n                headers=response.headers,\n                media_type=response.headers.get(\"Content-Type\", \"application/octet-stream\"),\n            )\n        # ... handle JSON, text, etc.\n\n    def is_framework_response(self, response):\n        \"\"\"Check if already a Starlette response\"\"\"\n        return isinstance(response, StarletteResponse)\n</code></pre> <p>That's it! Just three methods to integrate a new framework.</p>"},{"location":"advanced/architecture/#specialized-components","title":"Specialized Components","text":""},{"location":"advanced/architecture/#1-request-data-extractors","title":"1. Request Data Extractors","text":"<p>Location: <code>fastopenapi/routers/extractors.py</code> and <code>fastopenapi/routers/{framework}/extractors.py</code></p> <p>Responsibility: Extract raw data from framework-specific request objects into a unified <code>RequestData</code> container.</p> <pre><code>class RequestData:\n    \"\"\"Unified request data container\"\"\"\n    def __init__(\n        self,\n        path_params: dict[str, Any] = None,\n        query_params: dict[str, Any] = None,\n        headers: dict[str, str] = None,\n        cookies: dict[str, str] = None,\n        body: Any = None,\n        form_data: dict[str, Any] = None,\n        files: dict[str, FileUpload | list[FileUpload]] = None,\n    ):\n        self.path_params = path_params or {}\n        self.query_params = query_params or {}\n        self.headers = headers or {}\n        self.cookies = cookies or {}\n        self.body = body\n        self.form_data = form_data or {}\n        self.files = files or {}\n</code></pre> <p>Extractor Interface:</p> <pre><code>class BaseAsyncRequestDataExtractor(BaseRequestDataExtractor, ABC):\n    \"\"\"Base async extractor \u2014 overrides only body/form/files as async\"\"\"\n\n    @classmethod\n    @abstractmethod\n    async def _get_body(cls, request: Any) -&gt; bytes | str | dict: ...\n\n    @classmethod\n    @abstractmethod\n    async def _get_form_data(cls, request: Any) -&gt; dict: ...\n\n    @classmethod\n    @abstractmethod\n    async def _get_files(cls, request: Any) -&gt; dict: ...\n\n    @classmethod\n    async def extract_request_data(cls, env: RequestEnvelope) -&gt; RequestData:\n        request = env.request\n        return RequestData(\n            path_params=env.path_params or cls._get_path_params(request),\n            query_params=cls._get_query_params(request),          # sync\n            headers=cls._normalize_headers(cls._get_headers(request)),  # sync\n            cookies=cls._get_cookies(request),                    # sync\n            body=await cls._get_body(request),                    # async\n            form_data=await cls._get_form_data(request),          # async\n            files=await cls._get_files(request),                  # async\n        )\n</code></pre> <p>Note: <code>_get_path_params</code>, <code>_get_query_params</code>, <code>_get_headers</code>, <code>_get_cookies</code> are synchronous methods inherited from <code>BaseRequestDataExtractor</code>. Only <code>_get_body</code>, <code>_get_form_data</code>, and <code>_get_files</code> are overridden as async. All <code>_get_*</code> methods receive the framework <code>request</code> object, not the <code>RequestEnvelope</code>.</p> <p>Each framework provides its own extractor (e.g., <code>StarletteRequestDataExtractor</code>, <code>FlaskRequestDataExtractor</code>).</p>"},{"location":"advanced/architecture/#2-parameter-resolver","title":"2. Parameter Resolver","text":"<p>Location: <code>fastopenapi/resolution/resolver.py</code></p> <p>Responsibility: Resolve and validate endpoint parameters using Pydantic.</p> <pre><code>class ParameterResolver:\n    \"\"\"Resolve and validate endpoint parameters\"\"\"\n\n    @classmethod\n    def resolve(cls, endpoint: Callable, request_data: RequestData) -&gt; dict[str, Any]:\n        \"\"\"Resolve all parameters for an endpoint\"\"\"\n        params = cls._get_signature(endpoint)\n        kwargs = {}\n\n        # 1. Resolve dependencies\n        kwargs.update(cls._resolve_dependencies(endpoint, request_data))\n\n        # 2. Process regular parameters\n        regular_kwargs, model_fields, model_values = cls._process_parameters(\n            params, request_data\n        )\n        kwargs.update(regular_kwargs)\n\n        # 3. Validate parameters using dynamic Pydantic model\n        if model_fields:\n            validated_params = cls._validate_parameters(\n                endpoint, model_fields, model_values\n            )\n            kwargs.update(validated_params)\n\n        return kwargs\n</code></pre> <p>Key Features: - Signature caching - Caches <code>inspect.signature()</code> results - Dynamic Pydantic models - Creates models on-the-fly for validation - Source determination - Figures out if parameter comes from path/query/body/etc. - Pydantic model support - Handles <code>BaseModel</code> parameters specially</p>"},{"location":"advanced/architecture/#3-dependency-resolver","title":"3. Dependency Resolver","text":"<p>Location: <code>fastopenapi/core/dependency_resolver.py</code></p> <p>Responsibility: Recursive dependency injection with caching and validation.</p> <pre><code>class DependencyResolver:\n    \"\"\"\n    Resolves dependency injection with:\n    - Recursive resolution\n    - Request-scoped caching\n    - Circular dependency detection\n    - Security scopes validation\n    - Thread-safe operation\n    \"\"\"\n\n    def __init__(self):\n        # Request-scoped cache (auto-cleanup with WeakKeyDictionary)\n        self._request_cache = WeakKeyDictionary()\n        self._request_cache_lock = threading.RLock()\n\n        # Per-function locks to prevent race conditions\n        self._execution_locks: dict[int, threading.Lock] = {}\n        self._execution_locks_lock = threading.Lock()\n\n        # Signature cache\n        self._signature_cache: dict[Callable, dict] = {}\n\n    def resolve_dependencies(\n        self,\n        endpoint: Callable,\n        request_data: RequestData\n    ) -&gt; dict[str, Any]:\n        \"\"\"Resolve all dependencies for endpoint\"\"\"\n        # Initialize request-scoped tracking\n        with self._request_cache_lock:\n            if request_data not in self._request_cache:\n                self._request_cache[request_data] = {\n                    \"resolved\": {},\n                    \"resolving\": set(),  # For circular detection\n                    \"generators\": [],  # For yield dependency cleanup\n                }\n\n        try:\n            return self._resolve_endpoint_dependencies(endpoint, request_data)\n        finally:\n            # Cleanup\n            with self._request_cache_lock:\n                if request_data in self._request_cache:\n                    del self._request_cache[request_data]\n</code></pre> <p>Key Features: - Request-scoped caching - Same dependency called twice = same instance - Circular dependency detection - Raises <code>CircularDependencyError</code> - Security scopes validation - Validates OAuth2 scopes - Generator dependencies - Supports <code>yield</code> setup/teardown for both sync and async generators with guaranteed cleanup - Thread-safe - Double-checked locking pattern - Async support - Separate async methods that handle both sync and async deps</p>"},{"location":"advanced/architecture/#4-response-builder-serialization","title":"4. Response Builder (Serialization)","text":"<p>Location: <code>fastopenapi/response/builder.py</code></p> <p>Responsibility: Serialize Python objects to JSON and build response objects.</p> <p>Note: This is different from <code>ResponseBuilder</code> in <code>fastopenapi/openapi/generator.py</code>, which builds OpenAPI response schemas for documentation. They share the same class name but serve different purposes.</p> <pre><code>class ResponseBuilder:\n    \"\"\"Build and serialize responses\"\"\"\n\n    @classmethod\n    def build(cls, result: Any, meta: dict) -&gt; Response:\n        \"\"\"Build response from endpoint result\"\"\"\n        # Handle tuple response (body, status, headers)\n        if isinstance(result, tuple):\n            if len(result) == 2:\n                content, status = result\n                headers = {}\n            elif len(result) == 3:\n                content, status, headers = result\n            else:\n                content = result\n                status = meta.get(\"status_code\", 200)\n                headers = {}\n        # Handle Response object\n        elif isinstance(result, Response):\n            return result\n        # Handle regular response\n        else:\n            content = result\n            status = meta.get(\"status_code\", 200)\n            headers = {}\n\n        # Serialize content\n        content = cls._serialize(content)\n        return Response(content=content, status_code=status, headers=headers)\n\n    @classmethod\n    def _serialize(cls, data: Any) -&gt; Any:\n        \"\"\"Serialize response data\"\"\"\n        if isinstance(data, BaseModel):\n            return data.model_dump(by_alias=True, mode=\"json\")\n        if isinstance(data, list):\n            return [cls._serialize(item) for item in data]\n        if isinstance(data, dict):\n            return {k: cls._serialize(v) for k, v in data.items()}\n        return data\n</code></pre>"},{"location":"advanced/architecture/#5-openapi-generator","title":"5. OpenAPI Generator","text":"<p>Location: <code>fastopenapi/openapi/generator.py</code></p> <p>Responsibility: Generate OpenAPI 3.0 schema from route metadata.</p> <pre><code>class OpenAPIGenerator:\n    \"\"\"Generate OpenAPI schema from routes\"\"\"\n\n    def __init__(self, router):\n        self.router = router\n        self.definitions = {}\n        self._cache_lock = threading.Lock()\n\n        # Helper classes (composition!)\n        self.schema_builder = SchemaBuilder(self.definitions, self._cache_lock)\n        self.parameter_processor = ParameterProcessor(self.schema_builder)\n        self.response_builder = ResponseBuilder(self.schema_builder)  # OpenAPI schema builder, not the serialization ResponseBuilder\n\n    def generate(self) -&gt; dict:\n        \"\"\"Generate complete OpenAPI schema\"\"\"\n        self._add_error_schemas()\n        paths = self._build_paths()\n\n        schema = {\n            \"openapi\": self.router.openapi_version,\n            \"info\": {\n                \"title\": self.router.title,\n                \"version\": self.router.version,\n                \"description\": self.router.description,\n            },\n            \"paths\": paths,\n            \"components\": {\"schemas\": self.definitions},\n        }\n\n        self._add_security_schemes(schema)\n        self._add_global_security(schema)\n\n        return schema\n</code></pre> <p>Key Features: - Lazy generation - Only generated when <code>.openapi</code> property accessed - Thread-safe caching - Model schemas cached with lock - Pydantic integration - Uses <code>model_json_schema()</code> - Security markers - Detects <code>Security()</code> dependencies for OpenAPI security requirements</p>"},{"location":"advanced/architecture/#request-processing-flow","title":"Request Processing Flow","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant Framework\n    participant FrameworkRouter\n    participant Extractor\n    participant ParameterResolver\n    participant DependencyResolver\n    participant Endpoint\n    participant ResponseBuilder\n\n    Client-&gt;&gt;Framework: HTTP Request\n    Framework-&gt;&gt;FrameworkRouter: Route matched\n    FrameworkRouter-&gt;&gt;FrameworkRouter: Create RequestEnvelope\n    FrameworkRouter-&gt;&gt;Extractor: extract_request_data(env)\n    Extractor--&gt;&gt;FrameworkRouter: RequestData\n    FrameworkRouter-&gt;&gt;ParameterResolver: resolve(endpoint, request_data)\n    ParameterResolver-&gt;&gt;DependencyResolver: resolve_dependencies()\n    DependencyResolver--&gt;&gt;ParameterResolver: dependencies {}\n    ParameterResolver-&gt;&gt;ParameterResolver: _process_parameters()\n    ParameterResolver-&gt;&gt;ParameterResolver: _validate_parameters()\n    ParameterResolver--&gt;&gt;FrameworkRouter: kwargs {}\n    FrameworkRouter-&gt;&gt;Endpoint: endpoint(**kwargs)\n    Endpoint--&gt;&gt;FrameworkRouter: result\n    FrameworkRouter-&gt;&gt;FrameworkRouter: _validate_response()\n    FrameworkRouter-&gt;&gt;ResponseBuilder: build(result, meta)\n    ResponseBuilder--&gt;&gt;FrameworkRouter: Response\n    FrameworkRouter-&gt;&gt;FrameworkRouter: build_framework_response()\n    FrameworkRouter--&gt;&gt;Framework: framework response\n    Framework--&gt;&gt;Client: HTTP Response</code></pre>"},{"location":"advanced/architecture/#detailed-flow-steps","title":"Detailed Flow Steps:","text":"<ol> <li>Framework receives request - Routes to registered handler</li> <li>FrameworkRouter creates RequestEnvelope - Wraps framework request</li> <li>Extractor extracts data - Framework-agnostic <code>RequestData</code></li> <li>ParameterResolver resolves parameters:</li> <li>Calls <code>DependencyResolver</code> for <code>Depends()</code> parameters</li> <li>Extracts parameters from <code>RequestData</code> based on source (path/query/etc.)</li> <li>Creates dynamic Pydantic model for validation</li> <li>Returns validated kwargs</li> <li>Endpoint is called - With resolved kwargs</li> <li>Response validation - If <code>response_model</code> specified</li> <li>ResponseBuilder builds response - Serializes to JSON</li> <li>Framework response built - Converts to framework-specific response</li> </ol>"},{"location":"advanced/architecture/#parameter-system","title":"Parameter System","text":"<p>Location: <code>fastopenapi/core/params.py</code></p> <p>FastOpenAPI parameters extend Pydantic's <code>FieldInfo</code>:</p> <pre><code>class BaseParam(FieldInfo):\n    \"\"\"Base parameter class extending Pydantic FieldInfo\"\"\"\n\n    def __init__(\n        self,\n        default=...,\n        *,\n        alias=None,\n        title=None,\n        description=None,\n        gt=None,  # Greater than\n        ge=None,  # Greater or equal\n        lt=None,  # Less than\n        le=None,  # Less or equal\n        min_length=None,\n        max_length=None,\n        pattern=None,\n        # ... and more Pydantic constraints\n    ):\n        # Passes everything to Pydantic FieldInfo\n        super().__init__(...)\n</code></pre> <p>Parameter Hierarchy:</p> <pre><code>classDiagram\n    FieldInfo &lt;|-- BaseParam\n    BaseParam &lt;|-- Param\n    BaseParam &lt;|-- Body\n    Param &lt;|-- Query\n    Param &lt;|-- Path\n    Param &lt;|-- Header\n    Param &lt;|-- Cookie\n    Body &lt;|-- Form\n    Body &lt;|-- File\n\n    class FieldInfo {\n        +Pydantic FieldInfo\n    }\n\n    class BaseParam {\n        +examples\n        +include_in_schema\n        +deprecated\n    }\n\n    class Param {\n        +in_: ParameterSource\n    }\n\n    class Query {\n        +in_ = QUERY\n    }\n\n    class Path {\n        +in_ = PATH\n    }\n\n    class Header {\n        +convert_underscores\n    }</code></pre>"},{"location":"advanced/architecture/#dependency-injection-system","title":"Dependency Injection System","text":"<pre><code>graph TD\n    A[Endpoint Signature] --&gt;|inspect| B[ParameterResolver]\n    B --&gt;|finds Depends| C[DependencyResolver]\n    C --&gt;|check cache| D{Cached?}\n    D --&gt;|Yes| E[Return cached]\n    D --&gt;|No| F[Inspect dependency signature]\n    F --&gt;|has sub-dependencies?| G[Recursive resolve]\n    G --&gt;|resolve| H[Call dependency function]\n    H --&gt;|yield?| I[Store for cleanup]\n    I --&gt; J[Cache result]\n    J --&gt; K[Return result]\n\n    C --&gt;|Security| L[Validate scopes]\n    L --&gt;|insufficient| M[Raise SecurityError]\n    L --&gt;|ok| H</code></pre> <p>Features:</p> <ol> <li> <p>Request-Scoped Caching: <pre><code>def get_db():\n    print(\"Creating DB\")  # Printed once per request\n    yield SessionLocal()\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    db1: Session = Depends(get_db),  # Same instance\n    db2: Session = Depends(get_db),  # Same instance\n):\n    assert db1 is db2  # True!\n</code></pre></p> </li> <li> <p>Circular Dependency Detection: <pre><code>def dep_a(b = Depends(dep_b)):\n    return b\n\ndef dep_b(a = Depends(dep_a)):\n    return a\n\n# Raises: CircularDependencyError\n</code></pre></p> </li> <li> <p>Security Scopes: <pre><code>def verify_token():\n    return {\"user\": \"john\", \"scopes\": [\"read\", \"write\"]}\n\n@router.get(\"/admin\")\ndef admin_only(user = Security(verify_token, scopes=[\"admin\"])):\n    # SecurityError if \"admin\" not in user[\"scopes\"]\n    return user\n</code></pre></p> </li> <li> <p>Generator Cleanup: <pre><code>def get_db():\n    db = connect()\n    try:\n        yield db  # Injected value\n    finally:\n        db.close()  # Always called after request\n</code></pre></p> </li> </ol>"},{"location":"advanced/architecture/#error-handling","title":"Error Handling","text":"<p>Location: <code>fastopenapi/errors/exceptions.py</code></p> <pre><code>classDiagram\n    Exception &lt;|-- APIError\n    APIError &lt;|-- BadRequestError\n    APIError &lt;|-- ValidationError\n    APIError &lt;|-- AuthenticationError\n    APIError &lt;|-- AuthorizationError\n    APIError &lt;|-- ResourceNotFoundError\n    APIError &lt;|-- ResourceConflictError\n    APIError &lt;|-- InternalServerError\n    APIError &lt;|-- ServiceUnavailableError\n    InternalServerError &lt;|-- DependencyError\n    DependencyError &lt;|-- CircularDependencyError\n    DependencyError &lt;|-- SecurityError\n\n    class APIError {\n        +status_code\n        +error_type\n        +default_message\n        +to_response()\n        +from_exception()\n    }</code></pre> <p>Key Feature - Smart Exception Conversion:</p> <pre><code>@classmethod\ndef from_exception(cls, exc, mapper=None):\n    \"\"\"Convert any exception to APIError\"\"\"\n    if isinstance(exc, APIError):\n        return exc\n\n    # Try custom mapper\n    if mapper and type(exc) in mapper:\n        return mapper[type(exc)](str(exc))\n\n    # Extract status code\n    for attr in (\"status_code\", \"code\"):\n        if hasattr(exc, attr):\n            status = HTTPStatus(int(getattr(exc, attr)))\n            break\n\n    # Extract message\n    for attr in (\"message\", \"title\", \"name\", \"reason\", \"detail\"):\n        if hasattr(exc, attr):\n            message = str(getattr(exc, attr))\n            break\n\n    # Create APIError\n    api_error = APIError(message=message)\n    api_error.status_code = status\n    return api_error\n</code></pre> <p>This allows framework-specific exceptions to be automatically converted to standardized API errors.</p>"},{"location":"advanced/architecture/#performance-optimizations","title":"Performance Optimizations","text":""},{"location":"advanced/architecture/#1-lazy-openapi-generation","title":"1. Lazy OpenAPI Generation","text":"<p>Schema generated only when <code>.openapi</code> property accessed:</p> <pre><code>@property\ndef openapi(self) -&gt; dict:\n    if self._openapi_schema is None:\n        generator = OpenAPIGenerator(self)\n        self._openapi_schema = generator.generate()\n    return self._openapi_schema\n</code></pre>"},{"location":"advanced/architecture/#2-typeadapter-caching","title":"2. TypeAdapter Caching","text":"<p>Pydantic TypeAdapters are cached with thread-safe double-checked locking:</p> <pre><code>_type_adapter_cache: dict[type, TypeAdapter] = {}\n_cache_lock = threading.Lock()\n\n@classmethod\ndef _get_type_adapter(cls, resp_model):\n    if resp_model not in cls._type_adapter_cache:\n        with cls._cache_lock:\n            if resp_model not in cls._type_adapter_cache:\n                cls._type_adapter_cache[resp_model] = TypeAdapter(resp_model)\n    return cls._type_adapter_cache[resp_model]\n</code></pre>"},{"location":"advanced/architecture/#3-signature-caching","title":"3. Signature Caching","text":"<p>Function signatures cached to avoid repeated <code>inspect.signature()</code> calls:</p> <pre><code>_signature_cache: dict[Callable, MappingProxyType] = {}\n\n@classmethod\ndef _get_signature(cls, endpoint):\n    if endpoint not in cls._signature_cache:\n        sig = inspect.signature(endpoint)\n        cls._signature_cache[endpoint] = sig.parameters\n    return cls._signature_cache[endpoint]\n</code></pre>"},{"location":"advanced/architecture/#4-dynamic-model-caching","title":"4. Dynamic Model Caching","text":"<p>Pydantic validation models cached per endpoint:</p> <pre><code>_param_model_cache: dict[frozenset, type[BaseModel]] = {}\n\n@classmethod\ndef _get_or_create_validation_model(cls, endpoint, model_fields):\n    cache_key = frozenset(\n        (endpoint.__module__, endpoint.__name__, name, str(field_info))\n        for name, field_info in model_fields.items()\n    )\n\n    if cache_key not in cls._param_model_cache:\n        cls._param_model_cache[cache_key] = create_model(\n            \"ParamsModel\",\n            __base__=_ParamsBase,\n            **model_fields,\n        )\n\n    return cls._param_model_cache[cache_key]\n</code></pre>"},{"location":"advanced/architecture/#5-request-scoped-dependency-caching","title":"5. Request-Scoped Dependency Caching","text":"<p>Dependencies cached per request using <code>WeakKeyDictionary</code> for automatic cleanup:</p> <pre><code>self._request_cache = WeakKeyDictionary()\n\n# Cache keyed by (dependency_id, request_data_id)\ncache_key = (id(dependency_func), id(request_data))\n</code></pre>"},{"location":"advanced/architecture/#design-principles","title":"Design Principles","text":""},{"location":"advanced/architecture/#1-framework-agnostic","title":"1. Framework Agnostic","text":"<p>Core logic is independent of any specific framework. Framework-specific code is isolated in: - Router classes (3 methods to implement) - Extractor classes (extract data from framework request)</p>"},{"location":"advanced/architecture/#2-composition-over-inheritance","title":"2. Composition Over Inheritance","text":"<p>Instead of a monolithic router, FastOpenAPI uses specialized components: - <code>Extractors</code> extract data - <code>ParameterResolver</code> validates parameters - <code>DependencyResolver</code> handles injection - <code>ResponseBuilder</code> serializes responses - <code>OpenAPIGenerator</code> creates schemas</p> <p>This makes each component: - Easier to test in isolation - Easier to replace or customize - Easier to understand - More maintainable</p>"},{"location":"advanced/architecture/#3-type-safety","title":"3. Type Safety","text":"<ul> <li>Full type hints throughout</li> <li>Pydantic v2 for validation</li> <li>TypeAdapter for response validation</li> </ul>"},{"location":"advanced/architecture/#4-thread-safety","title":"4. Thread Safety","text":"<ul> <li>All caches use locks</li> <li>Request-scoped caching with <code>WeakKeyDictionary</code></li> <li>Per-function locks in dependency resolver</li> <li>Double-checked locking pattern</li> </ul>"},{"location":"advanced/architecture/#5-performance","title":"5. Performance","text":"<ul> <li>Lazy schema generation</li> <li>Multiple layers of caching</li> <li>Minimal overhead over native framework</li> <li>Pydantic v2's optimized validation</li> </ul>"},{"location":"advanced/architecture/#6-minimal-dependencies","title":"6. Minimal Dependencies","text":"<p>Core only requires Pydantic v2. Framework-specific dependencies are optional.</p>"},{"location":"advanced/architecture/#adding-a-new-framework","title":"Adding a New Framework","text":"<p>To add support for a new framework, you need:</p>"},{"location":"advanced/architecture/#1-create-extractor-class","title":"1. Create Extractor Class","text":"<pre><code># fastopenapi/routers/myframework/extractors.py\n\nfrom fastopenapi.routers.extractors import BaseAsyncRequestDataExtractor\nfrom fastopenapi.core.types import RequestData\nfrom fastopenapi.routers.common import RequestEnvelope\n\nclass MyFrameworkExtractor(BaseAsyncRequestDataExtractor):\n\n    @classmethod\n    async def _get_path_params(cls, env: RequestEnvelope) -&gt; dict:\n        request = env.request\n        return request.path_params  # Framework-specific\n\n    @classmethod\n    async def _get_query_params(cls, env: RequestEnvelope) -&gt; dict:\n        request = env.request\n        return dict(request.query_params)  # Framework-specific\n\n    # Implement other _get_* methods...\n</code></pre>"},{"location":"advanced/architecture/#2-create-router-class","title":"2. Create Router Class","text":"<pre><code># fastopenapi/routers/myframework/async_router.py\n\nfrom fastopenapi.routers.base import BaseAdapter\nfrom fastopenapi.routers.common import RequestEnvelope\nfrom fastopenapi.core.types import Response\nfrom .extractors import MyFrameworkExtractor\n\nclass MyFrameworkRouter(BaseAdapter):\n    \"\"\"MyFramework adapter for FastOpenAPI\"\"\"\n\n    extractor_async_cls = MyFrameworkExtractor\n\n    def add_route(self, path: str, method: str, endpoint: Callable):\n        \"\"\"Register route with MyFramework\"\"\"\n        super().add_route(path, method, endpoint)\n\n        # Create wrapper\n        async def view(request):\n            env = RequestEnvelope(path_params=None, request=request)\n            return await self.handle_request_async(endpoint, env)\n\n        # Register with framework\n        self.app.add_route(path, view, methods=[method])\n\n    def build_framework_response(self, response: Response):\n        \"\"\"Convert Response to MyFrameworkResponse\"\"\"\n        return MyFrameworkResponse(\n            content=response.content,\n            status=response.status_code,\n            headers=response.headers,\n        )\n\n    def is_framework_response(self, response):\n        \"\"\"Check if already a framework response\"\"\"\n        return isinstance(response, MyFrameworkResponse)\n</code></pre>"},{"location":"advanced/architecture/#3-register-in-__init__py","title":"3. Register in <code>__init__.py</code>","text":"<pre><code># fastopenapi/routers/__init__.py\n\nfrom .myframework.async_router import MyFrameworkRouter\n\n__all__ = [\n    # ... other routers\n    \"MyFrameworkRouter\",\n]\n</code></pre>"},{"location":"advanced/architecture/#4-add-tests","title":"4. Add Tests","text":"<pre><code># tests/routers/myframework/test_myframework_router.py\n\ndef test_get_endpoint(client):\n    response = client.get(\"/test\")\n    assert response.status_code == 200\n\ndef test_parameter_extraction(client):\n    response = client.get(\"/users/123\")\n    assert response.json() == {\"user_id\": 123}\n\n# ... more tests\n</code></pre> <p>That's it! Three classes and you've integrated a new framework.</p>"},{"location":"advanced/architecture/#testing-architecture","title":"Testing Architecture","text":"<p>FastOpenAPI has comprehensive tests:</p> <pre><code>tests/\n\u251c\u2500\u2500 core/                           # Core functionality\n\u2502   \u251c\u2500\u2500 test_base_router.py\n\u2502   \u251c\u2500\u2500 test_dependency_resolver.py\n\u2502   \u251c\u2500\u2500 test_params.py\n\u2502   \u2514\u2500\u2500 test_types.py\n\u251c\u2500\u2500 resolution/                     # Parameter resolution\n\u2502   \u2514\u2500\u2500 test_parameter_resolver.py\n\u251c\u2500\u2500 response/                       # Response building\n\u2502   \u2514\u2500\u2500 test_response_builder.py\n\u251c\u2500\u2500 openapi/                        # Schema generation\n\u2502   \u251c\u2500\u2500 test_openapi_generator.py\n\u2502   \u2514\u2500\u2500 test_ui.py\n\u2514\u2500\u2500 routers/                        # Framework adapters\n    \u251c\u2500\u2500 aiohttp/\n    \u251c\u2500\u2500 django/\n    \u251c\u2500\u2500 falcon/\n    \u251c\u2500\u2500 flask/\n    \u251c\u2500\u2500 quart/\n    \u251c\u2500\u2500 sanic/\n    \u251c\u2500\u2500 starlette/\n    \u2514\u2500\u2500 tornado/\n        \u251c\u2500\u2500 test_{framework}_router.py\n        \u251c\u2500\u2500 test_{framework}_extractor.py\n        \u2514\u2500\u2500 test_{framework}_integration.py\n</code></pre> <p>Each framework has: - Router tests - Extractor tests - Integration tests</p>"},{"location":"advanced/architecture/#architecture-decisions","title":"Architecture Decisions","text":""},{"location":"advanced/architecture/#why-composition","title":"Why Composition?","text":"<p>Instead of: <pre><code>class BaseRouter:\n    def extract_parameters(self, ...):\n        # 500 lines\n\n    def validate_parameters(self, ...):\n        # 300 lines\n\n    def resolve_dependencies(self, ...):\n        # 400 lines\n\n    # ... 2000 lines total\n</code></pre></p> <p>We use: <pre><code>class BaseAdapter:\n    extractor_cls = Extractor          # ~200 lines\n    resolver_cls = ParameterResolver   # ~500 lines\n    dependency_cls = DependencyResolver # ~600 lines\n    builder_cls = ResponseBuilder      # ~100 lines\n</code></pre></p> <p>Benefits: - Each component has one responsibility - Easy to test in isolation - Easy to customize (just swap the class) - No god objects - Clear dependencies</p>"},{"location":"advanced/architecture/#why-three-tier-inheritance","title":"Why Three-Tier Inheritance?","text":"<ol> <li>BaseRouter - Framework-agnostic route registration</li> <li>BaseAdapter - Framework-agnostic request pipeline</li> <li>FrameworkRouter - Framework-specific glue (just 3 methods!)</li> </ol> <p>This separation means: - Core logic never touches framework code - Framework adapters are thin (50-150 lines) - Easy to add new frameworks - Easy to maintain</p>"},{"location":"advanced/architecture/#why-weakkeydictionary","title":"Why WeakKeyDictionary?","text":"<pre><code>self._request_cache = WeakKeyDictionary()\n</code></pre> <ul> <li>Automatic cleanup when request is garbage collected</li> <li>No manual cache clearing needed</li> <li>No memory leaks</li> <li>Thread-safe with RLock</li> </ul>"},{"location":"advanced/architecture/#why-double-checked-locking","title":"Why Double-Checked Locking?","text":"<pre><code>if key not in cache:  # First check (fast path)\n    with lock:\n        if key not in cache:  # Second check (slow path)\n            cache[key] = expensive_operation()\n</code></pre> <ul> <li>Fast path avoids lock for cache hits</li> <li>Slow path ensures thread safety</li> <li>Prevents duplicate work in multi-threaded environments</li> </ul>"},{"location":"advanced/architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Custom Routers - Build custom routers</li> <li>OpenAPI Customization - Customize schemas</li> <li>Testing - Testing your API</li> <li>Performance - Optimization tips</li> </ul>"},{"location":"advanced/architecture_quick_reference/","title":"Architecture Quick Reference","text":"<p>This is a quick visual reference for FastOpenAPI's architecture. For detailed explanation, see Architecture.</p>"},{"location":"advanced/architecture_quick_reference/#three-tier-design","title":"Three-Tier Design","text":"<pre><code>graph LR\n    A[BaseRouter&lt;br/&gt;Route Registration] --&gt; B[BaseAdapter&lt;br/&gt;Request Pipeline]\n    B --&gt; C[FrameworkRouter&lt;br/&gt;Framework Integration]\n\n    style A fill:#e1f5ff\n    style B fill:#fff4e1\n    style C fill:#e8f5e9</code></pre>"},{"location":"advanced/architecture_quick_reference/#component-composition","title":"Component Composition","text":"<pre><code>graph TB\n    subgraph \"Your Code\"\n        E[Endpoint Functions]\n    end\n\n    subgraph \"FastOpenAPI Core\"\n        R[BaseRouter]\n        A[BaseAdapter]\n        F[FrameworkRouter]\n    end\n\n    subgraph \"Specialized Components\"\n        EX[Extractors]\n        PR[ParameterResolver]\n        DR[DependencyResolver]\n        RB[ResponseBuilder]\n        OG[OpenAPIGenerator]\n    end\n\n    E --&gt;|decorated by| R\n    R --&gt;|inherits| A\n    A --&gt;|inherits| F\n    F -.uses.-&gt; EX\n    F -.uses.-&gt; PR\n    F -.uses.-&gt; DR\n    F -.uses.-&gt; RB\n    R -.uses.-&gt; OG</code></pre>"},{"location":"advanced/architecture_quick_reference/#request-flow","title":"Request Flow","text":"<pre><code>sequenceDiagram\n    autonumber\n    participant C as Client\n    participant FW as Framework\n    participant FR as FrameworkRouter\n    participant EX as Extractor\n    participant PR as ParameterResolver\n    participant DR as DependencyResolver\n    participant EP as Endpoint\n    participant RB as ResponseBuilder\n\n    C-&gt;&gt;FW: HTTP Request\n    FW-&gt;&gt;FR: Route matched\n    FR-&gt;&gt;EX: Extract data\n    EX--&gt;&gt;FR: RequestData\n    FR-&gt;&gt;PR: Resolve params\n    PR-&gt;&gt;DR: Resolve deps\n    DR--&gt;&gt;PR: Dependencies\n    PR--&gt;&gt;FR: kwargs\n    FR-&gt;&gt;EP: Call endpoint\n    EP--&gt;&gt;FR: Result\n    FR-&gt;&gt;RB: Build response\n    RB--&gt;&gt;FR: Response\n    FR--&gt;&gt;FW: Framework response\n    FW--&gt;&gt;C: HTTP Response</code></pre>"},{"location":"advanced/architecture_quick_reference/#key-classes","title":"Key Classes","text":"Class Location Responsibility <code>BaseRouter</code> <code>fastopenapi/core/router.py</code> Route registration, OpenAPI generation <code>BaseAdapter</code> <code>fastopenapi/routers/base.py</code> Request pipeline orchestration <code>FrameworkRouter</code> <code>fastopenapi/routers/{framework}/</code> Framework integration (3 methods) <code>BaseRequestDataExtractor</code> / <code>BaseAsyncRequestDataExtractor</code> <code>fastopenapi/routers/extractors.py</code> Extract data from requests (sync / async) <code>ParameterResolver</code> <code>fastopenapi/resolution/resolver.py</code> Parameter validation <code>DependencyResolver</code> <code>fastopenapi/core/dependency_resolver.py</code> Dependency injection <code>ResponseBuilder</code> <code>fastopenapi/response/builder.py</code> Response serialization <code>OpenAPIGenerator</code> <code>fastopenapi/openapi/generator.py</code> Schema generation"},{"location":"advanced/architecture_quick_reference/#adding-a-framework-checklist","title":"Adding a Framework: Checklist","text":"<p>To add a new framework, implement:</p> <ul> <li>[ ] Extractor class - Extract data from framework request</li> <li>Inherit from <code>BaseAsyncRequestDataExtractor</code> or <code>BaseRequestDataExtractor</code></li> <li> <p>Implement <code>_get_*</code> methods (<code>_get_path_params</code>, <code>_get_query_params</code>, <code>_get_headers</code>, <code>_get_cookies</code>, <code>_get_body</code>, <code>_get_form_data</code>, <code>_get_files</code>)</p> </li> <li> <p>[ ] Router class - Integrate with framework</p> </li> <li>Inherit from <code>BaseAdapter</code></li> <li>Set <code>extractor_cls</code> or <code>extractor_async_cls</code></li> <li>Implement <code>add_route()</code></li> <li>Implement <code>build_framework_response()</code></li> <li> <p>Implement <code>is_framework_response()</code></p> </li> <li> <p>[ ] Tests - Comprehensive test suite</p> </li> <li>Router tests</li> <li>Extractor tests</li> <li>Integration tests</li> </ul> <p>That's it! Just 2-3 classes.</p>"},{"location":"advanced/architecture_quick_reference/#parameter-hierarchy","title":"Parameter Hierarchy","text":"<pre><code>classDiagram\n    FieldInfo &lt;|-- BaseParam\n    BaseParam &lt;|-- Param\n    BaseParam &lt;|-- Body\n    Param &lt;|-- Query\n    Param &lt;|-- Path\n    Param &lt;|-- Header\n    Param &lt;|-- Cookie\n    Body &lt;|-- Form\n    Body &lt;|-- File</code></pre>"},{"location":"advanced/architecture_quick_reference/#error-hierarchy","title":"Error Hierarchy","text":"<pre><code>classDiagram\n    Exception &lt;|-- APIError\n    APIError &lt;|-- BadRequestError\n    APIError &lt;|-- ValidationError\n    APIError &lt;|-- AuthenticationError\n    APIError &lt;|-- AuthorizationError\n    APIError &lt;|-- ResourceNotFoundError\n    APIError &lt;|-- InternalServerError\n    InternalServerError &lt;|-- DependencyError\n    DependencyError &lt;|-- CircularDependencyError\n    DependencyError &lt;|-- SecurityError</code></pre>"},{"location":"advanced/architecture_quick_reference/#caching-strategy","title":"Caching Strategy","text":"Cache Type Key Cleanup Purpose TypeAdapter Class-level Model type Never Response validation Signature Class-level Function Never Parameter inspection Param Model Class-level Fields hash Never Validation models Dependency Request-scoped (func, request) Automatic (WeakKeyDictionary) DI results OpenAPI Schema Instance-level N/A Never Schema generation"},{"location":"advanced/architecture_quick_reference/#performance-optimizations","title":"Performance Optimizations","text":"<ol> <li>Lazy OpenAPI Generation - Schema only generated when accessed</li> <li>TypeAdapter Caching - Pydantic adapters cached with thread-safe locking</li> <li>Signature Caching - Function signatures cached</li> <li>Dynamic Model Caching - Validation models cached per endpoint</li> <li>Request-Scoped Caching - Dependencies cached per request</li> <li>Double-Checked Locking - Fast path avoids locks for cache hits</li> </ol>"},{"location":"advanced/architecture_quick_reference/#design-principles","title":"Design Principles","text":"<pre><code>mindmap\n  root((FastOpenAPI&lt;br/&gt;Design))\n    Framework Agnostic\n      Core never touches framework code\n      Thin adapters\n    Composition\n      Specialized components\n      Single responsibility\n      Easy to test\n    Type Safety\n      Full type hints\n      Pydantic v2\n      TypeAdapter\n    Thread Safety\n      Locked caches\n      WeakKeyDictionary\n      Per-function locks\n    Performance\n      Multiple cache layers\n      Lazy generation\n      Minimal overhead\n    Minimal Dependencies\n      Pydantic v2 only\n      Optional framework deps</code></pre>"},{"location":"advanced/architecture_quick_reference/#next-steps","title":"Next Steps","text":"<ul> <li>Full Architecture Documentation - Detailed explanation</li> <li>Custom Routers - Build custom framework adapters</li> <li>OpenAPI Customization - Customize schemas</li> <li>Testing - Testing strategies</li> <li>Performance - Optimization tips</li> </ul>"},{"location":"advanced/custom_routers/","title":"Custom Routers","text":"<p>This guide explains how to create a custom router for integrating FastOpenAPI with a new web framework.</p>"},{"location":"advanced/custom_routers/#when-to-create-a-custom-router","title":"When to Create a Custom Router","text":"<p>Create a custom router when:</p> <ul> <li>You want to integrate FastOpenAPI with an unsupported framework</li> <li>You need custom behavior that differs from existing routers</li> <li>You're building a framework and want FastOpenAPI support</li> </ul>"},{"location":"advanced/custom_routers/#architecture-overview","title":"Architecture Overview","text":"<p>FastOpenAPI uses a three-tier composition-based adapter pattern:</p> <pre><code>BaseRouter (route registration, OpenAPI generation)\n    \u2193 inherits\nBaseAdapter (request pipeline via composition)\n    \u2193 inherits\nFrameworkRouter (framework-specific glue)\n</code></pre> <p>Your custom router needs to:</p> <ol> <li>Inherit from <code>BaseAdapter</code></li> <li>Implement a request data extractor</li> <li>Implement framework response building</li> <li>Register routes with your framework</li> </ol>"},{"location":"advanced/custom_routers/#step-1-create-request-data-extractor","title":"Step 1: Create Request Data Extractor","text":"<p>The extractor converts framework requests into FastOpenAPI's <code>RequestData</code>:</p> <pre><code>from typing import Any\nfrom fastopenapi.core.types import FileUpload, RequestData\nfrom fastopenapi.routers.extractors import BaseRequestDataExtractor\n\nclass MyFrameworkExtractor(BaseRequestDataExtractor):\n    \"\"\"Extract request data from MyFramework requests\"\"\"\n\n    @classmethod\n    def _get_path_params(cls, request: Any) -&gt; dict:\n        \"\"\"Extract path parameters from URL\"\"\"\n        # Example: request.match_info for aiohttp, request.path_params for starlette\n        return getattr(request, \"path_params\", {})\n\n    @classmethod\n    def _get_query_params(cls, request: Any) -&gt; dict:\n        \"\"\"Extract query string parameters\"\"\"\n        query_params = {}\n        for key in request.query:\n            values = request.query.getall(key)\n            query_params[key] = values[0] if len(values) == 1 else values\n        return query_params\n\n    @classmethod\n    def _get_headers(cls, request: Any) -&gt; dict:\n        \"\"\"Extract HTTP headers\"\"\"\n        return dict(request.headers)\n\n    @classmethod\n    def _get_cookies(cls, request: Any) -&gt; dict:\n        \"\"\"Extract cookies\"\"\"\n        return dict(request.cookies)\n\n    @classmethod\n    def _get_body(cls, request: Any) -&gt; dict | list | None:\n        \"\"\"Extract JSON body\"\"\"\n        content_type = request.content_type or \"\"\n        if \"application/json\" in content_type:\n            return request.json()\n        return {}\n\n    @classmethod\n    def _get_form_data(cls, request: Any) -&gt; dict:\n        \"\"\"Extract form data\"\"\"\n        return dict(request.form) if hasattr(request, \"form\") else {}\n\n    @classmethod\n    def _get_files(cls, request: Any) -&gt; dict[str, FileUpload | list[FileUpload]]:\n        \"\"\"Extract uploaded files\"\"\"\n        files = {}\n        for key, file_obj in request.files.items():\n            files[key] = FileUpload(\n                filename=file_obj.filename,\n                content_type=file_obj.content_type,\n                size=file_obj.size,\n                file=file_obj.file,\n            )\n        return files\n</code></pre> <p>For async frameworks, inherit from <code>BaseAsyncRequestDataExtractor</code> instead.</p>"},{"location":"advanced/custom_routers/#step-2-create-the-router","title":"Step 2: Create the Router","text":"<pre><code>import inspect\nfrom collections.abc import Callable\nfrom fastopenapi.core.types import Response\nfrom fastopenapi.routers.base import BaseAdapter\nfrom fastopenapi.routers.common import RequestEnvelope\nfrom fastopenapi.openapi.ui import render_swagger_ui, render_redoc_ui\n\n# Import your framework\nfrom myframework import App, Response as FrameworkResponse\n\n\nclass MyFrameworkRouter(BaseAdapter):\n    \"\"\"Router for MyFramework\"\"\"\n\n    # Path conversion pattern: {param} -&gt; framework format\n    # Examples:\n    #   Flask: (r\"{(\\w+)}\", r\"&lt;\\1&gt;\")      -&gt; /users/&lt;user_id&gt;\n    #   Starlette: (r\"{(\\w+)}\", r\"{\\1}\")  -&gt; /users/{user_id}\n    PATH_CONVERSIONS = (r\"{(\\w+)}\", r\"&lt;\\1&gt;\")\n\n    # Set the extractor class\n    extractor_cls = MyFrameworkExtractor\n\n    def add_route(self, path: str, method: str, endpoint: Callable):\n        \"\"\"Register route with the framework\"\"\"\n        # First, call parent to store route info\n        super().add_route(path, method, endpoint)\n\n        if self.app is not None:\n            # Convert path format for framework\n            framework_path = self._convert_path_for_framework(path)\n\n            # Create view function wrapper\n            def view_func(**path_params):\n                # Create request envelope\n                env = RequestEnvelope(\n                    request=get_current_request(),  # Framework-specific\n                    path_params=path_params\n                )\n\n                # Check for async endpoint in sync router\n                if inspect.iscoroutinefunction(endpoint):\n                    raise Exception(\n                        f\"Async endpoint '{endpoint.__name__}' \"\n                        f\"cannot be used with sync router.\"\n                    )\n\n                # Delegate to BaseAdapter's request handler\n                return self.handle_request(endpoint, env)\n\n            # Register with framework\n            self.app.add_route(framework_path, view_func, methods=[method])\n\n    def build_framework_response(self, response: Response) -&gt; FrameworkResponse:\n        \"\"\"Convert FastOpenAPI Response to framework response\"\"\"\n        return FrameworkResponse(\n            body=response.content,\n            status=response.status_code,\n            headers=response.headers,\n            content_type=\"application/json\"\n        )\n\n    def is_framework_response(self, response) -&gt; bool:\n        \"\"\"Check if response is already a framework response\"\"\"\n        return isinstance(response, FrameworkResponse)\n\n    def _register_docs_endpoints(self):\n        \"\"\"Register OpenAPI documentation endpoints\"\"\"\n        app = self.app\n\n        @app.route(self.openapi_url, methods=[\"GET\"])\n        def openapi_json():\n            return FrameworkResponse(\n                body=self.openapi,\n                content_type=\"application/json\"\n            )\n\n        @app.route(self.docs_url, methods=[\"GET\"])\n        def swagger_ui():\n            html = render_swagger_ui(self.openapi_url)\n            return FrameworkResponse(body=html, content_type=\"text/html\")\n\n        @app.route(self.redoc_url, methods=[\"GET\"])\n        def redoc():\n            html = render_redoc_ui(self.openapi_url)\n            return FrameworkResponse(body=html, content_type=\"text/html\")\n</code></pre>"},{"location":"advanced/custom_routers/#step-3-async-router-optional","title":"Step 3: Async Router (Optional)","text":"<p>For async frameworks:</p> <pre><code>from fastopenapi.routers.extractors import BaseAsyncRequestDataExtractor\n\n\nclass MyAsyncExtractor(BaseAsyncRequestDataExtractor):\n    \"\"\"Async extractor for MyFramework\"\"\"\n\n    @classmethod\n    async def _get_body(cls, request) -&gt; dict | list | None:\n        \"\"\"Async body extraction\"\"\"\n        if request.content_type == \"application/json\":\n            return await request.json()\n        return {}\n\n    @classmethod\n    async def _get_files(cls, request) -&gt; dict[str, FileUpload | list[FileUpload]]:\n        \"\"\"Async file extraction\"\"\"\n        files = {}\n        async for field in request.multipart():\n            if field.filename:\n                content = await field.read()\n                files[field.name] = FileUpload(\n                    filename=field.filename,\n                    content_type=field.content_type,\n                    size=len(content),\n                    file=content,\n                )\n        return files\n\n\nclass MyAsyncRouter(BaseAdapter):\n    \"\"\"Async router for MyFramework\"\"\"\n\n    extractor_async_cls = MyAsyncExtractor\n\n    def add_route(self, path: str, method: str, endpoint: Callable):\n        \"\"\"Register async route\"\"\"\n        super().add_route(path, method, endpoint)\n\n        if self.app is not None:\n            framework_path = self._convert_path_for_framework(path)\n\n            async def view_func(request):\n                env = RequestEnvelope(\n                    request=request,\n                    path_params=request.match_info\n                )\n                # Use async handler\n                return await self.handle_request_async(endpoint, env)\n\n            self.app.router.add_route(method, framework_path, view_func)\n\n    # ... implement other methods\n</code></pre>"},{"location":"advanced/custom_routers/#complete-example-sync-router","title":"Complete Example: Sync Router","text":"<p>Here's a complete example based on Flask's pattern:</p> <pre><code>import inspect\nfrom collections.abc import Callable\nfrom typing import Any\n\nfrom fastopenapi.core.types import FileUpload, Response\nfrom fastopenapi.routers.base import BaseAdapter\nfrom fastopenapi.routers.common import RequestEnvelope\nfrom fastopenapi.routers.extractors import BaseRequestDataExtractor\nfrom fastopenapi.openapi.ui import render_swagger_ui, render_redoc_ui\n\n# Framework imports\nfrom myframework import App, Request, Response as MFResponse\n\n\nclass MyFrameworkExtractor(BaseRequestDataExtractor):\n    @classmethod\n    def _get_path_params(cls, request: Any) -&gt; dict:\n        return getattr(request, \"path_params\", {})\n\n    @classmethod\n    def _get_query_params(cls, request: Any) -&gt; dict:\n        return dict(request.args)\n\n    @classmethod\n    def _get_headers(cls, request: Any) -&gt; dict:\n        return dict(request.headers)\n\n    @classmethod\n    def _get_cookies(cls, request: Any) -&gt; dict:\n        return dict(request.cookies)\n\n    @classmethod\n    def _get_body(cls, request: Any) -&gt; dict | list | None:\n        if request.is_json:\n            return request.json\n        return {}\n\n    @classmethod\n    def _get_form_data(cls, request: Any) -&gt; dict:\n        return dict(request.form)\n\n    @classmethod\n    def _get_files(cls, request: Any) -&gt; dict[str, FileUpload | list[FileUpload]]:\n        files = {}\n        for key, file_obj in request.files.items():\n            files[key] = FileUpload(\n                filename=file_obj.filename,\n                content_type=file_obj.content_type,\n                size=None,\n                file=file_obj,\n            )\n        return files\n\n\nclass MyFrameworkRouter(BaseAdapter):\n    \"\"\"Custom router for MyFramework\"\"\"\n\n    PATH_CONVERSIONS = (r\"{(\\w+)}\", r\"&lt;\\1&gt;\")\n    extractor_cls = MyFrameworkExtractor\n\n    def add_route(self, path: str, method: str, endpoint: Callable):\n        super().add_route(path, method, endpoint)\n\n        if self.app is not None:\n            framework_path = self._convert_path_for_framework(path)\n\n            def view_func(**path_params):\n                from myframework import current_request\n                env = RequestEnvelope(\n                    request=current_request,\n                    path_params=path_params\n                )\n\n                if inspect.iscoroutinefunction(endpoint):\n                    raise Exception(\n                        f\"Async endpoint '{endpoint.__name__}' \"\n                        f\"cannot be used with MyFrameworkRouter.\"\n                    )\n\n                return self.handle_request(endpoint, env)\n\n            endpoint_name = f\"{endpoint.__name__}:{method}:{framework_path}\"\n            self.app.add_url_rule(\n                framework_path,\n                endpoint_name,\n                view_func,\n                methods=[method]\n            )\n\n    def build_framework_response(self, response: Response) -&gt; MFResponse:\n        mf_response = MFResponse(response.content)\n        mf_response.status_code = response.status_code\n        for key, value in response.headers.items():\n            mf_response.headers[key] = value\n        return mf_response\n\n    def is_framework_response(self, response) -&gt; bool:\n        return isinstance(response, MFResponse)\n\n    def _register_docs_endpoints(self):\n        @self.app.route(self.openapi_url)\n        def openapi_json():\n            return MFResponse(self.openapi, mimetype=\"application/json\")\n\n        @self.app.route(self.docs_url)\n        def swagger_docs():\n            html = render_swagger_ui(self.openapi_url)\n            return MFResponse(html, mimetype=\"text/html\")\n\n        @self.app.route(self.redoc_url)\n        def redoc_docs():\n            html = render_redoc_ui(self.openapi_url)\n            return MFResponse(html, mimetype=\"text/html\")\n</code></pre>"},{"location":"advanced/custom_routers/#usage","title":"Usage","text":"<pre><code>from myframework import App\nfrom pydantic import BaseModel\n\napp = App()\nrouter = MyFrameworkRouter(\n    app=app,\n    title=\"My API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"id\": item_id, \"name\": \"Test\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n</code></pre>"},{"location":"advanced/custom_routers/#testing-your-router","title":"Testing Your Router","text":"<pre><code>def test_custom_router():\n    app = App()\n    router = MyFrameworkRouter(app=app)\n\n    @router.get(\"/test\")\n    def test_endpoint():\n        return {\"status\": \"ok\"}\n\n    client = app.test_client()\n    response = client.get(\"/test\")\n    assert response.status_code == 200\n    assert response.json == {\"status\": \"ok\"}\n</code></pre>"},{"location":"advanced/custom_routers/#key-classes-reference","title":"Key Classes Reference","text":""},{"location":"advanced/custom_routers/#routeinfo","title":"RouteInfo","text":"<p>Container for route information (from <code>fastopenapi.core.router</code>):</p> <pre><code>class RouteInfo:\n    path: str         # Route path, e.g., \"/users/{user_id}\"\n    method: str       # HTTP method (GET, POST, etc.)\n    endpoint: Callable  # The endpoint function\n    meta: dict        # Route metadata (response_model, status_code, tags, etc.)\n</code></pre>"},{"location":"advanced/custom_routers/#requestenvelope","title":"RequestEnvelope","text":"<p>Wrapper for framework request (from <code>fastopenapi.routers.common</code>):</p> <pre><code>@dataclass(slots=True, frozen=True)\nclass RequestEnvelope:\n    path_params: dict[str, str]  # Path parameters extracted by framework\n    request: Any | None          # Framework's request object\n</code></pre>"},{"location":"advanced/custom_routers/#response","title":"Response","text":"<p>FastOpenAPI's response container (from <code>fastopenapi.core.types</code>):</p> <pre><code>class Response:\n    content: Any           # Response body\n    status_code: int       # HTTP status code\n    headers: dict[str, str] # Response headers\n</code></pre>"},{"location":"advanced/custom_routers/#best-practices","title":"Best Practices","text":"<ol> <li>Inherit from BaseAdapter - Don't reinvent the request handling pipeline</li> <li>Use composition - Let BaseAdapter handle parameter resolution and validation</li> <li>Handle async properly - Use <code>handle_request_async()</code> for async endpoints</li> <li>Convert paths correctly - Set <code>PATH_CONVERSIONS</code> for your framework's format</li> <li>Test thoroughly - Test all parameter types, validation, and error handling</li> </ol>"},{"location":"advanced/custom_routers/#submitting-to-fastopenapi","title":"Submitting to FastOpenAPI","text":"<p>If you create a router for a popular framework:</p> <ol> <li>Follow the existing router patterns (see <code>fastopenapi/routers/flask/</code>)</li> <li>Add comprehensive tests (see <code>tests/routers/flask/</code>)</li> <li>Add framework documentation (see <code>docs/frameworks/</code>)</li> <li>Submit a pull request</li> </ol>"},{"location":"advanced/custom_routers/#next-steps","title":"Next Steps","text":"<ul> <li>Architecture - Understand FastOpenAPI internals</li> <li>Testing - Test your custom router</li> <li>OpenAPI Customization - Customize schema generation</li> </ul>"},{"location":"advanced/openapi_customization/","title":"OpenAPI Customization","text":"<p>This guide covers customizing the OpenAPI schema generation in FastOpenAPI.</p>"},{"location":"advanced/openapi_customization/#basic-configuration","title":"Basic Configuration","text":"<p>Configure OpenAPI metadata when creating your router:</p> <pre><code>from fastopenapi.routers import FlaskRouter\n\nrouter = FlaskRouter(\n    app=app,\n    title=\"My API\",\n    version=\"2.0.0\",\n    description=\"A comprehensive API for managing resources\",\n    docs_url=\"/docs\",\n    redoc_url=\"/redoc\",\n    openapi_url=\"/openapi.json\",\n    openapi_version=\"3.1.0\"\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#supported-parameters","title":"Supported Parameters","text":"<p>The router constructor supports the following parameters:</p> Parameter Type Default Description <code>app</code> Any None Framework application instance <code>title</code> str \"My App\" API title <code>version</code> str \"0.1.0\" API version <code>description</code> str \"API documentation\" API description <code>docs_url</code> str | None \"/docs\" Swagger UI URL <code>redoc_url</code> str | None \"/redoc\" ReDoc URL <code>openapi_url</code> str | None \"/openapi.json\" OpenAPI schema URL <code>openapi_version</code> str \"3.0.0\" OpenAPI specification version <code>security_scheme</code> SecuritySchemeType | None BEARER_JWT Default security scheme <p>Note: Setting any URL to <code>None</code> disables all documentation endpoints at once.</p>"},{"location":"advanced/openapi_customization/#tags","title":"Tags","text":"<p>Organize endpoints with tags:</p> <pre><code>@router.get(\"/users\", tags=[\"Users\", \"Public\"])\ndef list_users():\n    return []\n\n@router.post(\"/users\", tags=[\"Users\", \"Admin\"])\ndef create_user(user: User):\n    return user\n</code></pre>"},{"location":"advanced/openapi_customization/#tag-metadata","title":"Tag Metadata","text":"<p>Tags are automatically collected from endpoints. Use the <code>tags</code> parameter in route decorators:</p> <pre><code>@router.get(\"/users\", tags=[\"Users\"])\ndef list_users():\n    return []\n\n@router.get(\"/items\", tags=[\"Items\"])\ndef list_items():\n    return []\n</code></pre>"},{"location":"advanced/openapi_customization/#operation-customization","title":"Operation Customization","text":""},{"location":"advanced/openapi_customization/#operation-id","title":"Operation ID","text":"<pre><code>@router.get(\"/users/{user_id}\", operation_id=\"get_user_by_id\")\ndef get_user(user_id: int):\n    return {\"id\": user_id}\n</code></pre>"},{"location":"advanced/openapi_customization/#summary-and-description","title":"Summary and Description","text":"<pre><code>@router.get(\n    \"/users/{user_id}\",\n    summary=\"Get a user\",\n    description=\"Retrieve a user by their unique ID\"\n)\ndef get_user(user_id: int):\n    return {\"id\": user_id}\n</code></pre> <p>Or use docstrings:</p> <pre><code>@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    \"\"\"\n    Get a user by ID.\n\n    This endpoint retrieves detailed information about a specific user.\n    Requires authentication.\n    \"\"\"\n    return {\"id\": user_id}\n</code></pre>"},{"location":"advanced/openapi_customization/#deprecation","title":"Deprecation","text":"<p>Mark endpoints as deprecated:</p> <pre><code>@router.get(\"/old-endpoint\", deprecated=True)\ndef old_endpoint():\n    \"\"\"This endpoint is deprecated. Use /new-endpoint instead.\"\"\"\n    return {\"message\": \"deprecated\"}\n</code></pre>"},{"location":"advanced/openapi_customization/#response-documentation","title":"Response Documentation","text":""},{"location":"advanced/openapi_customization/#multiple-response-codes","title":"Multiple Response Codes","text":"<pre><code>@router.get(\n    \"/users/{user_id}\",\n    responses={\n        200: {\"description\": \"User found\"},\n        404: {\"description\": \"User not found\"},\n        500: {\"description\": \"Internal server error\"}\n    }\n)\ndef get_user(user_id: int):\n    user = database.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(\"User not found\")\n    return user\n</code></pre>"},{"location":"advanced/openapi_customization/#response-models-for-different-status-codes","title":"Response Models for Different Status Codes","text":"<pre><code>class UserResponse(BaseModel):\n    id: int\n    name: str\n\nclass ErrorResponse(BaseModel):\n    error: str\n    message: str\n\n@router.get(\n    \"/users/{user_id}\",\n    responses={\n        200: {\"model\": UserResponse, \"description\": \"Successful response\"},\n        404: {\"model\": ErrorResponse, \"description\": \"User not found\"},\n    }\n)\ndef get_user(user_id: int):\n    return UserResponse(id=user_id, name=\"John\")\n</code></pre>"},{"location":"advanced/openapi_customization/#request-body-documentation","title":"Request Body Documentation","text":""},{"location":"advanced/openapi_customization/#example-values","title":"Example Values","text":"<pre><code>class UserCreate(BaseModel):\n    username: str = Field(..., example=\"johndoe\")\n    email: EmailStr = Field(..., example=\"john@example.com\")\n    age: int = Field(..., example=25, ge=0, le=120)\n\n@router.post(\"/users\")\ndef create_user(user: UserCreate):\n    return user\n</code></pre>"},{"location":"advanced/openapi_customization/#multiple-examples","title":"Multiple Examples","text":"<pre><code>class UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n    model_config = {\n        \"json_schema_extra\": {\n            \"examples\": [\n                {\n                    \"username\": \"johndoe\",\n                    \"email\": \"john@example.com\"\n                },\n                {\n                    \"username\": \"janedoe\",\n                    \"email\": \"jane@example.com\"\n                }\n            ]\n        }\n    }\n</code></pre>"},{"location":"advanced/openapi_customization/#parameter-documentation","title":"Parameter Documentation","text":""},{"location":"advanced/openapi_customization/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int = Path(\n        ...,\n        description=\"The unique identifier of the user\",\n        example=123,\n        ge=1\n    )\n):\n    return {\"id\": user_id}\n</code></pre>"},{"location":"advanced/openapi_customization/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/users\")\ndef list_users(\n    page: int = Query(\n        1,\n        description=\"Page number\",\n        example=1,\n        ge=1\n    ),\n    limit: int = Query(\n        10,\n        description=\"Number of items per page\",\n        example=10,\n        ge=1,\n        le=100\n    )\n):\n    return []\n</code></pre>"},{"location":"advanced/openapi_customization/#security-schemes","title":"Security Schemes","text":""},{"location":"advanced/openapi_customization/#api-key-in-header","title":"API Key in Header","text":"<pre><code>from fastopenapi import SecuritySchemeType\n\nrouter = FlaskRouter(\n    app=app,\n    title=\"My API\",\n    version=\"1.0.0\",\n    security_scheme=SecuritySchemeType.API_KEY_HEADER\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#bearer-jwt","title":"Bearer JWT","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    title=\"My API\",\n    version=\"1.0.0\",\n    security_scheme=SecuritySchemeType.BEARER_JWT\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#custom-security-scheme","title":"Custom Security Scheme","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    title=\"My API\",\n    version=\"1.0.0\",\n    security_scheme={\n        \"type\": \"http\",\n        \"scheme\": \"bearer\",\n        \"bearerFormat\": \"JWT\",\n        \"description\": \"Enter your JWT token\"\n    }\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#oauth2","title":"OAuth2","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    security_scheme={\n        \"type\": \"oauth2\",\n        \"flows\": {\n            \"password\": {\n                \"tokenUrl\": \"https://example.com/oauth/token\",\n                \"scopes\": {\n                    \"read\": \"Read access\",\n                    \"write\": \"Write access\",\n                    \"admin\": \"Admin access\"\n                }\n            }\n        }\n    }\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#additional-openapi-fields","title":"Additional OpenAPI Fields","text":"<p>The following OpenAPI fields are not supported as constructor parameters, but can be added manually via schema customization:</p> <ul> <li>servers - Server URLs for different environments</li> <li>externalDocs - Link to external documentation</li> <li>info.contact - API contact information</li> <li>info.license - API license information</li> <li>info.termsOfService - Terms of service URL</li> <li>tags - Tag metadata with descriptions</li> </ul> <p>See Custom Schema Generation below for how to add these.</p>"},{"location":"advanced/openapi_customization/#custom-schema-generation","title":"Custom Schema Generation","text":""},{"location":"advanced/openapi_customization/#override-the-openapi-property","title":"Override the openapi Property","text":"<p>The <code>openapi</code> property generates the schema lazily and caches it. You can override it to customize the schema:</p> <pre><code>class MyRouter(FlaskRouter):\n    @property\n    def openapi(self) -&gt; dict:\n        \"\"\"Get customized OpenAPI schema\"\"\"\n        if self._openapi_schema is None:\n            # Generate base schema\n            from fastopenapi.openapi.generator import OpenAPIGenerator\n            generator = OpenAPIGenerator(self)\n            self._openapi_schema = generator.generate()\n\n            # Add custom fields\n            self._openapi_schema[\"x-api-id\"] = \"my-api\"\n            self._openapi_schema[\"x-custom-field\"] = \"custom-value\"\n\n            # Modify paths\n            for path in self._openapi_schema[\"paths\"].values():\n                for operation in path.values():\n                    if isinstance(operation, dict):\n                        operation[\"x-code-samples\"] = [\n                            {\n                                \"lang\": \"Python\",\n                                \"source\": \"# Python code here\"\n                            }\n                        ]\n\n        return self._openapi_schema\n</code></pre>"},{"location":"advanced/openapi_customization/#add-custom-components","title":"Add Custom Components","text":"<pre><code>class MyRouter(FlaskRouter):\n    @property\n    def openapi(self) -&gt; dict:\n        if self._openapi_schema is None:\n            from fastopenapi.openapi.generator import OpenAPIGenerator\n            generator = OpenAPIGenerator(self)\n            self._openapi_schema = generator.generate()\n\n            # Add custom schemas\n            self._openapi_schema[\"components\"][\"schemas\"][\"Error\"] = {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"code\": {\"type\": \"integer\"},\n                    \"message\": {\"type\": \"string\"}\n                }\n            }\n\n            # Add response definitions\n            self._openapi_schema[\"components\"][\"responses\"] = {\n                \"NotFound\": {\n                    \"description\": \"Resource not found\",\n                    \"content\": {\n                        \"application/json\": {\n                            \"schema\": {\"$ref\": \"#/components/schemas/Error\"}\n                        }\n                    }\n                }\n            }\n\n        return self._openapi_schema\n</code></pre>"},{"location":"advanced/openapi_customization/#model-schema-customization","title":"Model Schema Customization","text":""},{"location":"advanced/openapi_customization/#field-customization","title":"Field Customization","text":"<pre><code>from pydantic import BaseModel, Field\n\nclass User(BaseModel):\n    id: int = Field(..., description=\"User ID\", example=1)\n    username: str = Field(\n        ...,\n        description=\"Unique username\",\n        example=\"johndoe\",\n        min_length=3,\n        max_length=50\n    )\n    email: EmailStr = Field(..., description=\"User email address\")\n\n    model_config = {\n        \"json_schema_extra\": {\n            \"title\": \"User Model\",\n            \"description\": \"Represents a user in the system\"\n        }\n    }\n</code></pre>"},{"location":"advanced/openapi_customization/#exclude-fields-from-schema","title":"Exclude Fields from Schema","text":"<pre><code>class UserInternal(BaseModel):\n    id: int\n    username: str\n    password_hash: str = Field(exclude=True)  # Not in OpenAPI schema\n</code></pre>"},{"location":"advanced/openapi_customization/#custom-json-schema","title":"Custom JSON Schema","text":"<pre><code>class User(BaseModel):\n    id: int\n    name: str\n\n    @classmethod\n    def model_json_schema(cls, **kwargs):\n        schema = super().model_json_schema(**kwargs)\n        # Customize schema\n        schema[\"title\"] = \"User Object\"\n        schema[\"x-custom\"] = \"value\"\n        return schema\n</code></pre>"},{"location":"advanced/openapi_customization/#documentation-ui-customization","title":"Documentation UI Customization","text":""},{"location":"advanced/openapi_customization/#disable-documentation","title":"Disable Documentation","text":"<p>To disable all documentation endpoints, set any URL to <code>None</code>:</p> <pre><code>router = FlaskRouter(\n    app=app,\n    docs_url=None,      # Disables all: Swagger UI, ReDoc, and OpenAPI JSON\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#custom-documentation-paths","title":"Custom Documentation Paths","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    docs_url=\"/api-docs\",           # Custom Swagger UI path\n    redoc_url=\"/api-documentation\", # Custom ReDoc path\n    openapi_url=\"/api-schema.json\"  # Custom schema path\n)\n</code></pre>"},{"location":"advanced/openapi_customization/#complete-example","title":"Complete Example","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel, EmailStr, Field\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi import Path, Query\n\napp = Flask(__name__)\n\nrouter = FlaskRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"2.0.0\",\n    description=\"\"\"\n    # User Management System\n\n    This API provides endpoints for managing users in the system.\n\n    ## Features\n\n    * Create, read, update, and delete users\n    * Search and filter users\n    * User authentication\n    \"\"\",\n    docs_url=\"/docs\",\n    redoc_url=\"/redoc\",\n    openapi_url=\"/openapi.json\"\n)\n\nclass UserCreate(BaseModel):\n    username: str = Field(\n        ...,\n        description=\"Unique username\",\n        example=\"johndoe\",\n        min_length=3,\n        max_length=50\n    )\n    email: EmailStr = Field(..., example=\"john@example.com\")\n    full_name: str = Field(..., example=\"John Doe\")\n\nclass UserResponse(BaseModel):\n    id: int = Field(..., description=\"User ID\", example=1)\n    username: str\n    email: EmailStr\n    full_name: str\n\n@router.get(\n    \"/users\",\n    response_model=list[UserResponse],\n    tags=[\"Users\"],\n    summary=\"List all users\",\n    description=\"Retrieve a paginated list of all users\",\n    responses={\n        200: {\"description\": \"Successful response\"},\n        500: {\"description\": \"Internal server error\"}\n    }\n)\ndef list_users(\n    page: int = Query(1, description=\"Page number\", ge=1),\n    limit: int = Query(10, description=\"Items per page\", ge=1, le=100)\n):\n    \"\"\"List users with pagination.\"\"\"\n    return []\n\n@router.get(\n    \"/users/{user_id}\",\n    response_model=UserResponse,\n    tags=[\"Users\"],\n    summary=\"Get user by ID\",\n    responses={\n        200: {\"description\": \"User found\"},\n        404: {\"description\": \"User not found\"}\n    }\n)\ndef get_user(\n    user_id: int = Path(..., description=\"User ID\", example=1, ge=1)\n):\n    \"\"\"Retrieve a single user by ID.\"\"\"\n    return UserResponse(\n        id=user_id,\n        username=\"johndoe\",\n        email=\"john@example.com\",\n        full_name=\"John Doe\"\n    )\n\n@router.post(\n    \"/users\",\n    response_model=UserResponse,\n    status_code=201,\n    tags=[\"Users\"],\n    summary=\"Create new user\",\n    responses={\n        201: {\"description\": \"User created successfully\"},\n        400: {\"description\": \"Invalid input\"}\n    }\n)\ndef create_user(user: UserCreate):\n    \"\"\"Create a new user.\"\"\"\n    return UserResponse(id=1, **user.model_dump())\n\nif __name__ == \"__main__\":\n    print(\"API Documentation: http://localhost:5000/docs\")\n    app.run(debug=True)\n</code></pre>"},{"location":"advanced/openapi_customization/#next-steps","title":"Next Steps","text":"<ul> <li>Architecture - Understand schema generation</li> <li>Custom Routers - Extend schema generation</li> <li>Testing - Test your API schema</li> </ul>"},{"location":"advanced/performance/","title":"Performance Optimization","text":"<p>This guide covers performance optimization techniques for FastOpenAPI applications.</p>"},{"location":"advanced/performance/#choosing-the-right-framework","title":"Choosing the Right Framework","text":"<p>Different frameworks have different performance characteristics:</p>"},{"location":"advanced/performance/#async-frameworks-best-performance","title":"Async Frameworks (Best Performance)","text":"<p>Starlette - Best for I/O-bound workloads <pre><code>from starlette.applications import Starlette\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(app=app)\n\n@router.get(\"/data\")\nasync def get_data():\n    # Non-blocking I/O operations\n    data = await fetch_from_database()\n    return data\n</code></pre></p> <p>Sanic - High-performance async framework <pre><code>from sanic import Sanic\nfrom fastopenapi.routers import SanicRouter\n\napp = Sanic(\"MyApp\")\nrouter = SanicRouter(app=app)\n\n@router.get(\"/users\")\nasync def list_users():\n    return await db.fetch_users()\n</code></pre></p> <p>AioHTTP - Async framework with good performance <pre><code>from aiohttp import web\nfrom fastopenapi.routers import AioHttpRouter\n\napp = web.Application()\nrouter = AioHttpRouter(app=app)\n\n@router.get(\"/items\")\nasync def list_items():\n    return await db.query_items()\n</code></pre></p>"},{"location":"advanced/performance/#sync-frameworks","title":"Sync Frameworks","text":"<p>Flask - Simple but slower for I/O-bound tasks <pre><code>from flask import Flask\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(app=app)\n\n# Use for CPU-bound tasks or simple APIs\n@router.get(\"/calculate\")\ndef calculate():\n    result = heavy_calculation()\n    return {\"result\": result}\n</code></pre></p>"},{"location":"advanced/performance/#database-optimization","title":"Database Optimization","text":""},{"location":"advanced/performance/#use-connection-pooling","title":"Use Connection Pooling","text":"<pre><code>from sqlalchemy import create_engine\nfrom sqlalchemy.pool import QueuePool\n\n# Configure connection pool\nengine = create_engine(\n    'postgresql://user:pass@localhost/db',\n    poolclass=QueuePool,\n    pool_size=20,           # Maximum number of connections\n    max_overflow=10,        # Extra connections when pool is full\n    pool_timeout=30,        # Timeout for getting connection\n    pool_recycle=3600,      # Recycle connections after 1 hour\n    pool_pre_ping=True      # Check connection health before use\n)\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n</code></pre>"},{"location":"advanced/performance/#async-database-queries","title":"Async Database Queries","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\n\n# Async engine\nasync_engine = create_async_engine(\n    'postgresql+asyncpg://user:pass@localhost/db',\n    pool_size=20,\n    max_overflow=10\n)\n\nasync def get_async_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n@router.get(\"/users\")\nasync def list_users(db: AsyncSession = Depends(get_async_db)):\n    # Non-blocking database query\n    result = await db.execute(select(User))\n    users = result.scalars().all()\n    return users\n</code></pre>"},{"location":"advanced/performance/#batch-queries","title":"Batch Queries","text":"<pre><code># Bad - N+1 queries\n@router.get(\"/users-with-posts\")\ndef get_users_with_posts():\n    users = db.query(User).all()\n    for user in users:\n        user.posts = db.query(Post).filter(Post.user_id == user.id).all()\n    return users\n\n# Good - Single query with join\n@router.get(\"/users-with-posts\")\ndef get_users_with_posts():\n    users = db.query(User).options(\n        joinedload(User.posts)\n    ).all()\n    return users\n</code></pre>"},{"location":"advanced/performance/#use-indexes","title":"Use Indexes","text":"<pre><code>-- Add indexes for frequently queried fields\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_posts_user_id ON posts(user_id);\nCREATE INDEX idx_posts_created_at ON posts(created_at DESC);\n</code></pre>"},{"location":"advanced/performance/#caching","title":"Caching","text":""},{"location":"advanced/performance/#in-memory-caching","title":"In-Memory Caching","text":"<pre><code>from functools import lru_cache\nfrom datetime import datetime, timedelta\n\n# Cache function results\n@lru_cache(maxsize=128)\ndef get_user_permissions(user_id: int):\n    \"\"\"Cache user permissions for quick access\"\"\"\n    permissions = db.query_permissions(user_id)\n    return permissions\n\n@router.get(\"/permissions\")\ndef get_my_permissions(user = Depends(get_current_user)):\n    permissions = get_user_permissions(user.id)\n    return {\"permissions\": permissions}\n</code></pre>"},{"location":"advanced/performance/#redis-caching","title":"Redis Caching","text":"<pre><code>import redis\nimport json\nfrom datetime import timedelta\n\n# Redis client\nredis_client = redis.Redis(\n    host='localhost',\n    port=6379,\n    db=0,\n    decode_responses=True\n)\n\ndef get_cached_or_fetch(key: str, fetch_func, ttl: int = 3600):\n    \"\"\"Get from cache or fetch and cache\"\"\"\n    # Try to get from cache\n    cached = redis_client.get(key)\n    if cached:\n        return json.loads(cached)\n\n    # Fetch from source\n    data = fetch_func()\n\n    # Cache the result\n    redis_client.setex(\n        key,\n        timedelta(seconds=ttl),\n        json.dumps(data)\n    )\n\n    return data\n\n@router.get(\"/popular-items\")\ndef get_popular_items():\n    \"\"\"Get popular items (cached for 1 hour)\"\"\"\n    return get_cached_or_fetch(\n        key=\"popular_items\",\n        fetch_func=lambda: db.query_popular_items(),\n        ttl=3600\n    )\n</code></pre>"},{"location":"advanced/performance/#response-caching","title":"Response Caching","text":"<pre><code>from flask_caching import Cache\n\n# Configure cache\ncache = Cache(app, config={\n    'CACHE_TYPE': 'redis',\n    'CACHE_REDIS_URL': 'redis://localhost:6379/0'\n})\n\n@router.get(\"/stats\")\n@cache.cached(timeout=300)  # Cache for 5 minutes\ndef get_stats():\n    \"\"\"Expensive statistics calculation\"\"\"\n    stats = calculate_statistics()\n    return stats\n\n# Cache with dynamic key\n@router.get(\"/users/{user_id}\")\n@cache.cached(timeout=600, key_prefix=lambda: f\"user_{request.view_args['user_id']}\")\ndef get_user(user_id: int):\n    user = db.get_user(user_id)\n    return user\n</code></pre>"},{"location":"advanced/performance/#response-optimization","title":"Response Optimization","text":""},{"location":"advanced/performance/#use-pagination","title":"Use Pagination","text":"<pre><code>from pydantic import BaseModel\n\nclass PaginatedResponse(BaseModel):\n    items: list\n    total: int\n    page: int\n    per_page: int\n\n@router.get(\"/items\", response_model=PaginatedResponse)\ndef list_items(\n    page: int = Query(1, ge=1),\n    per_page: int = Query(10, ge=1, le=100)\n):\n    \"\"\"Paginated response - don't return all data at once\"\"\"\n    skip = (page - 1) * per_page\n\n    items = db.query(Item).offset(skip).limit(per_page).all()\n    total = db.query(Item).count()\n\n    return {\n        \"items\": items,\n        \"total\": total,\n        \"page\": page,\n        \"per_page\": per_page\n    }\n</code></pre>"},{"location":"advanced/performance/#select-only-needed-fields","title":"Select Only Needed Fields","text":"<pre><code># Bad - fetching all fields\n@router.get(\"/users\")\ndef list_users():\n    users = db.query(User).all()  # Gets all columns\n    return users\n\n# Good - select only needed fields\n@router.get(\"/users\")\ndef list_users():\n    users = db.query(User.id, User.username, User.email).all()\n    return [\n        {\"id\": u.id, \"username\": u.username, \"email\": u.email}\n        for u in users\n    ]\n</code></pre>"},{"location":"advanced/performance/#response-compression","title":"Response Compression","text":"<pre><code>from flask_compress import Compress\n\n# Enable gzip compression\ncompress = Compress(app)\n\n# Compress large responses\n@router.get(\"/large-dataset\")\ndef get_large_dataset():\n    # Returns compressed JSON\n    return {\"data\": large_data_list}\n</code></pre>"},{"location":"advanced/performance/#async-operations","title":"Async Operations","text":""},{"location":"advanced/performance/#parallel-async-requests","title":"Parallel Async Requests","text":"<pre><code>import asyncio\nimport httpx\n\n@router.get(\"/dashboard\")\nasync def get_dashboard():\n    \"\"\"Fetch data from multiple sources in parallel\"\"\"\n\n    # Sequential - slow (3 seconds total)\n    # users = await fetch_users()      # 1 second\n    # posts = await fetch_posts()      # 1 second\n    # comments = await fetch_comments() # 1 second\n\n    # Parallel - fast (1 second total)\n    users, posts, comments = await asyncio.gather(\n        fetch_users(),      # 1 second\n        fetch_posts(),      # 1 second\n        fetch_comments()    # 1 second\n    )\n\n    return {\n        \"users\": users,\n        \"posts\": posts,\n        \"comments\": comments\n    }\n</code></pre>"},{"location":"advanced/performance/#background-tasks","title":"Background Tasks","text":"<pre><code>import asyncio\n\n@router.post(\"/send-notification\", status_code=202)\nasync def send_notification(user_id: int, message: str):\n    \"\"\"Send notification asynchronously\"\"\"\n\n    # Don't wait for completion\n    asyncio.create_task(\n        send_notification_async(user_id, message)\n    )\n\n    return {\n        \"message\": \"Notification queued\",\n        \"status\": \"pending\"\n    }\n\nasync def send_notification_async(user_id: int, message: str):\n    \"\"\"Background task\"\"\"\n    await asyncio.sleep(5)  # Simulate slow operation\n    print(f\"Notification sent to user {user_id}\")\n</code></pre>"},{"location":"advanced/performance/#validation-optimization","title":"Validation Optimization","text":""},{"location":"advanced/performance/#cache-pydantic-models","title":"Cache Pydantic Models","text":"<p>FastOpenAPI automatically caches Pydantic model validation, but you can optimize further:</p> <pre><code>from pydantic import BaseModel, ConfigDict\n\nclass OptimizedModel(BaseModel):\n    \"\"\"Optimized Pydantic model\"\"\"\n\n    model_config = ConfigDict(\n        # Faster validation\n        validate_assignment=False,\n        # Use slots for memory efficiency\n        use_attribute_docstrings=True\n    )\n\n    id: int\n    name: str\n    value: float\n</code></pre>"},{"location":"advanced/performance/#lazy-validation","title":"Lazy Validation","text":"<pre><code># Validate only when needed\nclass LazyModel(BaseModel):\n    data: dict  # Don't validate nested structure\n\n    def validate_data(self):\n        # Validate when accessed\n        return NestedModel(**self.data)\n</code></pre>"},{"location":"advanced/performance/#connection-management","title":"Connection Management","text":""},{"location":"advanced/performance/#keep-alive-connections","title":"Keep-Alive Connections","text":"<pre><code>import httpx\n\n# Reuse HTTP client\nhttp_client = httpx.AsyncClient(\n    timeout=30.0,\n    limits=httpx.Limits(\n        max_keepalive_connections=20,\n        max_connections=100\n    )\n)\n\n@router.get(\"/external-data\")\nasync def get_external_data():\n    \"\"\"Reuse HTTP connections\"\"\"\n    response = await http_client.get(\"https://api.example.com/data\")\n    return response.json()\n</code></pre>"},{"location":"advanced/performance/#database-connection-limits","title":"Database Connection Limits","text":"<pre><code># Configure based on load\nengine = create_engine(\n    database_url,\n    pool_size=20,      # Adjust based on concurrency\n    max_overflow=10,   # Extra connections when needed\n    pool_timeout=30,   # Wait time for connection\n)\n</code></pre>"},{"location":"advanced/performance/#profiling","title":"Profiling","text":""},{"location":"advanced/performance/#profile-endpoints","title":"Profile Endpoints","text":"<pre><code>import cProfile\nimport pstats\nfrom io import StringIO\n\n@router.get(\"/profile/slow-endpoint\")\ndef profile_endpoint():\n    \"\"\"Profile this endpoint\"\"\"\n    profiler = cProfile.Profile()\n    profiler.enable()\n\n    # Your endpoint logic\n    result = slow_function()\n\n    profiler.disable()\n\n    # Print stats\n    s = StringIO()\n    ps = pstats.Stats(profiler, stream=s).sort_stats('cumulative')\n    ps.print_stats()\n    print(s.getvalue())\n\n    return result\n</code></pre>"},{"location":"advanced/performance/#monitoring","title":"Monitoring","text":"<pre><code>import time\nfrom functools import wraps\n\ndef measure_time(func):\n    \"\"\"Decorator to measure execution time\"\"\"\n    @wraps(func)\n    async def wrapper(*args, **kwargs):\n        start = time.time()\n        result = await func(*args, **kwargs)\n        duration = time.time() - start\n\n        print(f\"{func.__name__} took {duration:.2f} seconds\")\n        return result\n\n    return wrapper\n\n@router.get(\"/slow\")\n@measure_time\nasync def slow_endpoint():\n    await asyncio.sleep(2)\n    return {\"message\": \"Done\"}\n</code></pre>"},{"location":"advanced/performance/#best-practices","title":"Best Practices","text":""},{"location":"advanced/performance/#1-use-async-for-io-operations","title":"1. Use Async for I/O Operations","text":"<pre><code># Good - async for I/O\n@router.get(\"/data\")\nasync def get_data(db = Depends(get_async_db)):\n    result = await db.fetch_data()\n    return result\n\n# Avoid - sync for I/O in async framework\n@router.get(\"/data\")\nasync def get_data():\n    result = db.fetch_data()  # Blocking!\n    return result\n</code></pre>"},{"location":"advanced/performance/#2-cache-expensive-operations","title":"2. Cache Expensive Operations","text":"<pre><code># Good - cache expensive results\n@lru_cache(maxsize=128)\ndef calculate_statistics():\n    # Expensive calculation\n    return stats\n\n# Avoid - recalculate every time\ndef calculate_statistics():\n    # Expensive calculation\n    return stats\n</code></pre>"},{"location":"advanced/performance/#3-use-connection-pooling","title":"3. Use Connection Pooling","text":"<pre><code># Good - connection pool\nengine = create_engine(url, pool_size=20)\n\n# Avoid - new connection each time\nengine = create_engine(url, poolclass=NullPool)\n</code></pre>"},{"location":"advanced/performance/#4-paginate-large-results","title":"4. Paginate Large Results","text":"<pre><code># Good - pagination\n@router.get(\"/items\")\ndef list_items(page: int = 1, per_page: int = 10):\n    return paginated_items(page, per_page)\n\n# Avoid - return everything\n@router.get(\"/items\")\ndef list_items():\n    return all_items  # Could be millions!\n</code></pre>"},{"location":"advanced/performance/#5-select-only-needed-data","title":"5. Select Only Needed Data","text":"<pre><code># Good - select specific fields\ndb.query(User.id, User.name).all()\n\n# Avoid - select all fields\ndb.query(User).all()\n</code></pre>"},{"location":"advanced/performance/#performance-checklist","title":"Performance Checklist","text":"<ul> <li>[ ] Use async framework for I/O-bound workloads</li> <li>[ ] Enable database connection pooling</li> <li>[ ] Add indexes on frequently queried fields</li> <li>[ ] Implement caching for expensive operations</li> <li>[ ] Use pagination for large datasets</li> <li>[ ] Enable response compression</li> <li>[ ] Profile slow endpoints</li> <li>[ ] Monitor database query performance</li> <li>[ ] Use async database queries</li> <li>[ ] Implement background tasks for long operations</li> <li>[ ] Optimize Pydantic model validation</li> <li>[ ] Reuse HTTP connections</li> <li>[ ] Cache static/rarely-changing data</li> <li>[ ] Use CDN for static assets</li> </ul>"},{"location":"advanced/performance/#see-also","title":"See Also","text":"<ul> <li>Async Tasks Example - Async operations</li> <li>Framework Guides - Framework-specific optimization</li> <li>Dependencies Guide - Optimize dependencies</li> </ul>"},{"location":"advanced/testing/","title":"Testing","text":"<p>This guide covers testing strategies for FastOpenAPI applications.</p>"},{"location":"advanced/testing/#testing-flask-applications","title":"Testing Flask Applications","text":""},{"location":"advanced/testing/#basic-setup","title":"Basic Setup","text":"<pre><code>import pytest\nfrom flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi import Query, Body\nfrom fastopenapi.routers import FlaskRouter\n\n# Application code\napp = Flask(__name__)\nrouter = FlaskRouter(app=app, title=\"Test API\", version=\"1.0.0\")\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"id\": item_id, \"name\": \"Item\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item = Body(...)):\n    return item\n\n# Test code\n@pytest.fixture\ndef client():\n    \"\"\"Create test client\"\"\"\n    app.config['TESTING'] = True\n    with app.test_client() as client:\n        yield client\n\ndef test_get_item(client):\n    \"\"\"Test GET endpoint\"\"\"\n    response = client.get('/items/1')\n    assert response.status_code == 200\n    data = response.get_json()\n    assert data['id'] == 1\n    assert data['name'] == 'Item'\n\ndef test_create_item(client):\n    \"\"\"Test POST endpoint\"\"\"\n    response = client.post('/items', json={\n        'name': 'New Item',\n        'price': 99.99\n    })\n    assert response.status_code == 201\n    data = response.get_json()\n    assert data['name'] == 'New Item'\n    assert data['price'] == 99.99\n\ndef test_validation_error(client):\n    \"\"\"Test validation errors\"\"\"\n    response = client.post('/items', json={\n        'name': 'Item'\n        # Missing 'price' field\n    })\n    assert response.status_code == 422\n    data = response.get_json()\n    assert 'error' in data\n</code></pre>"},{"location":"advanced/testing/#testing-async-frameworks-starlette","title":"Testing Async Frameworks (Starlette)","text":""},{"location":"advanced/testing/#async-test-setup","title":"Async Test Setup","text":"<pre><code>import pytest\nfrom starlette.applications import Starlette\nfrom starlette.testclient import TestClient\nfrom pydantic import BaseModel\nfrom fastopenapi import Body\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(app=app)\n\nclass User(BaseModel):\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    return {\"id\": user_id, \"username\": \"john\"}\n\n@router.post(\"/users\", response_model=User, status_code=201)\nasync def create_user(user: User = Body(...)):\n    return user\n\n# Tests\n@pytest.fixture\ndef client():\n    \"\"\"Create Starlette test client\"\"\"\n    return TestClient(app)\n\ndef test_get_user(client):\n    \"\"\"Test GET endpoint\"\"\"\n    response = client.get('/users/1')\n    assert response.status_code == 200\n    assert response.json()['id'] == 1\n\ndef test_create_user(client):\n    \"\"\"Test POST endpoint\"\"\"\n    response = client.post('/users', json={\n        'username': 'john',\n        'email': 'john@example.com'\n    })\n    assert response.status_code == 201\n    assert response.json()['username'] == 'john'\n</code></pre>"},{"location":"advanced/testing/#testing-with-dependencies","title":"Testing with Dependencies","text":""},{"location":"advanced/testing/#mocking-dependencies","title":"Mocking Dependencies","text":"<pre><code>from fastopenapi import Depends\n\n# Real dependency\ndef get_db():\n    db = DatabaseConnection()\n    try:\n        yield db\n    finally:\n        db.close()\n\n@router.get(\"/items\")\ndef list_items(db = Depends(get_db)):\n    items = db.query_items()\n    return items\n\n# Test code\nclass MockDB:\n    \"\"\"Mock database\"\"\"\n    def query_items(self):\n        return [{\"id\": 1, \"name\": \"Test Item\"}]\n\n@pytest.fixture\ndef mock_db():\n    \"\"\"Mock database dependency\"\"\"\n    return MockDB()\n\ndef test_list_items_with_mock(client, mock_db, monkeypatch):\n    \"\"\"Test with mocked dependency\"\"\"\n    def mock_get_db():\n        yield mock_db\n\n    # Replace dependency\n    monkeypatch.setattr('your_module.get_db', mock_get_db)\n\n    response = client.get('/items')\n    assert response.status_code == 200\n    assert len(response.json()) == 1\n</code></pre>"},{"location":"advanced/testing/#testing-authentication","title":"Testing Authentication","text":""},{"location":"advanced/testing/#testing-protected-endpoints","title":"Testing Protected Endpoints","text":"<pre><code>from fastopenapi import Header, Depends\nfrom fastopenapi.errors import AuthenticationError\n\n# Auth dependency\ndef get_current_user(authorization: str = Header(..., alias=\"Authorization\")):\n    if authorization != \"Bearer valid_token\":\n        raise AuthenticationError(\"Invalid token\")\n    return {\"id\": 1, \"username\": \"john\"}\n\n@router.get(\"/protected\")\ndef protected_endpoint(user = Depends(get_current_user)):\n    return {\"message\": f\"Hello, {user['username']}!\"}\n\n# Tests\ndef test_protected_endpoint_without_auth(client):\n    \"\"\"Test without authorization\"\"\"\n    response = client.get('/protected')\n    assert response.status_code == 401\n\ndef test_protected_endpoint_with_invalid_token(client):\n    \"\"\"Test with invalid token\"\"\"\n    response = client.get('/protected', headers={\n        'Authorization': 'Bearer invalid_token'\n    })\n    assert response.status_code == 401\n\ndef test_protected_endpoint_with_valid_token(client):\n    \"\"\"Test with valid token\"\"\"\n    response = client.get('/protected', headers={\n        'Authorization': 'Bearer valid_token'\n    })\n    assert response.status_code == 200\n    assert 'Hello, john!' in response.json()['message']\n</code></pre>"},{"location":"advanced/testing/#testing-with-database","title":"Testing with Database","text":""},{"location":"advanced/testing/#using-test-database","title":"Using Test Database","text":"<pre><code>import pytest\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\n\n# Test database setup\n@pytest.fixture(scope='function')\ndef test_db():\n    \"\"\"Create test database\"\"\"\n    engine = create_engine('sqlite:///:memory:')\n    TestSessionLocal = sessionmaker(bind=engine)\n\n    # Create tables\n    Base.metadata.create_all(bind=engine)\n\n    db = TestSessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n        Base.metadata.drop_all(bind=engine)\n\ndef test_create_user(client, test_db, monkeypatch):\n    \"\"\"Test user creation with test database\"\"\"\n    def get_test_db():\n        try:\n            yield test_db\n        finally:\n            pass\n\n    monkeypatch.setattr('your_module.get_db', get_test_db)\n\n    response = client.post('/users', json={\n        'username': 'testuser',\n        'email': 'test@example.com'\n    })\n\n    assert response.status_code == 201\n\n    # Verify in database\n    user = test_db.query(User).filter_by(username='testuser').first()\n    assert user is not None\n    assert user.email == 'test@example.com'\n</code></pre>"},{"location":"advanced/testing/#testing-file-uploads","title":"Testing File Uploads","text":"<pre><code>from io import BytesIO\nfrom fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\ndef upload_file(file: FileUpload = File(...)):\n    content = file.read()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n\n# Test\ndef test_file_upload(client):\n    \"\"\"Test file upload\"\"\"\n    data = {\n        'file': (BytesIO(b'test file content'), 'test.txt')\n    }\n\n    response = client.post('/upload', files=data)\n\n    assert response.status_code == 200\n    assert response.json()['filename'] == 'test.txt'\n    assert response.json()['size'] &gt; 0\n\ndef test_multiple_file_upload(client):\n    \"\"\"Test multiple file upload\"\"\"\n    data = {\n        'files': [\n            (BytesIO(b'file 1'), 'file1.txt'),\n            (BytesIO(b'file 2'), 'file2.txt')\n        ]\n    }\n\n    response = client.post('/upload-multiple', files=data)\n    assert response.status_code == 200\n</code></pre>"},{"location":"advanced/testing/#testing-query-parameters","title":"Testing Query Parameters","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    page: int = Query(1, ge=1),\n    limit: int = Query(10, ge=1, le=100),\n    search: str = Query(None)\n):\n    return {\n        \"page\": page,\n        \"limit\": limit,\n        \"search\": search\n    }\n\n# Tests\ndef test_query_parameters_defaults(client):\n    \"\"\"Test with default query parameters\"\"\"\n    response = client.get('/items')\n    assert response.status_code == 200\n    data = response.json()\n    assert data['page'] == 1\n    assert data['limit'] == 10\n    assert data['search'] is None\n\ndef test_query_parameters_custom(client):\n    \"\"\"Test with custom query parameters\"\"\"\n    response = client.get('/items?page=2&amp;limit=20&amp;search=laptop')\n    assert response.status_code == 200\n    data = response.json()\n    assert data['page'] == 2\n    assert data['limit'] == 20\n    assert data['search'] == 'laptop'\n\ndef test_query_parameters_validation(client):\n    \"\"\"Test query parameter validation\"\"\"\n    response = client.get('/items?page=0')  # page must be &gt;= 1\n    assert response.status_code == 422\n</code></pre>"},{"location":"advanced/testing/#testing-error-handling","title":"Testing Error Handling","text":"<pre><code>from fastopenapi.errors import ResourceNotFoundError, BadRequestError\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    if item_id &gt; 100:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n    return {\"id\": item_id}\n\n@router.post(\"/items\")\ndef create_item(name: str):\n    if not name.strip():\n        raise BadRequestError(\"Name cannot be empty\")\n    return {\"name\": name}\n\n# Tests\ndef test_not_found_error(client):\n    \"\"\"Test 404 error\"\"\"\n    response = client.get('/items/999')\n    assert response.status_code == 404\n    data = response.json()\n    assert 'error' in data\n    assert data['error']['type'] == 'resource_not_found'\n\ndef test_bad_request_error(client):\n    \"\"\"Test 400 error\"\"\"\n    response = client.post('/items', json={'name': '  '})\n    assert response.status_code == 400\n    data = response.json()\n    assert 'error' in data\n</code></pre>"},{"location":"advanced/testing/#testing-response-models","title":"Testing Response Models","text":"<pre><code>from pydantic import BaseModel\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    return {\n        \"id\": user_id,\n        \"username\": \"john\",\n        \"email\": \"john@example.com\",\n        \"password_hash\": \"secret\"  # This will be excluded\n    }\n\n# Test\ndef test_response_model_excludes_fields(client):\n    \"\"\"Test response model excludes extra fields\"\"\"\n    response = client.get('/users/1')\n    assert response.status_code == 200\n    data = response.json()\n\n    # Included fields\n    assert 'id' in data\n    assert 'username' in data\n    assert 'email' in data\n\n    # Excluded field\n    assert 'password_hash' not in data\n</code></pre>"},{"location":"advanced/testing/#fixtures-and-test-organization","title":"Fixtures and Test Organization","text":""},{"location":"advanced/testing/#conftestpy","title":"Conftest.py","text":"<pre><code># conftest.py\nimport pytest\nfrom flask import Flask\nfrom your_app import create_app\n\n@pytest.fixture(scope='session')\ndef app():\n    \"\"\"Create application for testing\"\"\"\n    app = create_app({\n        'TESTING': True,\n        'DATABASE_URL': 'sqlite:///:memory:'\n    })\n    return app\n\n@pytest.fixture(scope='function')\ndef client(app):\n    \"\"\"Create test client\"\"\"\n    return app.test_client()\n\n@pytest.fixture(scope='function')\ndef auth_headers():\n    \"\"\"Authentication headers\"\"\"\n    return {'Authorization': 'Bearer test_token'}\n\n@pytest.fixture(scope='function')\ndef sample_user():\n    \"\"\"Sample user data\"\"\"\n    return {\n        'username': 'testuser',\n        'email': 'test@example.com',\n        'password': 'password123'\n    }\n</code></pre>"},{"location":"advanced/testing/#test-organization","title":"Test Organization","text":"<pre><code>tests/\n\u001c\u0000\u0000 conftest.py\n\u001c\u0000\u0000 test_users.py\n\u001c\u0000\u0000 test_products.py\n\u001c\u0000\u0000 test_orders.py\n\u0014\u0000\u0000 test_auth.py\n</code></pre>"},{"location":"advanced/testing/#coverage","title":"Coverage","text":""},{"location":"advanced/testing/#running-with-coverage","title":"Running with Coverage","text":"<pre><code># Install pytest and coverage\npip install pytest pytest-cov\n\n# Run tests with coverage\npytest --cov=fastopenapi --cov-report=html\n\n# View coverage report\n# Opens htmlcov/index.html\n</code></pre>"},{"location":"advanced/testing/#coverage-configuration","title":"Coverage Configuration","text":"<pre><code># .coveragerc\n[run]\nsource = your_app\nomit =\n    */tests/*\n    */venv/*\n    */migrations/*\n\n[report]\nexclude_lines =\n    pragma: no cover\n    def __repr__\n    raise AssertionError\n    raise NotImplementedError\n    if __name__ == .__main__.:\n</code></pre>"},{"location":"advanced/testing/#integration-tests","title":"Integration Tests","text":"<pre><code>import pytest\nfrom your_app import create_app, db\n\n@pytest.fixture(scope='module')\ndef test_client():\n    \"\"\"Integration test client\"\"\"\n    app = create_app('testing')\n\n    with app.test_client() as client:\n        with app.app_context():\n            db.create_all()\n            yield client\n            db.drop_all()\n\ndef test_user_workflow(test_client):\n    \"\"\"Test complete user workflow\"\"\"\n    # Register\n    response = test_client.post('/auth/register', json={\n        'username': 'john',\n        'email': 'john@example.com',\n        'password': 'password123'\n    })\n    assert response.status_code == 201\n\n    # Login\n    response = test_client.post('/auth/login', json={\n        'username': 'john',\n        'password': 'password123'\n    })\n    assert response.status_code == 200\n    token = response.json()['access_token']\n\n    # Access protected endpoint\n    response = test_client.get('/users/me', headers={\n        'Authorization': f'Bearer {token}'\n    })\n    assert response.status_code == 200\n    assert response.json()['username'] == 'john'\n</code></pre>"},{"location":"advanced/testing/#best-practices","title":"Best Practices","text":""},{"location":"advanced/testing/#1-test-each-endpoint","title":"1. Test Each Endpoint","text":"<pre><code># Test all HTTP methods\ndef test_get_items(client):\n    ...\n\ndef test_create_item(client):\n    ...\n\ndef test_update_item(client):\n    ...\n\ndef test_delete_item(client):\n    ...\n</code></pre>"},{"location":"advanced/testing/#2-test-validation","title":"2. Test Validation","text":"<pre><code>def test_valid_input(client):\n    \"\"\"Test with valid input\"\"\"\n    ...\n\ndef test_invalid_input(client):\n    \"\"\"Test with invalid input\"\"\"\n    ...\n\ndef test_missing_required_field(client):\n    \"\"\"Test missing required fields\"\"\"\n    ...\n</code></pre>"},{"location":"advanced/testing/#3-test-error-cases","title":"3. Test Error Cases","text":"<pre><code>def test_not_found(client):\n    \"\"\"Test 404 error\"\"\"\n    ...\n\ndef test_unauthorized(client):\n    \"\"\"Test 401 error\"\"\"\n    ...\n\ndef test_forbidden(client):\n    \"\"\"Test 403 error\"\"\"\n    ...\n</code></pre>"},{"location":"advanced/testing/#4-use-descriptive-test-names","title":"4. Use Descriptive Test Names","text":"<pre><code># Good\ndef test_create_user_with_valid_data_returns_201():\n    ...\n\n# Avoid\ndef test_user():\n    ...\n</code></pre>"},{"location":"advanced/testing/#5-isolate-tests","title":"5. Isolate Tests","text":"<pre><code># Good - each test is independent\ndef test_create_user(client, test_db):\n    # Fresh database for each test\n    ...\n\n# Avoid - tests depend on each other\ndef test_1_create_user():\n    ...\n\ndef test_2_update_user():\n    # Depends on test_1\n    ...\n</code></pre>"},{"location":"advanced/testing/#see-also","title":"See Also","text":"<ul> <li>pytest Documentation - Pytest testing framework</li> <li>Flask Testing - Flask testing guide</li> <li>Starlette Testing - Starlette test client</li> </ul>"},{"location":"api_reference/dependencies/","title":"Dependencies API Reference","text":"<p>API reference for dependency injection classes.</p>"},{"location":"api_reference/dependencies/#depends","title":"Depends","text":"<p>Marker class for dependency injection.</p> <pre><code>from fastopenapi import Depends\n</code></pre>"},{"location":"api_reference/dependencies/#class-definition","title":"Class Definition","text":"<pre><code>class Depends:\n    def __init__(self, dependency: Callable[..., Any] | None = None)\n</code></pre>"},{"location":"api_reference/dependencies/#parameters","title":"Parameters","text":"<ul> <li>dependency (<code>Callable | None</code>): Function or callable class to execute for dependency injection. If <code>None</code>, uses the parameter's type annotation as the dependency.</li> </ul>"},{"location":"api_reference/dependencies/#attributes","title":"Attributes","text":"<ul> <li>dependency (<code>Callable</code>): The dependency function</li> </ul>"},{"location":"api_reference/dependencies/#usage","title":"Usage","text":""},{"location":"api_reference/dependencies/#function-dependency","title":"Function Dependency","text":"<pre><code>def get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n@router.get(\"/users\")\ndef list_users(db: Session = Depends(get_db)):\n    users = db.query(User).all()\n    return users\n</code></pre>"},{"location":"api_reference/dependencies/#class-dependency","title":"Class Dependency","text":"<pre><code>class Pagination:\n    def __init__(\n        self,\n        page: int = Query(1, ge=1),\n        per_page: int = Query(10, ge=1, le=100)\n    ):\n        self.page = page\n        self.per_page = per_page\n\n@router.get(\"/items\")\ndef list_items(pagination: Pagination = Depends()):\n    # pagination is an instance of Pagination\n    return {\n        \"page\": pagination.page,\n        \"per_page\": pagination.per_page\n    }\n</code></pre>"},{"location":"api_reference/dependencies/#auto-resolution","title":"Auto-Resolution","text":"<p>When <code>dependency</code> is <code>None</code>, FastOpenAPI uses the parameter's type annotation:</p> <pre><code>class UserService:\n    def __init__(self, db: Session = Depends(get_db)):\n        self.db = db\n\n    def get_user(self, user_id: int):\n        return self.db.query(User).filter(User.id == user_id).first()\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int,\n    service: UserService = Depends()  # UserService will be called\n):\n    return service.get_user(user_id)\n</code></pre>"},{"location":"api_reference/dependencies/#security","title":"Security","text":"<p>Security dependency with OAuth2 scopes support.</p> <pre><code>from fastopenapi import Security\n</code></pre>"},{"location":"api_reference/dependencies/#class-definition_1","title":"Class Definition","text":"<pre><code>class Security(Depends):\n    def __init__(\n        self,\n        dependency: Callable[..., Any] | None = None,\n        *,\n        scopes: Sequence[str] | None = None,\n    )\n</code></pre>"},{"location":"api_reference/dependencies/#parameters_1","title":"Parameters","text":"<ul> <li>dependency (<code>Callable | None</code>): Security validation function</li> <li>scopes (<code>Sequence[str] | None</code>): Required OAuth2 scopes</li> </ul>"},{"location":"api_reference/dependencies/#attributes_1","title":"Attributes","text":"<ul> <li>dependency (<code>Callable</code>): The security function</li> <li>scopes (<code>list[str]</code>): List of required scopes</li> </ul>"},{"location":"api_reference/dependencies/#usage_1","title":"Usage","text":""},{"location":"api_reference/dependencies/#basic-security","title":"Basic Security","text":"<pre><code>def verify_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    token = authorization[7:]\n    payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n    return payload\n\n@router.get(\"/protected\")\ndef protected_route(user = Security(verify_token)):\n    return {\"user_id\": user[\"user_id\"]}\n</code></pre>"},{"location":"api_reference/dependencies/#oauth2-scopes","title":"OAuth2 Scopes","text":"<pre><code>from fastopenapi import Security, SecurityScopes\n\ndef verify_scopes(\n    authorization: str = Header(..., alias=\"Authorization\"),\n    security_scopes: SecurityScopes,\n):\n    token = authorization[7:]\n    payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n\n    # Check if user has required scopes\n    user_scopes = payload.get(\"scopes\", [])\n    for scope in security_scopes.scopes:\n        if scope not in user_scopes:\n            raise SecurityError(f\"Scope '{scope}' required\")\n\n    return payload\n\n@router.get(\"/admin/users\")\ndef list_all_users(\n    user = Security(verify_scopes, scopes=[\"admin:read\"])\n):\n    return database.get_all_users()\n\n@router.delete(\"/admin/users/{user_id}\")\ndef delete_user(\n    user_id: int,\n    user = Security(verify_scopes, scopes=[\"admin:write\", \"users:delete\"])\n):\n    database.delete_user(user_id)\n    return {\"deleted\": user_id}\n</code></pre>"},{"location":"api_reference/dependencies/#multiple-scopes","title":"Multiple Scopes","text":"<pre><code>@router.post(\"/posts\")\ndef create_post(\n    content: str,\n    user = Security(verify_scopes, scopes=[\"posts:write\", \"posts:create\"])\n):\n    # User must have BOTH scopes\n    return create_post(content, user[\"user_id\"])\n</code></pre>"},{"location":"api_reference/dependencies/#securityscopes","title":"SecurityScopes","text":"<p>Scopes injected into security dependency functions.</p> <pre><code>from fastopenapi import SecurityScopes\n</code></pre>"},{"location":"api_reference/dependencies/#class-definition_2","title":"Class Definition","text":"<pre><code>class SecurityScopes:\n    def __init__(self, scopes: list[str] | None = None)\n</code></pre>"},{"location":"api_reference/dependencies/#parameters_2","title":"Parameters","text":"<ul> <li>scopes (<code>list[str] | None</code>): List of required scopes. Defaults to <code>[]</code>.</li> </ul>"},{"location":"api_reference/dependencies/#attributes_2","title":"Attributes","text":"<ul> <li>scopes (<code>list[str]</code>): List of required scopes</li> </ul>"},{"location":"api_reference/dependencies/#usage_2","title":"Usage","text":"<p>Add a <code>SecurityScopes</code>-annotated parameter to your security function. FastOpenAPI will automatically inject the scopes from the <code>Security()</code> declaration:</p> <pre><code>from fastopenapi import Security, SecurityScopes\n\ndef verify_token(\n    authorization: str = Header(..., alias=\"Authorization\"),\n    security_scopes: SecurityScopes,\n):\n    token = authorization[7:]\n    payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n\n    for scope in security_scopes.scopes:\n        if scope not in payload.get(\"scopes\", []):\n            raise SecurityError(f\"Missing scope: {scope}\")\n\n    return payload\n\n# security_scopes.scopes will be [\"admin:read\"]\n@router.get(\"/admin\")\ndef admin(user=Security(verify_token, scopes=[\"admin:read\"])):\n    return {\"user\": user}\n</code></pre>"},{"location":"api_reference/dependencies/#dependency-features","title":"Dependency Features","text":""},{"location":"api_reference/dependencies/#request-scoped-caching","title":"Request-Scoped Caching","text":"<p>Dependencies are cached per request. If the same dependency is used multiple times in a single request, it's executed only once:</p> <pre><code>def get_db():\n    print(\"Creating DB connection\")  # Printed once per request\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        print(\"Closing DB connection\")  # Called once per request\n        db.close()\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int,\n    db1: Session = Depends(get_db),  # Same instance\n    db2: Session = Depends(get_db),  # Same instance\n):\n    assert db1 is db2  # True\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"api_reference/dependencies/#nested-dependencies","title":"Nested Dependencies","text":"<p>Dependencies can depend on other dependencies:</p> <pre><code>def get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\ndef get_current_user(\n    token: str = Header(..., alias=\"Authorization\"),\n    db: Session = Depends(get_db)  # Nested dependency\n):\n    payload = verify_token(token)\n    user = db.query(User).filter(User.id == payload[\"user_id\"]).first()\n    if not user:\n        raise AuthenticationError(\"User not found\")\n    return user\n\ndef require_admin(\n    current_user: User = Depends(get_current_user)  # Nested dependency\n):\n    if not current_user.is_admin:\n        raise AuthorizationError(\"Admin required\")\n    return current_user\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user(\n    user_id: int,\n    admin: User = Depends(require_admin)\n):\n    # Dependency chain: get_db -&gt; get_current_user -&gt; require_admin\n    return {\"deleted\": user_id}\n</code></pre>"},{"location":"api_reference/dependencies/#circular-dependency-detection","title":"Circular Dependency Detection","text":"<p>FastOpenAPI automatically detects circular dependencies:</p> <pre><code>def dependency_a(b = Depends(dependency_b)):\n    return b\n\ndef dependency_b(a = Depends(dependency_a)):\n    return a\n\n@router.get(\"/test\")\ndef test(result = Depends(dependency_a)):\n    # Raises CircularDependencyError\n    return result\n</code></pre>"},{"location":"api_reference/dependencies/#generator-dependencies","title":"Generator Dependencies","text":"<p>Use <code>yield</code> for setup/teardown:</p> <pre><code>def get_db():\n    db = SessionLocal()\n    try:\n        yield db  # This value is injected\n    finally:\n        db.close()  # Cleanup always runs\n\n@router.get(\"/users\")\ndef list_users(db = Depends(get_db)):\n    # db is the yielded value\n    # db.close() called after response is returned\n    return db.query(User).all()\n</code></pre>"},{"location":"api_reference/dependencies/#async-dependencies","title":"Async Dependencies","text":"<pre><code>async def get_async_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n@router.get(\"/users\")\nasync def list_users(db = Depends(get_async_db)):\n    result = await db.execute(select(User))\n    users = result.scalars().all()\n    return users\n</code></pre>"},{"location":"api_reference/dependencies/#common-patterns","title":"Common Patterns","text":""},{"location":"api_reference/dependencies/#database-session","title":"Database Session","text":"<pre><code>def get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n@router.get(\"/items\")\ndef list_items(db: Session = Depends(get_db)):\n    return db.query(Item).all()\n</code></pre>"},{"location":"api_reference/dependencies/#current-user","title":"Current User","text":"<pre><code>def get_current_user(\n    authorization: str = Header(..., alias=\"Authorization\"),\n    db: Session = Depends(get_db)\n):\n    token = authorization.replace(\"Bearer \", \"\")\n    payload = verify_token(token)\n    user = db.query(User).filter(User.id == payload[\"user_id\"]).first()\n    if not user:\n        raise AuthenticationError(\"Invalid token\")\n    return user\n\n@router.get(\"/profile\")\ndef get_profile(current_user: User = Depends(get_current_user)):\n    return current_user\n</code></pre>"},{"location":"api_reference/dependencies/#pagination","title":"Pagination","text":"<pre><code>class Pagination:\n    def __init__(\n        self,\n        page: int = Query(1, ge=1),\n        per_page: int = Query(10, ge=1, le=100)\n    ):\n        self.page = page\n        self.per_page = per_page\n        self.skip = (page - 1) * per_page\n\n@router.get(\"/items\")\ndef list_items(\n    pagination: Pagination = Depends(),\n    db: Session = Depends(get_db)\n):\n    items = db.query(Item).offset(pagination.skip).limit(pagination.per_page).all()\n    return {\"items\": items, \"page\": pagination.page}\n</code></pre>"},{"location":"api_reference/dependencies/#service-layer","title":"Service Layer","text":"<pre><code>class UserService:\n    def __init__(self, db: Session = Depends(get_db)):\n        self.db = db\n\n    def get_user(self, user_id: int):\n        return self.db.query(User).filter(User.id == user_id).first()\n\n    def create_user(self, user_data: dict):\n        user = User(**user_data)\n        self.db.add(user)\n        self.db.commit()\n        return user\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int,\n    service: UserService = Depends()\n):\n    user = service.get_user(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n</code></pre>"},{"location":"api_reference/dependencies/#dependencyresolver-internal","title":"DependencyResolver (Internal)","text":"<p>The <code>DependencyResolver</code> class handles the internal resolution of dependencies. While you typically don't need to interact with it directly, understanding it can be useful for advanced use cases.</p> <pre><code>from fastopenapi.core.dependency_resolver import (\n    DependencyResolver,\n    resolve_dependencies,\n    resolve_dependencies_async,\n    get_dependency_stats,\n)\n</code></pre>"},{"location":"api_reference/dependencies/#features","title":"Features","text":"<ul> <li>Request-scoped caching: Dependencies are resolved once per request</li> <li>Recursive resolution: Dependencies can have their own dependencies</li> <li>Circular dependency detection: Automatically detects and reports circular dependencies</li> <li>Security scopes injection: Injects <code>SecurityScopes</code> into security dependency functions</li> <li>Thread-safe operation: Safe for concurrent requests</li> </ul>"},{"location":"api_reference/dependencies/#convenience-functions","title":"Convenience Functions","text":""},{"location":"api_reference/dependencies/#resolve_dependencies","title":"resolve_dependencies()","text":"<p>Resolve dependencies synchronously:</p> <pre><code>from fastopenapi.core.dependency_resolver import resolve_dependencies\n\n# Typically called internally by the router\nkwargs = resolve_dependencies(endpoint_function, request_data)\nresult = endpoint_function(**kwargs)\n</code></pre>"},{"location":"api_reference/dependencies/#resolve_dependencies_async","title":"resolve_dependencies_async()","text":"<p>Resolve dependencies asynchronously:</p> <pre><code>from fastopenapi.core.dependency_resolver import resolve_dependencies_async\n\n# For async endpoints\nkwargs = await resolve_dependencies_async(endpoint_function, request_data)\nresult = await endpoint_function(**kwargs)\n</code></pre>"},{"location":"api_reference/dependencies/#get_dependency_stats","title":"get_dependency_stats()","text":"<p>Get cache statistics for monitoring:</p> <pre><code>from fastopenapi.core.dependency_resolver import get_dependency_stats\n\nstats = get_dependency_stats()\n# {\"active_requests\": 5, \"execution_locks\": 10}\n</code></pre>"},{"location":"api_reference/dependencies/#see-also","title":"See Also","text":"<ul> <li>Dependencies Guide - Comprehensive dependency injection guide</li> <li>Security Guide - Security and authentication</li> <li>Authentication Example - Authentication examples</li> <li>Errors Reference - Error classes (AuthenticationError, SecurityError, etc.)</li> </ul>"},{"location":"api_reference/errors/","title":"Errors API Reference","text":"<p>Complete reference for error handling classes in FastOpenAPI.</p>"},{"location":"api_reference/errors/#error-class-hierarchy","title":"Error Class Hierarchy","text":"<pre><code>APIError (base)\n\u251c\u2500\u2500 BadRequestError\n\u251c\u2500\u2500 ValidationError\n\u251c\u2500\u2500 ResourceNotFoundError\n\u251c\u2500\u2500 AuthenticationError\n\u251c\u2500\u2500 AuthorizationError\n\u251c\u2500\u2500 ResourceConflictError\n\u251c\u2500\u2500 InternalServerError\n\u2502   \u2514\u2500\u2500 DependencyError\n\u2502       \u251c\u2500\u2500 CircularDependencyError\n\u2502       \u2514\u2500\u2500 SecurityError\n\u2514\u2500\u2500 ServiceUnavailableError\n</code></pre>"},{"location":"api_reference/errors/#apierror","title":"APIError","text":"<p>Base exception class for all API errors.</p> <pre><code>from fastopenapi.errors import APIError\n</code></pre>"},{"location":"api_reference/errors/#class-definition","title":"Class Definition","text":"<pre><code>class APIError(Exception):\n    status_code = HTTPStatus.INTERNAL_SERVER_ERROR\n    default_message = \"An error occurred\"\n    error_type = ErrorType.INTERNAL_SERVER_ERROR\n\n    def __init__(\n        self,\n        message: str | None = None,\n        details: Any | None = None,\n    )\n</code></pre>"},{"location":"api_reference/errors/#attributes","title":"Attributes","text":"<ul> <li>status_code (<code>HTTPStatus</code>): HTTP status code (default: <code>500</code>)</li> <li>default_message (<code>str</code>): Default error message</li> <li>error_type (<code>ErrorType</code>): Error type identifier</li> <li>message (<code>str</code>): Error message</li> <li>details (<code>Any</code>): Additional error details</li> </ul>"},{"location":"api_reference/errors/#methods","title":"Methods","text":""},{"location":"api_reference/errors/#to_response","title":"to_response()","text":"<p>Convert to standardized error response.</p> <pre><code>def to_response() -&gt; dict[str, Any]\n</code></pre> <p>Returns: Standardized error dictionary</p> <p>Example: <pre><code>error = BadRequestError(\"Invalid input\")\nresponse = error.to_response()\n# {\n#     \"error\": {\n#         \"type\": \"bad_request\",\n#         \"message\": \"Invalid input\",\n#         \"status\": 400\n#     }\n# }\n</code></pre></p>"},{"location":"api_reference/errors/#from_exception","title":"from_exception()","text":"<p>Convert any exception to an APIError.</p> <pre><code>@classmethod\ndef from_exception(\n    exc: Exception,\n    mapper: dict[type[Exception], type[APIError]] | None = None,\n) -&gt; APIError\n</code></pre> <p>Parameters: - <code>exc</code>: Exception to convert - <code>mapper</code>: Optional mapping of exception types to APIError subclasses</p> <p>Returns: APIError instance</p> <p>Example: <pre><code>try:\n    # Some code that may raise ValueError\n    raise ValueError(\"Invalid value\")\nexcept Exception as e:\n    api_error = APIError.from_exception(e)\n    # Returns APIError with message \"Invalid value\" and status 500\n</code></pre></p>"},{"location":"api_reference/errors/#badrequesterror","title":"BadRequestError","text":"<p>HTTP 400 - Bad Request</p> <pre><code>from fastopenapi.errors import BadRequestError\n</code></pre>"},{"location":"api_reference/errors/#definition","title":"Definition","text":"<pre><code>class BadRequestError(APIError):\n    status_code = HTTPStatus.BAD_REQUEST  # 400\n    default_message = \"Bad request\"\n    error_type = ErrorType.BAD_REQUEST\n</code></pre>"},{"location":"api_reference/errors/#usage","title":"Usage","text":"<pre><code>@router.post(\"/items\")\ndef create_item(name: str = Body(...)):\n    if not name.strip():\n        raise BadRequestError(\"Item name cannot be empty\")\n\n    return {\"name\": name}\n</code></pre>"},{"location":"api_reference/errors/#response-format","title":"Response Format","text":"<pre><code>HTTP/1.1 400 Bad Request\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"bad_request\",\n    \"message\": \"Item name cannot be empty\",\n    \"status\": 400\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#validationerror","title":"ValidationError","text":"<p>HTTP 422 - Unprocessable Entity</p> <pre><code>from fastopenapi.errors import ValidationError\n</code></pre>"},{"location":"api_reference/errors/#definition_1","title":"Definition","text":"<pre><code>class ValidationError(APIError):\n    status_code = HTTPStatus.UNPROCESSABLE_ENTITY  # 422\n    default_message = \"Validation error\"\n    error_type = ErrorType.VALIDATION_ERROR\n</code></pre>"},{"location":"api_reference/errors/#usage_1","title":"Usage","text":"<pre><code>@router.post(\"/items\")\ndef create_item(price: float):\n    if price &lt; 0:\n        raise ValidationError(\n            message=\"Price must be positive\",\n            details={\"field\": \"price\", \"value\": price}\n        )\n\n    return {\"price\": price}\n</code></pre>"},{"location":"api_reference/errors/#response-format_1","title":"Response Format","text":"<pre><code>HTTP/1.1 422 Unprocessable Entity\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error\",\n    \"status\": 422,\n    \"details\": \"Value is not a valid email address\"\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#resourcenotfounderror","title":"ResourceNotFoundError","text":"<p>HTTP 404 - Not Found</p> <pre><code>from fastopenapi.errors import ResourceNotFoundError\n</code></pre>"},{"location":"api_reference/errors/#definition_2","title":"Definition","text":"<pre><code>class ResourceNotFoundError(APIError):\n    status_code = HTTPStatus.NOT_FOUND  # 404\n    default_message = \"Resource not found\"\n    error_type = ErrorType.RESOURCE_NOT_FOUND\n</code></pre>"},{"location":"api_reference/errors/#usage_2","title":"Usage","text":"<pre><code>@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    user = database.get_user(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n\n    return user\n</code></pre>"},{"location":"api_reference/errors/#response-format_2","title":"Response Format","text":"<pre><code>HTTP/1.1 404 Not Found\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"resource_not_found\",\n    \"message\": \"User 123 not found\",\n    \"status\": 404\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#authenticationerror","title":"AuthenticationError","text":"<p>HTTP 401 - Unauthorized</p> <pre><code>from fastopenapi.errors import AuthenticationError\n</code></pre>"},{"location":"api_reference/errors/#definition_3","title":"Definition","text":"<pre><code>class AuthenticationError(APIError):\n    status_code = HTTPStatus.UNAUTHORIZED  # 401\n    default_message = \"Authentication required\"\n    error_type = ErrorType.AUTHENTICATION_ERROR\n</code></pre>"},{"location":"api_reference/errors/#usage_3","title":"Usage","text":"<pre><code>def get_current_user(token: str = Header(..., alias=\"Authorization\")):\n    if not token.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid token format\")\n\n    user = verify_token(token[7:])\n    if not user:\n        raise AuthenticationError(\"Invalid or expired token\")\n\n    return user\n\n@router.get(\"/profile\")\ndef get_profile(user = Depends(get_current_user)):\n    return user\n</code></pre>"},{"location":"api_reference/errors/#response-format_3","title":"Response Format","text":"<pre><code>HTTP/1.1 401 Unauthorized\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"authentication_error\",\n    \"message\": \"Invalid or expired token\",\n    \"status\": 401\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#authorizationerror","title":"AuthorizationError","text":"<p>HTTP 403 - Forbidden</p> <pre><code>from fastopenapi.errors import AuthorizationError\n</code></pre>"},{"location":"api_reference/errors/#definition_4","title":"Definition","text":"<pre><code>class AuthorizationError(APIError):\n    status_code = HTTPStatus.FORBIDDEN  # 403\n    default_message = \"Permission denied\"\n    error_type = ErrorType.AUTHORIZATION_ERROR\n</code></pre>"},{"location":"api_reference/errors/#usage_4","title":"Usage","text":"<pre><code>def require_admin(current_user = Depends(get_current_user)):\n    if not current_user.is_admin:\n        raise AuthorizationError(\"Admin access required\")\n\n    return current_user\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user(user_id: int, admin = Depends(require_admin)):\n    database.delete_user(user_id)\n    return {\"deleted\": user_id}\n</code></pre>"},{"location":"api_reference/errors/#response-format_4","title":"Response Format","text":"<pre><code>HTTP/1.1 403 Forbidden\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"authorization_error\",\n    \"message\": \"Admin access required\",\n    \"status\": 403\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#resourceconflicterror","title":"ResourceConflictError","text":"<p>HTTP 409 - Conflict</p> <pre><code>from fastopenapi.errors import ResourceConflictError\n</code></pre>"},{"location":"api_reference/errors/#definition_5","title":"Definition","text":"<pre><code>class ResourceConflictError(APIError):\n    status_code = HTTPStatus.CONFLICT  # 409\n    default_message = \"Resource conflict\"\n    error_type = ErrorType.RESOURCE_CONFLICT\n</code></pre>"},{"location":"api_reference/errors/#usage_5","title":"Usage","text":"<pre><code>@router.post(\"/users\")\ndef create_user(username: str, email: str):\n    if database.user_exists(username):\n        raise ResourceConflictError(\n            f\"Username '{username}' already exists\"\n        )\n\n    if database.email_exists(email):\n        raise ResourceConflictError(\n            f\"Email '{email}' already registered\"\n        )\n\n    user = database.create_user(username, email)\n    return user\n</code></pre>"},{"location":"api_reference/errors/#response-format_5","title":"Response Format","text":"<pre><code>HTTP/1.1 409 Conflict\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"resource_conflict\",\n    \"message\": \"Username 'john' already exists\",\n    \"status\": 409\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#internalservererror","title":"InternalServerError","text":"<p>HTTP 500 - Internal Server Error</p> <pre><code>from fastopenapi.errors import InternalServerError\n</code></pre>"},{"location":"api_reference/errors/#definition_6","title":"Definition","text":"<pre><code>class InternalServerError(APIError):\n    status_code = HTTPStatus.INTERNAL_SERVER_ERROR  # 500\n    default_message = \"Internal server error\"\n    error_type = ErrorType.INTERNAL_SERVER_ERROR\n</code></pre>"},{"location":"api_reference/errors/#usage_6","title":"Usage","text":"<pre><code>@router.get(\"/items\")\ndef list_items():\n    try:\n        items = database.get_all_items()\n        return items\n    except DatabaseError as e:\n        raise InternalServerError(\n            message=\"Database error occurred\",\n            details=str(e)\n        )\n</code></pre>"},{"location":"api_reference/errors/#response-format_6","title":"Response Format","text":"<pre><code>HTTP/1.1 500 Internal Server Error\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"internal_server_error\",\n    \"message\": \"Database error occurred\",\n    \"status\": 500,\n    \"details\": \"Connection timeout\"\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#serviceunavailableerror","title":"ServiceUnavailableError","text":"<p>HTTP 503 - Service Unavailable</p> <pre><code>from fastopenapi.errors import ServiceUnavailableError\n</code></pre>"},{"location":"api_reference/errors/#definition_7","title":"Definition","text":"<pre><code>class ServiceUnavailableError(APIError):\n    status_code = HTTPStatus.SERVICE_UNAVAILABLE  # 503\n    default_message = \"Service unavailable\"\n    error_type = ErrorType.SERVICE_UNAVAILABLE\n</code></pre>"},{"location":"api_reference/errors/#usage_7","title":"Usage","text":"<pre><code>@router.get(\"/items\")\ndef list_items():\n    if not database.is_connected():\n        raise ServiceUnavailableError(\"Database is unavailable\")\n\n    return database.get_all_items()\n</code></pre>"},{"location":"api_reference/errors/#dependency-errors","title":"Dependency Errors","text":""},{"location":"api_reference/errors/#dependencyerror","title":"DependencyError","text":"<p>Base exception for dependency resolution errors.</p> <pre><code>from fastopenapi.errors import DependencyError\n</code></pre> <pre><code>class DependencyError(InternalServerError):\n    default_message = \"dependency_error\"\n</code></pre>"},{"location":"api_reference/errors/#circulardependencyerror","title":"CircularDependencyError","text":"<p>Raised when circular dependencies are detected.</p> <pre><code>from fastopenapi.errors import CircularDependencyError\n</code></pre> <pre><code>class CircularDependencyError(DependencyError):\n    default_message = \"circular_dependency_error\"\n</code></pre>"},{"location":"api_reference/errors/#securityerror","title":"SecurityError","text":"<p>Raised when security requirements are not met.</p> <pre><code>from fastopenapi.errors import SecurityError\n</code></pre> <pre><code>class SecurityError(DependencyError):\n    status_code = HTTPStatus.FORBIDDEN  # 403\n    default_message = \"insufficient_scope\"\n    error_type = ErrorType.AUTHORIZATION_ERROR\n</code></pre>"},{"location":"api_reference/errors/#exception-mapping","title":"Exception Mapping","text":"<p>Map framework-specific exceptions to API errors:</p> <pre><code>from fastopenapi.routers.base import BaseAdapter\n\n# Custom exception mapper\nEXCEPTION_MAPPER = {\n    ValueError: BadRequestError,\n    KeyError: ResourceNotFoundError,\n    PermissionError: AuthorizationError,\n}\n\nclass MyRouter(BaseAdapter):\n    EXCEPTION_MAPPER = EXCEPTION_MAPPER\n</code></pre>"},{"location":"api_reference/errors/#status_to_error_type","title":"STATUS_TO_ERROR_TYPE","text":"<p>A mapping of HTTP status codes to error types, used internally for exception conversion:</p> <pre><code>from fastopenapi.errors.exceptions import STATUS_TO_ERROR_TYPE\n\n# STATUS_TO_ERROR_TYPE = {\n#     HTTPStatus.BAD_REQUEST: ErrorType.BAD_REQUEST,\n#     HTTPStatus.UNAUTHORIZED: ErrorType.AUTHENTICATION_ERROR,\n#     HTTPStatus.FORBIDDEN: ErrorType.AUTHORIZATION_ERROR,\n#     HTTPStatus.NOT_FOUND: ErrorType.RESOURCE_NOT_FOUND,\n#     HTTPStatus.CONFLICT: ErrorType.RESOURCE_CONFLICT,\n#     HTTPStatus.UNPROCESSABLE_ENTITY: ErrorType.VALIDATION_ERROR,\n#     HTTPStatus.INTERNAL_SERVER_ERROR: ErrorType.INTERNAL_SERVER_ERROR,\n#     HTTPStatus.SERVICE_UNAVAILABLE: ErrorType.SERVICE_UNAVAILABLE,\n# }\n</code></pre> <p>This is used by <code>APIError.from_exception()</code> to determine the error type when converting framework exceptions.</p>"},{"location":"api_reference/errors/#custom-errors","title":"Custom Errors","text":"<p>Create custom error classes:</p> <pre><code>from fastopenapi.errors import APIError\nfrom http import HTTPStatus\n\nclass RateLimitError(APIError):\n    status_code = HTTPStatus.TOO_MANY_REQUESTS  # 429\n    default_message = \"Rate limit exceeded\"\n    error_type = \"rate_limit_error\"\n\n@router.get(\"/api/data\")\ndef get_data():\n    if rate_limiter.is_exceeded():\n        raise RateLimitError(\"Too many requests. Try again later.\")\n\n    return {\"data\": \"...\"}\n</code></pre>"},{"location":"api_reference/errors/#error-response-structure","title":"Error Response Structure","text":"<p>All errors follow this structure:</p> <pre><code>{\n  \"error\": {\n    \"type\": \"error_type_identifier\",\n    \"message\": \"Human-readable error message\",\n    \"status\": 400,\n    \"details\": \"Optional additional details (string, included only when provided)\"\n  }\n}\n</code></pre>"},{"location":"api_reference/errors/#best-practices","title":"Best Practices","text":""},{"location":"api_reference/errors/#1-use-specific-error-classes","title":"1. Use Specific Error Classes","text":"<pre><code># Good\nraise ResourceNotFoundError(f\"User {user_id} not found\")\n\n# Avoid\nraise Exception(\"User not found\")\n</code></pre>"},{"location":"api_reference/errors/#2-provide-helpful-messages","title":"2. Provide Helpful Messages","text":"<pre><code># Good\nraise BadRequestError(\"Email format is invalid. Expected: user@example.com\")\n\n# Avoid\nraise BadRequestError(\"Invalid input\")\n</code></pre>"},{"location":"api_reference/errors/#3-include-details-for-validation-errors","title":"3. Include Details for Validation Errors","text":"<pre><code>raise ValidationError(\n    message=\"Validation failed\",\n    details=[\n        {\"field\": \"email\", \"error\": \"Invalid format\"},\n        {\"field\": \"age\", \"error\": \"Must be &gt;= 18\"}\n    ]\n)\n</code></pre>"},{"location":"api_reference/errors/#4-dont-expose-sensitive-information","title":"4. Don't Expose Sensitive Information","text":"<pre><code># Good\nraise InternalServerError(\"Database error occurred\")\n\n# Avoid\nraise InternalServerError(f\"SQL error: {sql_exception.query}\")\n</code></pre>"},{"location":"api_reference/errors/#see-also","title":"See Also","text":"<ul> <li>Error Handling Guide - Error handling patterns</li> <li>Security Guide - Authentication and authorization</li> <li>Dependencies Reference - Dependency injection</li> </ul>"},{"location":"api_reference/parameters/","title":"Parameters API Reference","text":"<p>Complete reference for all parameter classes in FastOpenAPI.</p>"},{"location":"api_reference/parameters/#query","title":"Query","text":"<p>Extract and validate query parameters from the URL query string.</p> <pre><code>from fastopenapi import Query\n</code></pre>"},{"location":"api_reference/parameters/#signature","title":"Signature","text":"<pre><code>Query(\n    default: Any = None,\n    *,\n    alias: str | None = None,\n    title: str | None = None,\n    description: str | None = None,\n    gt: float | None = None,\n    ge: float | None = None,\n    lt: float | None = None,\n    le: float | None = None,\n    min_length: int | None = None,\n    max_length: int | None = None,\n    pattern: str | None = None,\n    strict: bool | None = None,\n    multiple_of: float | None = None,\n    allow_inf_nan: bool | None = None,\n    max_digits: int | None = None,\n    decimal_places: int | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters","title":"Parameters","text":"<ul> <li>default: Default value if not provided (default: <code>None</code>)</li> <li>alias: Alternative name in the query string</li> <li>title: Title for OpenAPI documentation</li> <li>description: Description for OpenAPI documentation</li> <li>gt: Greater than validation (numbers)</li> <li>ge: Greater than or equal validation (numbers)</li> <li>lt: Less than validation (numbers)</li> <li>le: Less than or equal validation (numbers)</li> <li>min_length: Minimum length (strings/arrays)</li> <li>max_length: Maximum length (strings/arrays)</li> <li>pattern: Regular expression pattern (strings)</li> <li>strict: Enable strict type checking</li> <li>multiple_of: Number must be a multiple of this value</li> <li>allow_inf_nan: Allow infinity and NaN values</li> <li>max_digits: Maximum number of digits</li> <li>decimal_places: Maximum decimal places</li> <li>examples: Example values for documentation</li> <li>deprecated: Mark as deprecated in docs</li> <li>include_in_schema: Include in OpenAPI schema</li> <li>json_schema_extra: Extra JSON schema properties</li> </ul>"},{"location":"api_reference/parameters/#example","title":"Example","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    page: int = Query(1, ge=1, description=\"Page number\"),\n    per_page: int = Query(10, ge=1, le=100, description=\"Items per page\"),\n    search: str | None = Query(None, description=\"Search query\"),\n):\n    return {\"page\": page, \"per_page\": per_page}\n</code></pre>"},{"location":"api_reference/parameters/#path","title":"Path","text":"<p>Extract and validate path parameters from the URL path.</p> <pre><code>from fastopenapi import Path\n</code></pre>"},{"location":"api_reference/parameters/#signature_1","title":"Signature","text":"<pre><code>Path(\n    default: Any = ...,  # Always required (...)\n    *,\n    alias: str | None = None,\n    title: str | None = None,\n    description: str | None = None,\n    gt: float | None = None,\n    ge: float | None = None,\n    lt: float | None = None,\n    le: float | None = None,\n    min_length: int | None = None,\n    max_length: int | None = None,\n    pattern: str | None = None,\n    strict: bool | None = None,\n    multiple_of: float | None = None,\n    allow_inf_nan: bool | None = None,\n    max_digits: int | None = None,\n    decimal_places: int | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters_1","title":"Parameters","text":"<p>Same as <code>Query</code>, except:</p> <ul> <li>default: Must be <code>...</code> (ellipsis) - path parameters are always required</li> </ul>"},{"location":"api_reference/parameters/#important","title":"Important","text":"<p>Path parameters cannot have default values. Attempting to provide a default value other than <code>...</code> will raise a <code>ValueError</code>.</p>"},{"location":"api_reference/parameters/#example_1","title":"Example","text":"<pre><code>@router.get(\"/users/{user_id}/posts/{post_id}\")\ndef get_post(\n    user_id: int = Path(..., ge=1, description=\"User ID\"),\n    post_id: int = Path(..., ge=1, description=\"Post ID\"),\n):\n    return {\"user_id\": user_id, \"post_id\": post_id}\n</code></pre>"},{"location":"api_reference/parameters/#header","title":"Header","text":"<p>Extract and validate HTTP header values.</p> <pre><code>from fastopenapi import Header\n</code></pre>"},{"location":"api_reference/parameters/#signature_2","title":"Signature","text":"<pre><code>Header(\n    default: Any = None,\n    *,\n    alias: str | None = None,\n    convert_underscores: bool = True,\n    title: str | None = None,\n    description: str | None = None,\n    gt: float | None = None,\n    ge: float | None = None,\n    lt: float | None = None,\n    le: float | None = None,\n    min_length: int | None = None,\n    max_length: int | None = None,\n    pattern: str | None = None,\n    strict: bool | None = None,\n    multiple_of: float | None = None,\n    allow_inf_nan: bool | None = None,\n    max_digits: int | None = None,\n    decimal_places: int | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters_2","title":"Parameters","text":"<p>Same as <code>Query</code>, plus:</p> <ul> <li>convert_underscores: Automatically convert underscores to hyphens (default: <code>True</code>)</li> </ul>"},{"location":"api_reference/parameters/#example_2","title":"Example","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    user_agent: str | None = Header(None, alias=\"User-Agent\"),\n    api_key: str = Header(..., alias=\"X-API-Key\", description=\"API Key\"),\n):\n    return {\"user_agent\": user_agent}\n</code></pre> <p>Note: HTTP headers are case-insensitive but typically use kebab-case (e.g., <code>User-Agent</code>, <code>X-API-Key</code>).</p>"},{"location":"api_reference/parameters/#cookie","title":"Cookie","text":"<p>Extract and validate HTTP cookie values.</p> <pre><code>from fastopenapi import Cookie\n</code></pre>"},{"location":"api_reference/parameters/#signature_3","title":"Signature","text":"<pre><code>Cookie(\n    default: Any = None,\n    *,\n    alias: str | None = None,\n    title: str | None = None,\n    description: str | None = None,\n    gt: float | None = None,\n    ge: float | None = None,\n    lt: float | None = None,\n    le: float | None = None,\n    min_length: int | None = None,\n    max_length: int | None = None,\n    pattern: str | None = None,\n    strict: bool | None = None,\n    multiple_of: float | None = None,\n    allow_inf_nan: bool | None = None,\n    max_digits: int | None = None,\n    decimal_places: int | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters_3","title":"Parameters","text":"<p>Same as <code>Query</code>.</p>"},{"location":"api_reference/parameters/#example_3","title":"Example","text":"<pre><code>@router.get(\"/profile\")\ndef get_profile(\n    session_id: str = Cookie(..., description=\"Session ID\"),\n    preferences: str | None = Cookie(None),\n):\n    return {\"session_id\": session_id}\n</code></pre>"},{"location":"api_reference/parameters/#body","title":"Body","text":"<p>Extract and validate JSON request body.</p> <pre><code>from fastopenapi import Body\n</code></pre>"},{"location":"api_reference/parameters/#signature_4","title":"Signature","text":"<pre><code>Body(\n    default: Any = None,\n    *,\n    media_type: str = \"application/json\",\n    alias: str | None = None,\n    title: str | None = None,\n    description: str | None = None,\n    gt: float | None = None,\n    ge: float | None = None,\n    lt: float | None = None,\n    le: float | None = None,\n    min_length: int | None = None,\n    max_length: int | None = None,\n    pattern: str | None = None,\n    strict: bool | None = None,\n    multiple_of: float | None = None,\n    allow_inf_nan: bool | None = None,\n    max_digits: int | None = None,\n    decimal_places: int | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters_4","title":"Parameters","text":"<p>Same as <code>Query</code>, plus:</p> <ul> <li>media_type: MIME type of the body (default: <code>\"application/json\"</code>)</li> </ul>"},{"location":"api_reference/parameters/#example_4","title":"Example","text":"<pre><code>from pydantic import BaseModel\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.post(\"/items\")\ndef create_item(item: Item = Body(...)):\n    return item\n</code></pre>"},{"location":"api_reference/parameters/#form","title":"Form","text":"<p>Extract and validate form data from <code>application/x-www-form-urlencoded</code> requests.</p> <pre><code>from fastopenapi import Form\n</code></pre>"},{"location":"api_reference/parameters/#signature_5","title":"Signature","text":"<pre><code>Form(\n    default: Any = None,\n    *,\n    media_type: str = \"application/x-www-form-urlencoded\",\n    alias: str | None = None,\n    title: str | None = None,\n    description: str | None = None,\n    gt: float | None = None,\n    ge: float | None = None,\n    lt: float | None = None,\n    le: float | None = None,\n    min_length: int | None = None,\n    max_length: int | None = None,\n    pattern: str | None = None,\n    strict: bool | None = None,\n    multiple_of: float | None = None,\n    allow_inf_nan: bool | None = None,\n    max_digits: int | None = None,\n    decimal_places: int | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters_5","title":"Parameters","text":"<p>Same as <code>Body</code>.</p>"},{"location":"api_reference/parameters/#example_5","title":"Example","text":"<pre><code>@router.post(\"/login\")\ndef login(\n    username: str = Form(...),\n    password: str = Form(...),\n):\n    return {\"username\": username}\n</code></pre>"},{"location":"api_reference/parameters/#file","title":"File","text":"<p>Handle file uploads from <code>multipart/form-data</code> requests.</p> <pre><code>from fastopenapi import File\n</code></pre>"},{"location":"api_reference/parameters/#signature_6","title":"Signature","text":"<pre><code>File(\n    default: Any = None,\n    *,\n    media_type: str = \"multipart/form-data\",\n    alias: str | None = None,\n    title: str | None = None,\n    description: str | None = None,\n    examples: list[Any] | None = None,\n    deprecated: bool | None = None,\n    include_in_schema: bool = True,\n    json_schema_extra: dict[str, Any] | None = None,\n)\n</code></pre>"},{"location":"api_reference/parameters/#parameters_6","title":"Parameters","text":"<p>Same as <code>Form</code> (inherits from <code>Form</code>, validation constraints don't apply to files).</p>"},{"location":"api_reference/parameters/#example_6","title":"Example","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\ndef upload_file(file: FileUpload = File(...)):\n    content = file.read()  # Sync frameworks\n    return {\n        \"filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": file.size\n    }\n\n@router.post(\"/upload-async\")\nasync def upload_file_async(file: FileUpload = File(...)):\n    content = await file.aread()  # Async frameworks\n    return {\"filename\": file.filename}\n</code></pre>"},{"location":"api_reference/parameters/#validation-constraints","title":"Validation Constraints","text":"<p>All parameter classes support Pydantic validation constraints:</p>"},{"location":"api_reference/parameters/#numeric-constraints","title":"Numeric Constraints","text":"<ul> <li>gt: Greater than</li> <li>ge: Greater than or equal</li> <li>lt: Less than</li> <li>le: Less than or equal</li> <li>multiple_of: Must be a multiple of this value</li> </ul> <pre><code>age: int = Query(..., ge=0, le=150)\nprice: float = Query(..., gt=0, le=1000000)\nquantity: int = Query(..., multiple_of=10)\n</code></pre>"},{"location":"api_reference/parameters/#string-constraints","title":"String Constraints","text":"<ul> <li>min_length: Minimum string length</li> <li>max_length: Maximum string length</li> <li>pattern: Regular expression pattern</li> </ul> <pre><code>username: str = Query(..., min_length=3, max_length=50)\nemail: str = Query(..., pattern=r'^[\\w\\.-]+@[\\w\\.-]+\\.\\w+$')\n</code></pre>"},{"location":"api_reference/parameters/#number-constraints","title":"Number Constraints","text":"<ul> <li>max_digits: Maximum total digits</li> <li>decimal_places: Maximum decimal places</li> <li>allow_inf_nan: Allow infinity and NaN</li> </ul> <pre><code>price: float = Query(..., max_digits=10, decimal_places=2)\n</code></pre>"},{"location":"api_reference/parameters/#metadata","title":"Metadata","text":"<p>All parameters support OpenAPI metadata:</p> <pre><code>@router.get(\"/items\")\ndef list_items(\n    search: str = Query(\n        None,\n        title=\"Search Query\",\n        description=\"Search items by name or description\",\n        examples=[\"laptop\", \"phone\"],\n        deprecated=False,\n        alias=\"q\"\n    )\n):\n    return {}\n</code></pre> <ul> <li>title: Short title for the parameter</li> <li>description: Longer description</li> <li>examples: Example values (shown in OpenAPI docs)</li> <li>deprecated: Mark parameter as deprecated</li> <li>alias: Alternative parameter name</li> <li>include_in_schema: Include in OpenAPI schema (default: <code>True</code>)</li> <li>json_schema_extra: Additional JSON schema properties</li> </ul>"},{"location":"api_reference/parameters/#see-also","title":"See Also","text":"<ul> <li>Request Parameters Guide - Usage examples</li> <li>Validation Guide - Validation patterns</li> <li>Types Reference - Core type definitions</li> </ul>"},{"location":"api_reference/responses/","title":"Responses API Reference","text":"<p>API reference for response handling in FastOpenAPI.</p>"},{"location":"api_reference/responses/#response-models","title":"Response Models","text":""},{"location":"api_reference/responses/#response_model","title":"response_model","text":"<p>Specify the response model for automatic validation and serialization.</p> <pre><code>from pydantic import BaseModel\n\nclass User(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\", response_model=User)\ndef get_user(user_id: int):\n    # Return value will be validated against User model\n    return {\n        \"id\": user_id,\n        \"username\": \"john\",\n        \"email\": \"john@example.com\"\n    }\n</code></pre>"},{"location":"api_reference/responses/#response-validation","title":"Response Validation","text":"<p>When <code>response_model</code> is specified, FastOpenAPI validates the response:</p> <pre><code>class UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    # This will raise InternalServerError (500) - missing required field 'email'\n    return {\"id\": user_id, \"username\": \"john\"}\n</code></pre>"},{"location":"api_reference/responses/#response-serialization","title":"Response Serialization","text":"<p>Pydantic models are automatically serialized to JSON:</p> <pre><code>from datetime import datetime\nfrom pydantic import BaseModel\n\nclass Post(BaseModel):\n    id: int\n    title: str\n    created_at: datetime\n\n@router.get(\"/posts/{post_id}\", response_model=Post)\ndef get_post(post_id: int):\n    return Post(\n        id=post_id,\n        title=\"My Post\",\n        created_at=datetime.now()\n    )\n    # Returns:\n    # {\n    #     \"id\": 1,\n    #     \"title\": \"My Post\",\n    #     \"created_at\": \"2024-01-15T10:30:00\"\n    # }\n</code></pre>"},{"location":"api_reference/responses/#status-codes","title":"Status Codes","text":""},{"location":"api_reference/responses/#status_code","title":"status_code","text":"<p>Set the HTTP status code for the response.</p> <pre><code>@router.post(\"/items\", status_code=201)\ndef create_item(name: str):\n    # Returns HTTP 201 Created\n    return {\"name\": name}\n\n@router.delete(\"/items/{item_id}\", status_code=204)\ndef delete_item(item_id: int):\n    # Returns HTTP 204 No Content\n    # Response body is ignored for 204\n    return None\n</code></pre>"},{"location":"api_reference/responses/#common-status-codes","title":"Common Status Codes","text":"<pre><code># 200 OK (default)\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\n# 201 Created\n@router.post(\"/items\", status_code=201)\ndef create_item(item: Item):\n    return item\n\n# 204 No Content\n@router.delete(\"/items/{item_id}\", status_code=204)\ndef delete_item(item_id: int):\n    return None\n\n# 202 Accepted\n@router.post(\"/tasks\", status_code=202)\ndef create_task(task: Task):\n    # Task will be processed asynchronously\n    return {\"task_id\": task.id, \"status\": \"pending\"}\n</code></pre>"},{"location":"api_reference/responses/#custom-responses","title":"Custom Responses","text":""},{"location":"api_reference/responses/#response-class","title":"Response Class","text":"<p>Use the <code>Response</code> class for complete control over the response:</p> <pre><code>from fastopenapi import Response\n\n@router.get(\"/custom\")\ndef custom_response():\n    return Response(\n        content={\"message\": \"Success\"},\n        status_code=200,\n        headers={\n            \"X-Custom-Header\": \"value\",\n            \"X-Request-ID\": \"123456\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#binary-responses","title":"Binary Responses","text":"<pre><code>@router.get(\"/download\")\ndef download_file():\n    with open(\"document.pdf\", \"rb\") as f:\n        content = f.read()\n\n    return Response(\n        content=content,\n        status_code=200,\n        headers={\n            \"Content-Type\": \"application/pdf\",\n            \"Content-Disposition\": \"attachment; filename=document.pdf\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#text-responses","title":"Text Responses","text":"<pre><code>@router.get(\"/health\")\ndef health_check():\n    return Response(\n        content=\"OK\",\n        status_code=200,\n        headers={\"Content-Type\": \"text/plain\"}\n    )\n</code></pre>"},{"location":"api_reference/responses/#image-responses","title":"Image Responses","text":"<pre><code>@router.get(\"/images/{image_id}\")\ndef get_image(image_id: int):\n    with open(f\"images/{image_id}.jpg\", \"rb\") as f:\n        content = f.read()\n\n    return Response(\n        content=content,\n        status_code=200,\n        headers={\n            \"Content-Type\": \"image/jpeg\",\n            \"Cache-Control\": \"max-age=3600\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#tuple-responses","title":"Tuple Responses","text":"<p>FastOpenAPI supports returning tuples as a shorthand for specifying content, status code, and headers:</p> <pre><code># Return (content, status_code)\n@router.post(\"/items\")\ndef create_item(item: Item):\n    return {\"id\": 1, \"name\": item.name}, 201\n\n# Return (content, status_code, headers)\n@router.post(\"/items\")\ndef create_item_with_location(item: Item):\n    created_id = 1\n    return (\n        {\"id\": created_id, \"name\": item.name},\n        201,\n        {\"Location\": f\"/items/{created_id}\"}\n    )\n</code></pre> <p>Tuple formats:</p> Format Description <code>(content, status)</code> Content with custom status code <code>(content, status, headers)</code> Content with status code and custom headers <p>This is equivalent to using the <code>Response</code> class but more concise for simple cases.</p>"},{"location":"api_reference/responses/#response-headers","title":"Response Headers","text":""},{"location":"api_reference/responses/#custom-headers","title":"Custom Headers","text":"<pre><code>@router.get(\"/items\")\ndef list_items():\n    return Response(\n        content={\"items\": []},\n        headers={\n            \"X-Total-Count\": \"100\",\n            \"X-Page\": \"1\",\n            \"Cache-Control\": \"no-cache\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#cors-headers","title":"CORS Headers","text":"<pre><code>@router.get(\"/api/data\")\ndef get_data():\n    return Response(\n        content={\"data\": \"...\"},\n        headers={\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE\",\n            \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#cache-headers","title":"Cache Headers","text":"<pre><code>@router.get(\"/static/data\")\ndef get_static_data():\n    return Response(\n        content={\"data\": \"...\"},\n        headers={\n            \"Cache-Control\": \"public, max-age=3600\",\n            \"ETag\": \"abc123\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#response-types","title":"Response Types","text":""},{"location":"api_reference/responses/#json-response-default","title":"JSON Response (Default)","text":"<pre><code>@router.get(\"/items\")\ndef list_items():\n    # Automatically serialized to JSON\n    return {\"items\": [1, 2, 3]}\n</code></pre>"},{"location":"api_reference/responses/#pydantic-model-response","title":"Pydantic Model Response","text":"<pre><code>class Item(BaseModel):\n    id: int\n    name: str\n\n@router.get(\"/items/{item_id}\", response_model=Item)\ndef get_item(item_id: int):\n    return Item(id=item_id, name=\"Item\")\n</code></pre>"},{"location":"api_reference/responses/#list-response","title":"List Response","text":"<pre><code>@router.get(\"/items\", response_model=list[Item])\ndef list_items():\n    return [\n        Item(id=1, name=\"Item 1\"),\n        Item(id=2, name=\"Item 2\"),\n    ]\n</code></pre>"},{"location":"api_reference/responses/#dictionary-response","title":"Dictionary Response","text":"<pre><code>@router.get(\"/stats\")\ndef get_stats():\n    return {\n        \"total_users\": 100,\n        \"active_users\": 80,\n        \"new_today\": 5\n    }\n</code></pre>"},{"location":"api_reference/responses/#none-response-204","title":"None Response (204)","text":"<pre><code>@router.delete(\"/items/{item_id}\", status_code=204)\ndef delete_item(item_id: int):\n    # Delete the item...\n    return None  # No content\n</code></pre>"},{"location":"api_reference/responses/#response-examples","title":"Response Examples","text":""},{"location":"api_reference/responses/#pagination-response","title":"Pagination Response","text":"<pre><code>from pydantic import BaseModel\n\nclass PaginatedResponse(BaseModel):\n    items: list[Item]\n    total: int\n    page: int\n    per_page: int\n    total_pages: int\n\n@router.get(\"/items\", response_model=PaginatedResponse)\ndef list_items(page: int = Query(1), per_page: int = Query(10)):\n    items = get_items_from_db(page, per_page)\n    total = get_total_count()\n\n    return {\n        \"items\": items,\n        \"total\": total,\n        \"page\": page,\n        \"per_page\": per_page,\n        \"total_pages\": (total + per_page - 1) // per_page\n    }\n</code></pre>"},{"location":"api_reference/responses/#error-response","title":"Error Response","text":"<pre><code>from fastopenapi.errors import APIError\n\n# Errors are automatically converted to this format:\n{\n  \"error\": {\n    \"type\": \"error_type\",\n    \"message\": \"Error message\",\n    \"status\": 400,\n    \"details\": {}  # Optional\n  }\n}\n</code></pre>"},{"location":"api_reference/responses/#created-response","title":"Created Response","text":"<pre><code>@router.post(\"/items\", status_code=201)\ndef create_item(item: Item):\n    created_item = database.create(item)\n\n    return Response(\n        content=created_item,\n        status_code=201,\n        headers={\n            \"Location\": f\"/items/{created_item.id}\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/responses/#accepted-response","title":"Accepted Response","text":"<pre><code>@router.post(\"/long-running-task\", status_code=202)\ndef start_task(task_data: dict):\n    task_id = queue.enqueue(task_data)\n\n    return {\n        \"task_id\": task_id,\n        \"status\": \"pending\",\n        \"status_url\": f\"/tasks/{task_id}\"\n    }\n</code></pre>"},{"location":"api_reference/responses/#response-model-options","title":"Response Model Options","text":""},{"location":"api_reference/responses/#exclude-none-fields","title":"Exclude None Fields","text":"<pre><code>class Item(BaseModel):\n    id: int\n    name: str\n    description: str | None = None\n\n@router.get(\"/items/{item_id}\", response_model=Item)\ndef get_item(item_id: int):\n    item = Item(id=item_id, name=\"Item\", description=None)\n    return item.model_dump(exclude_none=True)\n    # Returns: {\"id\": 1, \"name\": \"Item\"}\n</code></pre>"},{"location":"api_reference/responses/#response-model-with-exclusions","title":"Response Model with Exclusions","text":"<pre><code>class UserInDB(BaseModel):\n    id: int\n    username: str\n    email: str\n    password_hash: str  # Sensitive field\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n    # password_hash excluded\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user = get_user_from_db(user_id)\n    # UserResponse automatically excludes password_hash\n    return user\n</code></pre>"},{"location":"api_reference/responses/#framework-specific-responses","title":"Framework-Specific Responses","text":"<p>FastOpenAPI also supports returning framework-native response objects:</p>"},{"location":"api_reference/responses/#flask","title":"Flask","text":"<pre><code>from flask import jsonify\n\n@router.get(\"/items\")\ndef list_items():\n    # Return Flask's response directly\n    return jsonify({\"items\": []})\n</code></pre>"},{"location":"api_reference/responses/#starlette","title":"Starlette","text":"<pre><code>from starlette.responses import JSONResponse\n\n@router.get(\"/items\")\nasync def list_items():\n    # Return Starlette's response directly\n    return JSONResponse({\"items\": []})\n</code></pre>"},{"location":"api_reference/responses/#best-practices","title":"Best Practices","text":""},{"location":"api_reference/responses/#1-always-use-response_model","title":"1. Always Use response_model","text":"<pre><code># Good - validates response\n@router.get(\"/users/{user_id}\", response_model=User)\ndef get_user(user_id: int):\n    return user\n\n# Avoid - no validation\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    return user\n</code></pre>"},{"location":"api_reference/responses/#2-use-appropriate-status-codes","title":"2. Use Appropriate Status Codes","text":"<pre><code># Good\n@router.post(\"/items\", status_code=201)\ndef create_item(item: Item):\n    return created_item\n\n# Avoid\n@router.post(\"/items\")  # Defaults to 200\ndef create_item(item: Item):\n    return created_item\n</code></pre>"},{"location":"api_reference/responses/#3-dont-return-sensitive-data","title":"3. Don't Return Sensitive Data","text":"<pre><code># Good - exclude sensitive fields\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n    # No password_hash\n\n# Avoid - exposes sensitive data\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n    password_hash: str  # Never expose this!\n</code></pre>"},{"location":"api_reference/responses/#4-use-response-models-for-documentation","title":"4. Use Response Models for Documentation","text":"<pre><code># Good - clear API documentation\n@router.get(\"/items\", response_model=list[Item])\ndef list_items():\n    return items\n\n# Avoid - unclear what's returned\n@router.get(\"/items\")\ndef list_items():\n    return items\n</code></pre>"},{"location":"api_reference/responses/#responsebuilder-internal","title":"ResponseBuilder (Internal)","text":"<p>The <code>ResponseBuilder</code> class handles response serialization internally. While you don't typically use it directly, understanding it helps explain response behavior.</p> <pre><code>from fastopenapi.response.builder import ResponseBuilder\n</code></pre>"},{"location":"api_reference/responses/#responsebuilderbuild","title":"ResponseBuilder.build()","text":"<p>Converts endpoint results to <code>Response</code> objects:</p> <pre><code>@classmethod\ndef build(cls, result: Any, meta: dict) -&gt; Response\n</code></pre> <p>Handles:</p> <ul> <li>Regular values (dict, list, primitives)</li> <li>Pydantic models (serialized with <code>model_dump(by_alias=True, mode=\"json\")</code>)</li> <li>Tuple responses <code>(content, status)</code> or <code>(content, status, headers)</code></li> <li>Response objects (returned as-is)</li> </ul>"},{"location":"api_reference/responses/#serialization-details","title":"Serialization Details","text":"<p>Pydantic models are serialized with these options:</p> <ul> <li><code>by_alias=True</code> - Uses field aliases in output</li> <li><code>mode=\"json\"</code> - Ensures JSON-compatible types (dates become strings, etc.)</li> </ul> <pre><code>class User(BaseModel):\n    user_id: int = Field(alias=\"userId\")\n    created_at: datetime\n\n@router.get(\"/user\")\ndef get_user():\n    return User(user_id=1, created_at=datetime.now())\n    # Output: {\"userId\": 1, \"created_at\": \"2024-01-15T10:30:00\"}\n</code></pre>"},{"location":"api_reference/responses/#see-also","title":"See Also","text":"<ul> <li>Response Handling Guide - Response patterns</li> <li>Types Reference - Response class details</li> <li>Errors Reference - Error responses</li> <li>Validation Guide - Response validation</li> </ul>"},{"location":"api_reference/routers/","title":"Routers API Reference","text":"<p>API reference for router classes in FastOpenAPI.</p>"},{"location":"api_reference/routers/#router-classes","title":"Router Classes","text":"<p>FastOpenAPI provides router classes for each supported framework:</p> <ul> <li><code>AioHttpRouter</code> - for aiohttp (async)</li> <li><code>DjangoRouter</code> - for Django (sync)</li> <li><code>DjangoAsyncRouter</code> - for Django (async)</li> <li><code>FalconRouter</code> - for Falcon (sync)</li> <li><code>FalconAsyncRouter</code> - for Falcon (async)</li> <li><code>FlaskRouter</code> - for Flask (sync)</li> <li><code>QuartRouter</code> - for Quart (async)</li> <li><code>SanicRouter</code> - for Sanic (async)</li> <li><code>StarletteRouter</code> - for Starlette (async)</li> <li><code>TornadoRouter</code> - for Tornado (async/sync)</li> </ul>"},{"location":"api_reference/routers/#baserouter","title":"BaseRouter","text":"<p>All framework routers inherit from <code>BaseRouter</code>.</p>"},{"location":"api_reference/routers/#constructor","title":"Constructor","text":"<pre><code>def __init__(\n    self,\n    app: Any = None,\n    docs_url: str | None = \"/docs\",\n    redoc_url: str | None = \"/redoc\",\n    openapi_url: str | None = \"/openapi.json\",\n    openapi_version: str = \"3.0.0\",\n    title: str = \"My App\",\n    version: str = \"0.1.0\",\n    description: str = \"API documentation\",\n    security_scheme: SecuritySchemeType | None = SecuritySchemeType.BEARER_JWT,\n)\n</code></pre>"},{"location":"api_reference/routers/#parameters","title":"Parameters","text":"<ul> <li>app: Framework application instance</li> <li>docs_url: URL for Swagger UI docs (default: <code>\"/docs\"</code>)</li> <li>redoc_url: URL for ReDoc UI docs (default: <code>\"/redoc\"</code>)</li> <li>openapi_url: URL for OpenAPI JSON schema (default: <code>\"/openapi.json\"</code>)</li> </ul> <p>Note: Setting any of these to <code>None</code> disables all documentation endpoints (Swagger UI, ReDoc, and OpenAPI JSON) at once. - openapi_version: OpenAPI specification version (default: <code>\"3.0.0\"</code>) - title: API title - version: API version - description: API description - security_scheme: Security scheme for OpenAPI docs (default: Bearer JWT)</p>"},{"location":"api_reference/routers/#http-method-decorators","title":"HTTP Method Decorators","text":""},{"location":"api_reference/routers/#get","title":"get()","text":"<pre><code>@router.get(path: str, **meta)\n</code></pre> <p>Register GET endpoint.</p> <p>Parameters: - <code>path</code>: URL path (e.g., <code>/users/{user_id}</code>) - <code>**meta</code>: Optional metadata   - <code>response_model</code>: Pydantic model for response validation   - <code>status_code</code>: HTTP status code (default: 200)   - <code>tags</code>: List of tags for OpenAPI grouping   - <code>summary</code>: Short summary for OpenAPI docs   - <code>description</code>: Detailed description for OpenAPI docs   - <code>deprecated</code>: Mark as deprecated (default: <code>False</code>)</p> <p>Example: <pre><code>@router.get(\n    \"/users/{user_id}\",\n    response_model=User,\n    tags=[\"Users\"],\n    summary=\"Get user by ID\",\n    description=\"Retrieve a single user by their ID\"\n)\ndef get_user(user_id: int):\n    return {\"id\": user_id, \"username\": \"john\"}\n</code></pre></p>"},{"location":"api_reference/routers/#post","title":"post()","text":"<pre><code>@router.post(path: str, **meta)\n</code></pre> <p>Register POST endpoint (typically for creating resources).</p> <p>Example: <pre><code>@router.post(\n    \"/users\",\n    response_model=User,\n    status_code=201,\n    tags=[\"Users\"]\n)\ndef create_user(user: UserCreate):\n    return create_user_in_db(user)\n</code></pre></p>"},{"location":"api_reference/routers/#put","title":"put()","text":"<pre><code>@router.put(path: str, **meta)\n</code></pre> <p>Register PUT endpoint (typically for full updates).</p> <p>Example: <pre><code>@router.put(\"/users/{user_id}\", response_model=User)\ndef update_user(user_id: int, user: UserUpdate):\n    return update_user_in_db(user_id, user)\n</code></pre></p>"},{"location":"api_reference/routers/#patch","title":"patch()","text":"<pre><code>@router.patch(path: str, **meta)\n</code></pre> <p>Register PATCH endpoint (typically for partial updates).</p> <p>Example: <pre><code>@router.patch(\"/users/{user_id}\", response_model=User)\ndef partial_update_user(user_id: int, updates: UserPartialUpdate):\n    return patch_user_in_db(user_id, updates)\n</code></pre></p>"},{"location":"api_reference/routers/#delete","title":"delete()","text":"<pre><code>@router.delete(path: str, **meta)\n</code></pre> <p>Register DELETE endpoint.</p> <p>Example: <pre><code>@router.delete(\"/users/{user_id}\", status_code=204)\ndef delete_user(user_id: int):\n    delete_user_from_db(user_id)\n    return None\n</code></pre></p>"},{"location":"api_reference/routers/#head","title":"head()","text":"<pre><code>@router.head(path: str, **meta)\n</code></pre> <p>Register HEAD endpoint.</p>"},{"location":"api_reference/routers/#options","title":"options()","text":"<pre><code>@router.options(path: str, **meta)\n</code></pre> <p>Register OPTIONS endpoint.</p>"},{"location":"api_reference/routers/#router-properties","title":"Router Properties","text":""},{"location":"api_reference/routers/#openapi","title":"openapi","text":"<p>Get the OpenAPI schema (lazy-loaded).</p> <pre><code>schema = router.openapi\n</code></pre> <p>Returns the complete OpenAPI 3.0 schema as a dictionary.</p> <p>Example: <pre><code>from flask import Flask\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(app=app, title=\"My API\", version=\"1.0.0\")\n\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\n# Get OpenAPI schema\nschema = router.openapi\nprint(schema[\"info\"][\"title\"])  # \"My API\"\nprint(schema[\"info\"][\"version\"])  # \"1.0.0\"\n</code></pre></p>"},{"location":"api_reference/routers/#router-methods","title":"Router Methods","text":""},{"location":"api_reference/routers/#add_route","title":"add_route()","text":"<p>Manually add a route to the router.</p> <pre><code>def add_route(self, path: str, method: str, endpoint: Callable)\n</code></pre> <p>Parameters: - <code>path</code>: URL path - <code>method</code>: HTTP method (<code>\"GET\"</code>, <code>\"POST\"</code>, etc.) - <code>endpoint</code>: Handler function</p> <p>Example: <pre><code>def my_handler():\n    return {\"message\": \"Hello\"}\n\nrouter.add_route(\"/hello\", \"GET\", my_handler)\n</code></pre></p> <p>Note: Typically you use decorators instead of calling this directly.</p>"},{"location":"api_reference/routers/#include_router","title":"include_router()","text":"<p>Include routes from another router with an optional prefix.</p> <pre><code>def include_router(self, other: BaseRouter, prefix: str = \"\")\n</code></pre> <p>Parameters: - <code>other</code>: Router to include - <code>prefix</code>: URL prefix for all routes from the other router</p> <p>Example: <pre><code>from fastopenapi.routers import FlaskRouter\n\n# Main router\nmain_router = FlaskRouter(app=app)\n\n# Sub-router for users\nusers_router = FlaskRouter()\n\n@users_router.get(\"/{user_id}\")\ndef get_user(user_id: int):\n    return {\"user_id\": user_id}\n\n@users_router.post(\"/\")\ndef create_user(username: str):\n    return {\"username\": username}\n\n# Include users router with prefix\nmain_router.include_router(users_router, prefix=\"/users\")\n\n# Now available at:\n# GET /users/{user_id}\n# POST /users/\n</code></pre></p>"},{"location":"api_reference/routers/#get_routes","title":"get_routes()","text":"<p>Get all registered routes.</p> <pre><code>def get_routes(self) -&gt; list[RouteInfo]\n</code></pre> <p>Returns: List of <code>RouteInfo</code> objects containing route metadata.</p> <p>Example: <pre><code>routes = router.get_routes()\nfor route in routes:\n    print(f\"{route.method} {route.path}\")\n</code></pre></p>"},{"location":"api_reference/routers/#framework-specific-routers","title":"Framework-Specific Routers","text":""},{"location":"api_reference/routers/#flaskrouter","title":"FlaskRouter","text":"<pre><code>from flask import Flask\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"Flask API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>"},{"location":"api_reference/routers/#starletterouter","title":"StarletteRouter","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(\n    app=app,\n    title=\"Starlette API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\nasync def list_items():\n    return {\"items\": []}\n\nif __name__ == \"__main__\":\n    uvicorn.run(app)\n</code></pre>"},{"location":"api_reference/routers/#aiohttprouter","title":"AioHttpRouter","text":"<pre><code>from aiohttp import web\nfrom fastopenapi.routers import AioHttpRouter\n\napp = web.Application()\nrouter = AioHttpRouter(\n    app=app,\n    title=\"AioHTTP API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\nasync def list_items():\n    return {\"items\": []}\n\nif __name__ == \"__main__\":\n    web.run_app(app)\n</code></pre>"},{"location":"api_reference/routers/#sanicrouter","title":"SanicRouter","text":"<pre><code>from sanic import Sanic\nfrom fastopenapi.routers import SanicRouter\n\napp = Sanic(\"MyApp\")\nrouter = SanicRouter(\n    app=app,\n    title=\"Sanic API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\nasync def list_items():\n    return {\"items\": []}\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>"},{"location":"api_reference/routers/#quartrouter","title":"QuartRouter","text":"<pre><code>from quart import Quart\nfrom fastopenapi.routers import QuartRouter\n\napp = Quart(__name__)\nrouter = QuartRouter(\n    app=app,\n    title=\"Quart API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\nasync def list_items():\n    return {\"items\": []}\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>"},{"location":"api_reference/routers/#falconrouter-falconasyncrouter","title":"FalconRouter / FalconAsyncRouter","text":"<pre><code>from falcon import App\nfrom fastopenapi.routers import FalconRouter\n\napp = App()\nrouter = FalconRouter(\n    app=app,\n    title=\"Falcon API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\n# For async Falcon:\n# from fastopenapi.routers import FalconAsyncRouter\n# router = FalconAsyncRouter(app=app)\n</code></pre>"},{"location":"api_reference/routers/#djangorouter-djangoasyncrouter","title":"DjangoRouter / DjangoAsyncRouter","text":"<p>Django doesn't have a typical application object like other frameworks. Pass <code>app=True</code> to enable documentation endpoint registration (this satisfies the internal <code>app is not None</code> check):</p> <pre><code>from django.urls import path\nfrom fastopenapi.routers import DjangoRouter\n\nrouter = DjangoRouter(app=True)\n\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\nurlpatterns = [path(\"\", router.urls)]\n\n# For async Django:\n# from fastopenapi.routers import DjangoAsyncRouter\n# router = DjangoAsyncRouter(app=True)\n</code></pre>"},{"location":"api_reference/routers/#tornadorouter","title":"TornadoRouter","text":"<pre><code>import asyncio\nfrom tornado.web import Application\nfrom fastopenapi.routers import TornadoRouter\n\napp = Application()\nrouter = TornadoRouter(\n    app=app,\n    title=\"Tornado API\",\n    version=\"1.0.0\"\n)\n\n@router.get(\"/items\")\nasync def list_items():\n    return {\"items\": []}\n\nasync def main():\n    app.listen(8000)\n    await asyncio.Event().wait()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"api_reference/routers/#security-schemes","title":"Security Schemes","text":"<p>Set the security scheme for OpenAPI documentation:</p> <pre><code>from fastopenapi import SecuritySchemeType\n\n# Bearer JWT (default)\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.BEARER_JWT\n)\n\n# API Key in header\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.API_KEY_HEADER\n)\n\n# API Key in query\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.API_KEY_QUERY\n)\n\n# Basic Auth\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.BASIC_AUTH\n)\n\n# OAuth2\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.OAUTH2\n)\n\n# No security scheme\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=None\n)\n</code></pre>"},{"location":"api_reference/routers/#documentation-urls","title":"Documentation URLs","text":""},{"location":"api_reference/routers/#customizing-documentation-urls","title":"Customizing Documentation URLs","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    docs_url=\"/api/docs\",           # Swagger UI\n    redoc_url=\"/api/redoc\",         # ReDoc\n    openapi_url=\"/api/openapi.json\" # OpenAPI schema\n)\n</code></pre>"},{"location":"api_reference/routers/#disabling-documentation","title":"Disabling Documentation","text":"<p>To disable all documentation endpoints, set any URL to <code>None</code>:</p> <pre><code>router = FlaskRouter(\n    app=app,\n    docs_url=None,      # Disables all: Swagger UI, ReDoc, and OpenAPI JSON\n)\n</code></pre>"},{"location":"api_reference/routers/#route-metadata","title":"Route Metadata","text":""},{"location":"api_reference/routers/#tags","title":"Tags","text":"<p>Group endpoints in documentation:</p> <pre><code>@router.get(\"/users\", tags=[\"Users\"])\ndef list_users():\n    return []\n\n@router.get(\"/posts\", tags=[\"Posts\"])\ndef list_posts():\n    return []\n</code></pre>"},{"location":"api_reference/routers/#summary-and-description","title":"Summary and Description","text":"<pre><code>@router.get(\n    \"/users/{user_id}\",\n    summary=\"Get user by ID\",\n    description=\"Retrieve detailed information about a specific user\",\n    tags=[\"Users\"]\n)\ndef get_user(user_id: int):\n    return {\"id\": user_id}\n</code></pre>"},{"location":"api_reference/routers/#deprecated","title":"Deprecated","text":"<pre><code>@router.get(\n    \"/old-endpoint\",\n    deprecated=True,\n    description=\"This endpoint is deprecated. Use /new-endpoint instead.\"\n)\ndef old_endpoint():\n    return {\"message\": \"Deprecated\"}\n</code></pre>"},{"location":"api_reference/routers/#best-practices","title":"Best Practices","text":""},{"location":"api_reference/routers/#1-use-app-instance","title":"1. Use App Instance","text":"<pre><code># Good - pass app to router\napp = Flask(__name__)\nrouter = FlaskRouter(app=app)\n\n# Avoid - creating router without app\nrouter = FlaskRouter()\n</code></pre>"},{"location":"api_reference/routers/#2-organize-with-tags","title":"2. Organize with Tags","text":"<pre><code>@router.get(\"/users\", tags=[\"Users\"])\n@router.get(\"/posts\", tags=[\"Posts\"])\n@router.get(\"/comments\", tags=[\"Comments\"])\n</code></pre>"},{"location":"api_reference/routers/#3-use-sub-routers","title":"3. Use Sub-Routers","text":"<pre><code># users_router.py\nusers_router = FlaskRouter()\n\n@users_router.get(\"/{user_id}\")\ndef get_user(user_id: int):\n    return {\"id\": user_id}\n\n# main.py\nfrom users_router import users_router\n\nmain_router = FlaskRouter(app=app)\nmain_router.include_router(users_router, prefix=\"/users\")\n</code></pre>"},{"location":"api_reference/routers/#4-set-appropriate-metadata","title":"4. Set Appropriate Metadata","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    title=\"My Production API\",\n    version=\"2.1.0\",\n    description=\"Comprehensive API for managing resources\"\n)\n</code></pre>"},{"location":"api_reference/routers/#see-also","title":"See Also","text":"<ul> <li>Routing Guide - Routing patterns</li> <li>Framework Guides - Framework-specific guides</li> <li>OpenAPI Customization - Customizing OpenAPI docs</li> <li>Security Guide - Security configuration</li> </ul>"},{"location":"api_reference/types/","title":"Types API Reference","text":"<p>Core type definitions in FastOpenAPI.</p>"},{"location":"api_reference/types/#fileupload","title":"FileUpload","text":"<p>Framework-agnostic file upload container with unified API.</p> <pre><code>from fastopenapi import FileUpload\n</code></pre>"},{"location":"api_reference/types/#class-definition","title":"Class Definition","text":"<pre><code>class FileUpload:\n    def __init__(\n        self,\n        filename: str,\n        content_type: str | None = None,\n        size: int | None = None,\n        file: Any = None,\n    )\n</code></pre>"},{"location":"api_reference/types/#attributes","title":"Attributes","text":"<ul> <li>filename (<code>str</code>): Name of the uploaded file</li> <li>content_type (<code>str</code>): MIME type of the file (default: <code>\"application/octet-stream\"</code>)</li> <li>size (<code>int | None</code>): File size in bytes</li> <li>file (<code>Any</code>): Native framework file object (accessed via <code>.file</code> property)</li> </ul>"},{"location":"api_reference/types/#methods","title":"Methods","text":""},{"location":"api_reference/types/#read","title":"read()","text":"<p>Read entire file content synchronously.</p> <pre><code>def read() -&gt; bytes\n</code></pre> <p>Returns: File contents as bytes</p> <p>Example: <pre><code>@router.post(\"/upload\")\ndef upload(file: FileUpload = File(...)):\n    content = file.read()\n    return {\"size\": len(content)}\n</code></pre></p>"},{"location":"api_reference/types/#aread","title":"aread()","text":"<p>Read entire file content asynchronously.</p> <pre><code>async def aread() -&gt; bytes\n</code></pre> <p>Returns: File contents as bytes</p> <p>Example: <pre><code>@router.post(\"/upload\")\nasync def upload(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\"size\": len(content)}\n</code></pre></p>"},{"location":"api_reference/types/#usage-example","title":"Usage Example","text":"<pre><code>from fastopenapi import File, FileUpload\nfrom fastopenapi.routers import FlaskRouter\n\nrouter = FlaskRouter()\n\n@router.post(\"/upload\")\ndef upload_file(\n    file: FileUpload = File(..., description=\"File to upload\")\n):\n    # Access file metadata\n    print(f\"Filename: {file.filename}\")\n    print(f\"Content-Type: {file.content_type}\")\n    print(f\"Size: {file.size} bytes\")\n\n    # Read file content\n    content = file.read()\n\n    # Process the file...\n\n    return {\n        \"filename\": file.filename,\n        \"size\": file.size,\n        \"content_type\": file.content_type\n    }\n</code></pre>"},{"location":"api_reference/types/#async-example","title":"Async Example","text":"<pre><code>from fastopenapi.routers import StarletteRouter\n\nrouter = StarletteRouter()\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n\n    # Save to disk\n    with open(f\"uploads/{file.filename}\", \"wb\") as f:\n        f.write(content)\n\n    return {\"filename\": file.filename, \"size\": len(content)}\n</code></pre>"},{"location":"api_reference/types/#response","title":"Response","text":"<p>Custom response with headers and status code control.</p> <pre><code>from fastopenapi import Response\n</code></pre>"},{"location":"api_reference/types/#class-definition_1","title":"Class Definition","text":"<pre><code>class Response:\n    def __init__(\n        self,\n        content: Any,\n        status_code: int = 200,\n        headers: dict[str, str] | None = None,\n    )\n</code></pre>"},{"location":"api_reference/types/#attributes_1","title":"Attributes","text":"<ul> <li>content (<code>Any</code>): Response body (can be dict, list, str, bytes, Pydantic model)</li> <li>status_code (<code>int</code>): HTTP status code (default: <code>200</code>)</li> <li>headers (<code>dict[str, str]</code>): HTTP response headers</li> </ul>"},{"location":"api_reference/types/#usage-example_1","title":"Usage Example","text":"<pre><code>from fastopenapi import Response\n\n@router.get(\"/custom\")\ndef custom_response():\n    return Response(\n        content={\"message\": \"Success\"},\n        status_code=201,\n        headers={\n            \"X-Custom-Header\": \"value\",\n            \"X-Request-ID\": \"123\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/types/#binary-response","title":"Binary Response","text":"<pre><code>@router.get(\"/download\")\ndef download_file():\n    with open(\"document.pdf\", \"rb\") as f:\n        content = f.read()\n\n    return Response(\n        content=content,\n        status_code=200,\n        headers={\n            \"Content-Type\": \"application/pdf\",\n            \"Content-Disposition\": \"attachment; filename=document.pdf\"\n        }\n    )\n</code></pre>"},{"location":"api_reference/types/#text-response","title":"Text Response","text":"<pre><code>@router.get(\"/health\")\ndef health_check():\n    return Response(\n        content=\"OK\",\n        status_code=200,\n        headers={\"Content-Type\": \"text/plain\"}\n    )\n</code></pre>"},{"location":"api_reference/types/#custom-status-codes","title":"Custom Status Codes","text":"<pre><code>@router.post(\"/items\")\ndef create_item(item: Item):\n    # Create item in database...\n\n    return Response(\n        content=item,\n        status_code=201,  # Created\n        headers={\"Location\": f\"/items/{item.id}\"}\n    )\n\n@router.delete(\"/items/{item_id}\")\ndef delete_item(item_id: int):\n    # Delete item...\n\n    return Response(\n        content=None,\n        status_code=204  # No Content\n    )\n</code></pre>"},{"location":"api_reference/types/#requestdata","title":"RequestData","text":"<p>Internal unified request data container (used internally by FastOpenAPI).</p> <pre><code>class RequestData:\n    def __init__(\n        self,\n        path_params: dict[str, Any] = None,\n        query_params: dict[str, Any] = None,\n        headers: dict[str, str] = None,\n        cookies: dict[str, str] = None,\n        body: Any = None,\n        form_data: dict[str, Any] = None,\n        files: dict[str, FileUpload | list[FileUpload]] = None,\n    )\n</code></pre>"},{"location":"api_reference/types/#attributes_2","title":"Attributes","text":"<ul> <li>path_params (<code>dict[str, Any]</code>): URL path parameters</li> <li>query_params (<code>dict[str, Any]</code>): Query string parameters</li> <li>headers (<code>dict[str, str]</code>): HTTP headers</li> <li>cookies (<code>dict[str, str]</code>): HTTP cookies</li> <li>body (<code>Any</code>): Parsed JSON body</li> <li>form_data (<code>dict[str, Any]</code>): Form data</li> <li>files (<code>dict[str, FileUpload | list[FileUpload]]</code>): Uploaded files</li> </ul> <p>Note: This class is used internally by FastOpenAPI for request data extraction. You typically don't need to use it directly in your application code.</p>"},{"location":"api_reference/types/#common-type-patterns","title":"Common Type Patterns","text":""},{"location":"api_reference/types/#optional-values","title":"Optional Values","text":"<pre><code>from typing import Optional\n\n@router.get(\"/items\")\ndef get_item(\n    item_id: int,\n    include_details: Optional[bool] = Query(None)\n):\n    # include_details can be None, True, or False\n    return {\"item_id\": item_id}\n</code></pre>"},{"location":"api_reference/types/#lists","title":"Lists","text":"<pre><code>@router.get(\"/items\")\ndef filter_items(\n    tags: list[str] = Query([]),\n    categories: list[int] = Query([])\n):\n    return {\"tags\": tags, \"categories\": categories}\n</code></pre>"},{"location":"api_reference/types/#union-types","title":"Union Types","text":"<pre><code>from typing import Union\n\n@router.get(\"/search\")\ndef search(\n    query: Union[str, int] = Query(...)\n):\n    # query can be either string or int\n    return {\"query\": query, \"type\": type(query).__name__}\n</code></pre>"},{"location":"api_reference/types/#pydantic-models","title":"Pydantic Models","text":"<pre><code>from pydantic import BaseModel\n\nclass User(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.post(\"/users\")\ndef create_user(user: User = Body(...)):\n    return user\n\n@router.get(\"/users/{user_id}\", response_model=User)\ndef get_user(user_id: int) -&gt; User:\n    return User(id=user_id, username=\"john\", email=\"john@example.com\")\n</code></pre>"},{"location":"api_reference/types/#type-validation","title":"Type Validation","text":"<p>FastOpenAPI uses Pydantic for type validation:</p>"},{"location":"api_reference/types/#automatic-conversion","title":"Automatic Conversion","text":"<pre><code>@router.get(\"/items\")\ndef get_item(\n    item_id: int = Query(...),  # \"123\" \ufffd 123\n    price: float = Query(...),  # \"19.99\" \ufffd 19.99\n    active: bool = Query(...)   # \"true\" \ufffd True\n):\n    return {\n        \"item_id\": item_id,      # int\n        \"price\": price,          # float\n        \"active\": active         # bool\n    }\n</code></pre>"},{"location":"api_reference/types/#complex-types","title":"Complex Types","text":"<pre><code>from datetime import date, datetime\nfrom decimal import Decimal\nfrom uuid import UUID\n\n@router.get(\"/events\")\ndef get_events(\n    start_date: date = Query(...),              # \"2024-01-01\"\n    created_after: datetime = Query(...),       # \"2024-01-01T10:00:00\"\n    event_id: UUID = Query(...),                # \"550e8400-e29b-41d4-a716-446655440000\"\n    price: Decimal = Query(...)                 # \"19.99\"\n):\n    return {\n        \"start_date\": start_date.isoformat(),\n        \"created_after\": created_after.isoformat(),\n        \"event_id\": str(event_id),\n        \"price\": str(price)\n    }\n</code></pre>"},{"location":"api_reference/types/#custom-validators","title":"Custom Validators","text":"<pre><code>from pydantic import BaseModel, field_validator\n\nclass CreateUser(BaseModel):\n    username: str\n    email: str\n    age: int\n\n    @field_validator('username')\n    @classmethod\n    def username_alphanumeric(cls, v):\n        if not v.isalnum():\n            raise ValueError('Username must be alphanumeric')\n        return v\n\n    @field_validator('age')\n    @classmethod\n    def age_must_be_positive(cls, v):\n        if v &lt; 0:\n            raise ValueError('Age must be positive')\n        return v\n\n@router.post(\"/users\")\ndef create_user(user: CreateUser):\n    return user\n</code></pre>"},{"location":"api_reference/types/#see-also","title":"See Also","text":"<ul> <li>Response Handling Guide - Working with responses</li> <li>Request Body Guide - Working with request bodies</li> <li>File Upload Example - File upload examples</li> <li>Parameters Reference - Parameter types</li> </ul>"},{"location":"community/changelog/","title":"Changelog","text":"<p>All notable changes to FastOpenAPI are documented in this file.</p> <p>FastOpenAPI follows the Keep a Changelog format.</p>"},{"location":"community/changelog/#100b1-unreleased","title":"[1.0.0b1] - Unreleased","text":""},{"location":"community/changelog/#added","title":"Added","text":"<ul> <li>Dependency Injection system with <code>Depends</code> and <code>Security</code> for automatic dependency resolution</li> <li>Request-scoped caching (same dependency called multiple times returns cached result)</li> <li>Circular dependency detection</li> <li><code>SecurityScopes</code> injection for OAuth2 scope validation</li> <li>Generator/yield dependencies with proper cleanup (sync and async)</li> <li>FastAPI-style parameter classes: <code>Query</code>, <code>Path</code>, <code>Header</code>, <code>Cookie</code>, <code>Body</code>, <code>Form</code>, <code>File</code></li> <li>Full Pydantic v2 validation: <code>gt</code>, <code>ge</code>, <code>lt</code>, <code>le</code>, <code>min_length</code>, <code>max_length</code>, <code>pattern</code>, <code>multiple_of</code>, <code>strict</code>, etc.</li> <li>Parameter metadata: <code>description</code>, <code>title</code>, <code>example</code>, <code>examples</code>, <code>deprecated</code></li> <li>Alias support for headers and query parameters</li> <li>Django support with <code>DjangoRouter</code> (sync) and <code>DjangoAsyncRouter</code> (async), including <code>urls</code> property for Django URL patterns</li> <li>Falcon async support with <code>FalconAsyncRouter</code> (in addition to existing sync <code>FalconRouter</code>)</li> <li><code>FileUpload</code> class for framework-agnostic file handling with <code>.read()</code> and <code>.aread()</code> methods</li> <li>Form data and file upload extraction for all frameworks</li> <li><code>RequestData</code> unified container for request data across all frameworks</li> <li><code>Response</code> class for custom responses with headers and status codes</li> <li>Response model validation via <code>TypeAdapter</code> with thread-safe caching</li> <li>Standardized error hierarchy: <code>APIError</code>, <code>BadRequestError</code>, <code>ValidationError</code> (422), <code>AuthenticationError</code>, <code>AuthorizationError</code>, <code>ResourceNotFoundError</code>, <code>ResourceConflictError</code>, <code>InternalServerError</code>, <code>ServiceUnavailableError</code>, <code>DependencyError</code>, <code>CircularDependencyError</code>, <code>SecurityError</code></li> <li><code>APIError.from_exception()</code> for converting any exception to standardized JSON format</li> <li><code>EXCEPTION_MAPPER</code> on routers for framework-specific exception conversion (e.g., Django's <code>PermissionDenied</code> \u2192 <code>AuthorizationError</code>)</li> <li>Built-in OpenAPI security schemes: Bearer JWT, API Key (header/query), Basic Auth, OAuth2</li> <li>Custom security schemes via <code>security_scheme</code> parameter (accepts <code>SecuritySchemeType</code> enum or raw dict)</li> <li>Security scheme merging in <code>include_router()</code></li> <li><code>SecuritySchemeType</code> exported from <code>fastopenapi</code> for public use</li> <li>Documentation completely rewritten with guides, API reference, framework-specific pages, and examples</li> </ul>"},{"location":"community/changelog/#changed","title":"Changed","text":"<ul> <li>Complete architecture refactor from monolithic <code>base_router.py</code> to composition-based modular design:</li> <li><code>core/</code> \u2014 <code>BaseRouter</code>, parameter classes, dependency resolver, types, constants</li> <li><code>resolution/</code> \u2014 <code>ParameterResolver</code> (extracted from <code>BaseRouter.resolve_endpoint_params()</code>)</li> <li><code>response/</code> \u2014 <code>ResponseBuilder</code> (extracted from <code>BaseRouter._serialize_response()</code>)</li> <li><code>openapi/</code> \u2014 <code>OpenAPIGenerator</code>, <code>SchemaBuilder</code>, UI renderers (extracted from <code>BaseRouter.generate_openapi()</code>)</li> <li><code>errors/</code> \u2014 error hierarchy (extracted from <code>error_handler.py</code>)</li> <li><code>routers/</code> \u2014 <code>BaseAdapter</code> + per-framework packages with separate extractors</li> <li>All framework routers now inherit from <code>BaseAdapter</code> instead of <code>BaseRouter</code></li> <li>Each framework router split into separate router and extractor modules</li> <li>Route metadata stored in <code>RouteInfo</code> class (was tuple)</li> <li>Validation errors now return HTTP 422 (was 400)</li> <li>OpenAPI <code>summary</code> resolved from route metadata or formatted endpoint name; <code>description</code> from metadata or docstring</li> <li>Improved import errors with <code>MissingRouter</code> raising <code>ImportError</code> when framework is not installed</li> <li><code>django</code> added as optional dependency extra</li> </ul>"},{"location":"community/changelog/#deprecated","title":"Deprecated","text":"<ul> <li>Importing from <code>fastopenapi.error_handler</code> module (use <code>from fastopenapi.errors import ...</code> instead)</li> </ul>"},{"location":"community/changelog/#removed","title":"Removed","text":"<ul> <li><code>BaseRouter.generate_openapi()</code> method (use <code>router.openapi</code> property)</li> <li><code>BaseRouter.resolve_endpoint_params()</code> and <code>BaseRouter._serialize_response()</code> internal methods</li> <li>Multi-language documentation (single English version retained)</li> </ul>"},{"location":"community/changelog/#070-2025-04-27","title":"[0.7.0] - 2025-04-27","text":""},{"location":"community/changelog/#changed_1","title":"Changed","text":"<ul> <li>Replaced <code>json.dumps/json.loads</code> with pydantic_core <code>to_json/from_json</code></li> <li><code>_serialize_response</code>: model list mapping now handled by Pydantic instead of manual recursion</li> </ul>"},{"location":"community/changelog/#fixed","title":"Fixed","text":"<ul> <li>Issue with parsing repeated query parameters in URL.</li> </ul>"},{"location":"community/changelog/#removed_1","title":"Removed","text":"<ul> <li>The <code>use_aliases</code> from <code>BaseRouter</code> and reverted changes from 0.6.0.</li> </ul>"},{"location":"community/changelog/#060-20250416","title":"[0.6.0] \u2013 2025\u201104\u201116","text":""},{"location":"community/changelog/#added_1","title":"Added","text":"<ul> <li>The <code>use_aliases</code> parameter was added to the <code>BaseRouter</code> constructor. Default is <code>True</code>. To preserve the previous behavior (without using aliases from Pydantic), set <code>use_aliases=False</code>. </li> </ul>"},{"location":"community/changelog/#changed_2","title":"Changed","text":"<ul> <li>The <code>_serialize_response method</code> is now an instance method (was a <code>@staticmethod</code>) \u2014 to support <code>use_aliases</code>.</li> <li>The <code>_get_model_schema</code> method was temporarily changed from a <code>@classmethod</code> to a regular method \u2014 for consistent behavior with <code>use_aliases</code>.</li> </ul>"},{"location":"community/changelog/#deprecated_1","title":"Deprecated","text":"<ul> <li><code>use_aliases</code> is deprecated and will be removed in version 0.7.0.</li> </ul>"},{"location":"community/changelog/#050-2025-04-13","title":"[0.5.0] - 2025-04-13","text":""},{"location":"community/changelog/#added_2","title":"Added","text":"<ul> <li>AioHttpRouter for integration with the AIOHTTP framework (async support for AIOHTTP).</li> <li>Class-level cache for model schemas to improve performance (avoids regenerating JSON Schema for the same Pydantic model repeatedly).</li> <li><code>response_errors</code> parameter for route decorators to document error responses in OpenAPI.</li> <li><code>error_handler</code> module for standard error responses (provides exceptions like <code>BadRequestError</code>, <code>ResourceNotFoundError</code>, etc., as described in documentation).</li> <li>Support for using basic Python types (<code>int</code>, <code>float</code>, <code>bool</code>, <code>str</code>) as <code>response_model</code> (for simple responses).</li> </ul>"},{"location":"community/changelog/#040-2025-03-20","title":"[0.4.0] - 2025-03-20","text":""},{"location":"community/changelog/#added_3","title":"Added","text":"<ul> <li>ReDoc UI support. A ReDoc documentation interface is now served at the default URL (e.g., <code>/redoc</code>).</li> <li>TornadoRouter for integration with the Tornado framework.</li> </ul>"},{"location":"community/changelog/#changed_3","title":"Changed","text":"<ul> <li>Revised and updated all tests to improve coverage and reliability.</li> </ul>"},{"location":"community/changelog/#fixed_1","title":"Fixed","text":"<ul> <li>Status code for internal error responses: changed from 422 to 500 for unhandled exceptions, providing a more appropriate HTTP status for server errors.</li> </ul>"},{"location":"community/changelog/#removed_2","title":"Removed","text":"<ul> <li>Removed the <code>add_docs_route</code> and <code>add_openapi_route</code> methods from <code>BaseRouter</code>. Documentation routes are now added by default, so these manual methods are no longer needed.</li> </ul>"},{"location":"community/changelog/#031-2025-03-15","title":"[0.3.1] - 2025-03-15","text":""},{"location":"community/changelog/#fixed_2","title":"Fixed","text":"<ul> <li>Fixed import issue for routers when a framework is not installed. (Guarded against <code>ModuleNotFoundError</code> if an extra was not installed and its router was imported.)</li> </ul>"},{"location":"community/changelog/#030-2025-03-15","title":"[0.3.0] - 2025-03-15","text":""},{"location":"community/changelog/#added_4","title":"Added","text":"<ul> <li>QuartRouter for integration with the Quart framework (async Flask-like framework).</li> <li>Initial documentation (introduction and basic usage examples) added to repository.</li> </ul>"},{"location":"community/changelog/#changed_4","title":"Changed","text":"<ul> <li>Import syntax for routers simplified: you can now do <code>from fastopenapi.routers import YourRouter</code> (e.g., <code>FlaskRouter</code>) instead of deeper module paths.</li> </ul>"},{"location":"community/changelog/#fixed_3","title":"Fixed","text":"<ul> <li>Fixed retrieving parameters for BaseModel arguments in GET routes. Query parameters based on Pydantic models now work correctly.</li> </ul>"},{"location":"community/changelog/#021-2025-03-12","title":"[0.2.1] - 2025-03-12","text":""},{"location":"community/changelog/#fixed_4","title":"Fixed","text":"<ul> <li>Fixed an issue in internal response serialization: <code>_serialize_response</code> now correctly handles <code>BaseModel</code> instances by converting them to dict before JSON encoding (preventing a TypeError).</li> <li>Resolved a bug causing <code>DataLoader</code> to crash when processing empty datasets. (This appears to be an internal utility, possibly used for schema generation.)</li> <li>Added more tests to cover these scenarios.</li> <li>Added this <code>CHANGELOG.md</code> file to track changes.</li> </ul>"},{"location":"community/changelog/#020-2025-03-11","title":"[0.2.0] - 2025-03-11","text":""},{"location":"community/changelog/#added_5","title":"Added","text":"<ul> <li>Implemented <code>resolve_endpoint_params</code> in <code>BaseRouter</code> to systematically resolve function parameters (path, query, body) and integrate with Pydantic validation.</li> <li>Added <code>prefix</code> parameter to the <code>include_router</code> method, allowing grouping routes under a path.</li> <li>Implemented <code>status_code</code> support for responses in route decorators (could specify default status code for each endpoint).</li> </ul>"},{"location":"community/changelog/#changed_5","title":"Changed","text":"<ul> <li>Refactored all router implementations for consistency and to reduce code duplication.</li> </ul>"},{"location":"community/changelog/#removed_3","title":"Removed","text":"<ul> <li>Removed the <code>register_routes</code> method from Starlette integration (no longer needed after refactor).</li> </ul>"},{"location":"community/changelog/#010-2025-03-01","title":"[0.1.0] - 2025-03-01","text":""},{"location":"community/changelog/#added_6","title":"Added","text":"<ul> <li>Initial release of FastOpenAPI.</li> <li>Core functionality implemented:</li> <li>Base classes and structure for routers.</li> <li>Router support for Falcon, Flask, Sanic, Starlette.</li> <li>OpenAPI schema generation leveraging Pydantic v2.</li> <li>Basic validation for query and body parameters.</li> <li>Included basic documentation in README and a few examples.</li> <li>Added initial test suite covering basic route registration and schema generation.</li> </ul>"},{"location":"community/contributing/","title":"Welcome!","text":"<p>Thanks for considering contributing to FastOpenAPI \ud83c\udf89 This guide explains how to get started, make contributions, write commits, open pull requests, and run tests.</p>"},{"location":"community/contributing/#setup-running","title":"Setup &amp; Running","text":"<p>Install dependencies with:</p> <pre><code># Fork the repo on GitHub first, then:\ngit clone https://github.com/yourusername/fastopenapi.git\ncd fastopenapi\npoetry install\n</code></pre> <p>If you don't use <code>poetry</code>, you can install manually from <code>pyproject.toml</code>:</p> <pre><code>pip install -e .[dev]\n</code></pre>"},{"location":"community/contributing/#project-structure","title":"Project Structure","text":"<ul> <li><code>fastopenapi/</code> \u2014 core library</li> <li><code>examples/</code> \u2014 examples for different frameworks</li> <li><code>tests/</code> \u2014 tests for each supported framework</li> <li><code>benchmarks/</code> \u2014 performance comparisons</li> <li><code>docs/</code> \u2014 documentation in multiple languages</li> </ul>"},{"location":"community/contributing/#running-tests","title":"Running Tests","text":"<p>To run tests:</p> <pre><code>pytest\n</code></pre> <p>Tests cover both internal logic and integration with aiohttp, flask, sanic, and more.</p>"},{"location":"community/contributing/#code-style","title":"Code Style","text":"<p>This project uses:</p> <ul> <li><code>black</code> \u2014 code formatting</li> <li><code>flake8</code> \u2014 linting</li> <li><code>isort</code> \u2014 import sorting</li> <li><code>pre-commit</code> \u2014 hooks for clean code before commit</li> </ul> <p>Install pre-commit hooks:</p> <pre><code>pre-commit install\n</code></pre> <p>Run all checks manually:</p> <pre><code>pre-commit run --all-files\n</code></pre>"},{"location":"community/contributing/#git-pull-requests","title":"Git &amp; Pull Requests","text":"<ol> <li>Fork the repository</li> <li>Create a new branch: <code>feature/your-feature</code> or <code>fix/your-fix</code></li> <li>Keep commits atomic and meaningful</li> <li>Open a PR with a clear description:</li> <li>What was added/changed?</li> <li>Which frameworks were affected?</li> <li>How was it tested?</li> </ol>"},{"location":"community/contributing/#documentation","title":"Documentation","text":"<p>If your change affects public APIs or behavior, update the relevant documentation: - <code>docs/</code></p>"},{"location":"community/contributing/#feedback","title":"Feedback","text":"<p>Not sure how to implement a feature? Feel free to open an issue with your proposal. We\u2019re happy to discuss it with you!</p>"},{"location":"community/faq/","title":"FAQ (Frequently Asked Questions)","text":"<p>Below are answers to common questions about FastOpenAPI. If you have a question that isn\u2019t covered here, feel free to reach out or open an issue on GitHub.</p>"},{"location":"community/faq/#q-what-is-fastopenapi-and-how-is-it-different-from-fastapi","title":"Q: What is FastOpenAPI and how is it different from FastAPI?","text":"<p>A: FastOpenAPI is not a web framework by itself, but a library to add OpenAPI/Swagger documentation and request/response validation to existing web frameworks (Flask, AIOHTTP, etc.). FastAPI is a full web framework that integrates OpenAPI generation natively. FastOpenAPI was inspired by FastAPI\u2019s developer experience but aims to provide similar benefits for frameworks that don't have automatic docs. In short: use FastAPI if you\u2019re starting fresh and want an integrated solution; use FastOpenAPI if you already have an app in another framework or need to support multiple frameworks with one tool.</p>"},{"location":"community/faq/#q-which-web-frameworks-are-supported-by-fastopenapi","title":"Q: Which web frameworks are supported by FastOpenAPI?","text":"<p>A: Currently supported frameworks are:</p> <ul> <li>AIOHTTP (asyncio-based HTTP server/framework)</li> <li>Falcon (both ASGI and WSGI usage)</li> <li>Flask (synchronous WSGI framework)</li> <li>Quart (Flask-like async framework)</li> <li>Sanic (async Python web framework)</li> <li>Starlette (lightweight ASGI framework)</li> <li>Tornado (Python web framework and networking library)</li> <li>Django (Python web framework) These cover a wide range of popular Python frameworks. The architecture allows adding more, so future versions might include others. If you have a need for an unsupported framework, you could attempt to create a custom router (see Advanced Usage) or suggest it to the maintainers.</li> </ul>"},{"location":"community/faq/#q-what-versions-of-python-and-pydantic-are-required","title":"Q: What versions of Python and Pydantic are required?","text":"<p>A: FastOpenAPI requires Python 3.10 or above. It uses Pydantic v2 for data modeling and validation. Pydantic v2 outputs OpenAPI 3.1-compatible schemas. Ensure that your environment meets these requirements. (Pydantic v2 comes installed with FastOpenAPI by default.)</p>"},{"location":"community/faq/#q-how-do-i-handle-authentication-or-api-keys-in-documentation","title":"Q: How do I handle authentication or API keys in documentation?","text":"<p>A: FastOpenAPI provides built-in security support inspired by FastAPI (but not an exact copy of its API). You can use <code>Security(dependency_func)</code> for dependency-based authentication, <code>SecurityScopes</code> for OAuth2 scopes, and pre-defined security schemes (<code>SecuritySchemeType.BEARER_JWT</code>, <code>SecuritySchemeType.API_KEY</code>, etc.) that are automatically reflected in the OpenAPI schema. See the Security section of the guide for examples.</p>"},{"location":"community/faq/#q-the-docs-ui-swaggerredoc-isnt-showing-up-or-docs-returns-404-what-did-i-do-wrong","title":"Q: The docs UI (Swagger/ReDoc) isn't showing up or <code>/docs</code> returns 404. What did I do wrong?","text":"<p>A: Make sure you initialized the router with your app (<code>router = FrameworkRouter(app=app)</code>). If you forget to pass the <code>app</code>, the routes won't be registered. Also ensure your app is running and listening on the correct host/port. If running behind a proxy or under a sub-path, you might need to adjust where you look for <code>/docs</code>. By default, FastOpenAPI uses root paths for docs. If your app is mounted under a prefix, the docs might be at <code>/&lt;prefix&gt;/docs</code>. </p>"},{"location":"community/faq/#q-my-framework-already-has-some-docs-or-schema-generator-can-i-use-fastopenapi-alongside-it","title":"Q: My framework already has some docs or schema generator. Can I use FastOpenAPI alongside it?","text":"<p>A: If your framework has its own docs generator (like Flask-RESTx or others), it's not recommended to use two documentation generators simultaneously\u2014they might conflict or produce duplicate routes. FastOpenAPI is meant to be a standalone solution. If you choose FastOpenAPI, disable or avoid other documentation plugins for that app to prevent collisions on routes like <code>/docs</code>. If you have a specific use case to merge them, you'd likely need to do something custom.</p>"},{"location":"community/faq/#q-does-fastopenapi-support-dependency-injection-or-other-fastapi-features-background-tasks-middleware-injection-etc","title":"Q: Does FastOpenAPI support dependency injection or other FastAPI features (background tasks, middleware injection, etc.)?","text":"<p>A: Yes, FastOpenAPI provides a FastAPI-like dependency injection system (inspired by FastAPI, but not a complete replica). You can use <code>Depends(func)</code> for regular dependencies, <code>Security(func, scopes=[...])</code> for security dependencies, and <code>SecurityScopes</code> for scope injection. The DI system supports recursive resolution, request-scoped caching, circular dependency detection, async dependencies, and generator (yield) dependencies with cleanup. Background tasks and middleware injection are not provided \u2014 use your framework's built-in mechanisms for those.</p>"},{"location":"community/faq/#q-how-stable-is-fastopenapi-for-production-use","title":"Q: How stable is FastOpenAPI for production use?","text":"<p>A: FastOpenAPI is currently in beta (1.0.0b1). Core features (routing, validation, DI, security, OpenAPI generation) are in place and actively tested across 8 frameworks. You should pin a version in production to avoid unexpected breaking changes on upgrade. It's recommended to write tests around critical API functionality in your project to catch any integration issues. The core of using Pydantic for validation is robust, and generating docs is read-only for your app, so the risk is manageable if you test your API.</p>"},{"location":"community/faq/#q-how-can-i-contribute-or-report-an-issue","title":"Q: How can I contribute or report an issue?","text":"<p>A: We welcome contributions! Check out the Contributing section of this documentation for guidelines. You can open issues on the GitHub repository for bugs, feature requests, or questions. If you have code to contribute, please fork the repo and open a Pull Request. Improving documentation, adding examples, and writing tests are also great ways to help.</p>"},{"location":"community/faq/#q-are-there-any-examples-of-real-projects-using-fastopenapi","title":"Q: Are there any examples of real projects using FastOpenAPI?","text":"<p>A: The FastOpenAPI repository includes an <code>examples/</code> directory covering each framework (AIOHTTP, Flask, etc.). Those can serve as a starting point. Since the project is new, real-world usage might not be widely publicized yet, but you can search the repository issues or discussions for any references to usage. Over time, as the user base grows, we expect more community examples. If you successfully use FastOpenAPI in your project, consider sharing your experience or a link for others to learn from!</p>"},{"location":"community/faq/#q-what-openapi-version-does-fastopenapi-generate","title":"Q: What OpenAPI version does FastOpenAPI generate?","text":"<p>A: FastOpenAPI generates an OpenAPI 3.1.0 schema (because Pydantic v2\u2019s JSON Schema output is aligned with OpenAPI 3.1). This means you can use newer features of OpenAPI (like <code>oneOf</code>, <code>anyOf</code> better support, etc.). Swagger UI and ReDoc both support OpenAPI 3.1 as of their recent versions, so the docs should display correctly. If you encounter an issue with the documentation display, ensure you have a recent version of Swagger UI/ReDoc (the ones bundled with FastOpenAPI should be up to date).</p> <p>If your question wasn\u2019t answered here, please consult the other sections of this documentation. The Usage and Advanced sections cover many details. You can also look at the repository\u2019s README and issues for more insights. FastOpenAPI is community-driven, and questions or issues you bring up could help improve the project for everyone.</p>"},{"location":"examples/async_tasks/","title":"Async Tasks Example","text":"<p>This example demonstrates background task processing and asynchronous operations in FastOpenAPI.</p>"},{"location":"examples/async_tasks/#background-tasks-with-async-frameworks","title":"Background Tasks with Async Frameworks","text":""},{"location":"examples/async_tasks/#using-starlette","title":"Using Starlette","text":"<pre><code>import uvicorn\nimport asyncio\nfrom datetime import datetime\nfrom starlette.applications import Starlette\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi import Body, Depends\nfrom fastopenapi.routers import StarletteRouter\nfrom fastopenapi.errors import ResourceNotFoundError\n\napp = Starlette()\nrouter = StarletteRouter(\n    app=app,\n    title=\"Async Tasks API\",\n    version=\"1.0.0\"\n)\n\n# Task storage (in production, use database)\ntasks_db = {}\ntask_counter = 0\n\nclass EmailTask(BaseModel):\n    to: EmailStr\n    subject: str\n    body: str\n\nclass TaskStatus(BaseModel):\n    task_id: str\n    status: str\n    created_at: datetime\n    completed_at: datetime | None = None\n    result: dict | None = None\n\nasync def send_email_async(to: str, subject: str, body: str):\n    \"\"\"Simulate sending email\"\"\"\n    print(f\"Sending email to {to}: {subject}\")\n    await asyncio.sleep(5)  # Simulate slow operation\n    print(f\"Email sent to {to}\")\n    return {\"sent_to\": to, \"sent_at\": datetime.now().isoformat()}\n\nasync def process_task_async(task_id: str, email_data: dict):\n    \"\"\"Background task processor\"\"\"\n    tasks_db[task_id][\"status\"] = \"processing\"\n\n    try:\n        result = await send_email_async(\n            email_data[\"to\"],\n            email_data[\"subject\"],\n            email_data[\"body\"]\n        )\n\n        tasks_db[task_id][\"status\"] = \"completed\"\n        tasks_db[task_id][\"completed_at\"] = datetime.now()\n        tasks_db[task_id][\"result\"] = result\n    except Exception as e:\n        tasks_db[task_id][\"status\"] = \"failed\"\n        tasks_db[task_id][\"result\"] = {\"error\": str(e)}\n\n@router.post(\n    \"/tasks/send-email\",\n    response_model=dict,\n    status_code=202,\n    tags=[\"Tasks\"]\n)\nasync def create_email_task(email: EmailTask = Body(...)):\n    \"\"\"Create background email task\"\"\"\n    global task_counter\n    task_counter += 1\n    task_id = f\"task_{task_counter}\"\n\n    # Store task\n    tasks_db[task_id] = {\n        \"task_id\": task_id,\n        \"status\": \"pending\",\n        \"created_at\": datetime.now(),\n        \"completed_at\": None,\n        \"result\": None\n    }\n\n    # Start background task\n    asyncio.create_task(\n        process_task_async(task_id, email.model_dump())\n    )\n\n    return {\n        \"task_id\": task_id,\n        \"status\": \"pending\",\n        \"message\": \"Email task created\",\n        \"status_url\": f\"/tasks/{task_id}\"\n    }\n\n@router.get(\n    \"/tasks/{task_id}\",\n    response_model=TaskStatus,\n    tags=[\"Tasks\"]\n)\ndef get_task_status(task_id: str):\n    \"\"\"Get task status\"\"\"\n    if task_id not in tasks_db:\n        raise ResourceNotFoundError(f\"Task {task_id} not found\")\n\n    return tasks_db[task_id]\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"examples/async_tasks/#testing","title":"Testing","text":"<pre><code># Create email task\ncurl -X POST http://localhost:8000/tasks/send-email \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"to\": \"user@example.com\",\n    \"subject\": \"Hello\",\n    \"body\": \"This is a test email\"\n  }'\n# Returns: {\"task_id\": \"task_1\", \"status\": \"pending\", \"status_url\": \"/tasks/task_1\"}\n\n# Check task status (immediately)\ncurl http://localhost:8000/tasks/task_1\n# Returns: {\"task_id\": \"task_1\", \"status\": \"processing\", ...}\n\n# Check task status (after 5+ seconds)\ncurl http://localhost:8000/tasks/task_1\n# Returns: {\"task_id\": \"task_1\", \"status\": \"completed\", \"result\": {...}}\n</code></pre>"},{"location":"examples/async_tasks/#task-queue-with-celery","title":"Task Queue with Celery","text":"<pre><code>from celery import Celery\nfrom pydantic import BaseModel\nfrom fastopenapi import Body\nfrom fastopenapi.routers import FlaskRouter\nfrom flask import Flask\n\n# Initialize Celery\ncelery_app = Celery(\n    'tasks',\n    broker='redis://localhost:6379/0',\n    backend='redis://localhost:6379/0'\n)\n\n# Celery tasks\n@celery_app.task(name='send_email')\ndef send_email_task(to: str, subject: str, body: str):\n    \"\"\"Celery task for sending emails\"\"\"\n    import time\n    print(f\"Sending email to {to}\")\n    time.sleep(5)  # Simulate slow operation\n    print(f\"Email sent to {to}\")\n    return {\"sent_to\": to, \"subject\": subject}\n\n@celery_app.task(name='generate_report')\ndef generate_report_task(report_type: str, filters: dict):\n    \"\"\"Generate report in background\"\"\"\n    import time\n    print(f\"Generating {report_type} report...\")\n    time.sleep(10)\n    return {\n        \"report_type\": report_type,\n        \"file_url\": f\"/reports/{report_type}.pdf\"\n    }\n\n# Flask API\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"Celery Tasks API\",\n    version=\"1.0.0\"\n)\n\nclass EmailRequest(BaseModel):\n    to: str\n    subject: str\n    body: str\n\nclass ReportRequest(BaseModel):\n    report_type: str\n    filters: dict = {}\n\n@router.post(\"/tasks/send-email\", status_code=202, tags=[\"Tasks\"])\ndef create_email_task(email: EmailRequest = Body(...)):\n    \"\"\"Queue email task\"\"\"\n    task = send_email_task.delay(email.to, email.subject, email.body)\n\n    return {\n        \"task_id\": task.id,\n        \"status\": \"pending\",\n        \"status_url\": f\"/tasks/{task.id}\"\n    }\n\n@router.post(\"/tasks/generate-report\", status_code=202, tags=[\"Tasks\"])\ndef create_report_task(report: ReportRequest = Body(...)):\n    \"\"\"Queue report generation task\"\"\"\n    task = generate_report_task.delay(report.report_type, report.filters)\n\n    return {\n        \"task_id\": task.id,\n        \"status\": \"pending\",\n        \"status_url\": f\"/tasks/{task.id}\"\n    }\n\n@router.get(\"/tasks/{task_id}\", tags=[\"Tasks\"])\ndef get_task_status(task_id: str):\n    \"\"\"Get task status\"\"\"\n    from celery.result import AsyncResult\n\n    task = AsyncResult(task_id, app=celery_app)\n\n    response = {\n        \"task_id\": task_id,\n        \"status\": task.state,\n        \"result\": None\n    }\n\n    if task.state == \"SUCCESS\":\n        response[\"result\"] = task.result\n    elif task.state == \"FAILURE\":\n        response[\"error\"] = str(task.info)\n\n    return response\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/async_tasks/#async-database-operations","title":"Async Database Operations","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy import select\nfrom pydantic import BaseModel\nfrom fastopenapi import Depends\nfrom fastopenapi.routers import StarletteRouter\nfrom fastopenapi.errors import ResourceNotFoundError\n\napp = Starlette()\nrouter = StarletteRouter(app=app)\n\n# Async database setup\nengine = create_async_engine(\"sqlite+aiosqlite:///./test.db\")\nAsyncSessionLocal = sessionmaker(\n    engine, class_=AsyncSession, expire_on_commit=False\n)\n\nasync def get_async_db():\n    \"\"\"Async database session dependency\"\"\"\n    async with AsyncSessionLocal() as session:\n        yield session\n\nclass User(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users\", response_model=list[User], tags=[\"Users\"])\nasync def list_users(db: AsyncSession = Depends(get_async_db)):\n    \"\"\"List users (async database query)\"\"\"\n    result = await db.execute(select(User))\n    users = result.scalars().all()\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=User, tags=[\"Users\"])\nasync def get_user(\n    user_id: int,\n    db: AsyncSession = Depends(get_async_db)\n):\n    \"\"\"Get user by ID (async)\"\"\"\n    result = await db.execute(\n        select(User).where(User.id == user_id)\n    )\n    user = result.scalar_one_or_none()\n\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n\n    return user\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"examples/async_tasks/#parallel-async-operations","title":"Parallel Async Operations","text":"<pre><code>import asyncio\nimport httpx\nfrom starlette.applications import Starlette\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(app=app)\n\nasync def fetch_user(user_id: int):\n    \"\"\"Fetch user from external API\"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.get(f\"https://api.example.com/users/{user_id}\")\n        return response.json()\n\nasync def fetch_posts(user_id: int):\n    \"\"\"Fetch user's posts from external API\"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.get(f\"https://api.example.com/users/{user_id}/posts\")\n        return response.json()\n\nasync def fetch_comments(user_id: int):\n    \"\"\"Fetch user's comments\"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.get(f\"https://api.example.com/users/{user_id}/comments\")\n        return response.json()\n\n@router.get(\"/users/{user_id}/profile\", tags=[\"Users\"])\nasync def get_user_profile(user_id: int):\n    \"\"\"Get complete user profile (parallel async requests)\"\"\"\n\n    # Fetch all data in parallel\n    user, posts, comments = await asyncio.gather(\n        fetch_user(user_id),\n        fetch_posts(user_id),\n        fetch_comments(user_id)\n    )\n\n    return {\n        \"user\": user,\n        \"posts\": posts,\n        \"comments\": comments\n    }\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"examples/async_tasks/#streaming-responses","title":"Streaming Responses","text":"<pre><code>import asyncio\nfrom starlette.responses import StreamingResponse\nfrom fastopenapi.routers import StarletteRouter\n\nrouter = StarletteRouter()\n\nasync def generate_data():\n    \"\"\"Generate data stream\"\"\"\n    for i in range(100):\n        await asyncio.sleep(0.1)\n        yield f\"data: {i}\\n\\n\"\n\n@router.get(\"/stream\", tags=[\"Streaming\"])\nasync def stream_data():\n    \"\"\"Server-Sent Events (SSE) endpoint\"\"\"\n    return StreamingResponse(\n        generate_data(),\n        media_type=\"text/event-stream\"\n    )\n\nasync def generate_csv():\n    \"\"\"Generate CSV data stream\"\"\"\n    yield \"id,name,email\\n\"\n    for i in range(1000):\n        await asyncio.sleep(0.01)\n        yield f\"{i},User{i},user{i}@example.com\\n\"\n\n@router.get(\"/export/users.csv\", tags=[\"Export\"])\nasync def export_users():\n    \"\"\"Stream large CSV export\"\"\"\n    return StreamingResponse(\n        generate_csv(),\n        media_type=\"text/csv\",\n        headers={\"Content-Disposition\": \"attachment; filename=users.csv\"}\n    )\n</code></pre>"},{"location":"examples/async_tasks/#websocket-support","title":"WebSocket Support","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom starlette.websockets import WebSocket\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(app=app)\n\n# Active WebSocket connections\nactive_connections: list[WebSocket] = []\n\n@router.get(\"/chat\", tags=[\"WebSocket\"])\nasync def chat_info():\n    \"\"\"Get chat info\"\"\"\n    return {\n        \"active_connections\": len(active_connections),\n        \"websocket_url\": \"ws://localhost:8000/ws/chat\"\n    }\n\n# WebSocket endpoint (not handled by router, added directly to app)\n@app.websocket_route(\"/ws/chat\")\nasync def websocket_chat(websocket: WebSocket):\n    \"\"\"WebSocket chat endpoint\"\"\"\n    await websocket.accept()\n    active_connections.append(websocket)\n\n    try:\n        while True:\n            # Receive message\n            data = await websocket.receive_text()\n\n            # Broadcast to all connections\n            for connection in active_connections:\n                await connection.send_text(f\"Message: {data}\")\n    except:\n        pass\n    finally:\n        active_connections.remove(websocket)\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"examples/async_tasks/#scheduled-tasks","title":"Scheduled Tasks","text":"<pre><code>import asyncio\nfrom datetime import datetime\nfrom starlette.applications import Starlette\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(app=app)\n\n# Task scheduler\nasync def cleanup_task():\n    \"\"\"Runs every hour\"\"\"\n    while True:\n        print(f\"Running cleanup at {datetime.now()}\")\n        # Perform cleanup\n        await asyncio.sleep(3600)  # 1 hour\n\nasync def stats_update_task():\n    \"\"\"Updates stats every 5 minutes\"\"\"\n    while True:\n        print(f\"Updating stats at {datetime.now()}\")\n        # Update statistics\n        await asyncio.sleep(300)  # 5 minutes\n\n@app.on_event(\"startup\")\nasync def startup_tasks():\n    \"\"\"Start background tasks on startup\"\"\"\n    asyncio.create_task(cleanup_task())\n    asyncio.create_task(stats_update_task())\n\n@router.get(\"/health\", tags=[\"Health\"])\nasync def health_check():\n    \"\"\"Health check\"\"\"\n    return {\n        \"status\": \"healthy\",\n        \"timestamp\": datetime.now().isoformat()\n    }\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"examples/async_tasks/#rate-limiting-with-async","title":"Rate Limiting with Async","text":"<pre><code>import asyncio\nfrom datetime import datetime, timedelta\nfrom collections import defaultdict\nfrom fastopenapi import Depends, Header\nfrom fastopenapi.errors import AuthorizationError\n\nclass AsyncRateLimiter:\n    \"\"\"Async rate limiter\"\"\"\n\n    def __init__(self, max_requests: int = 100, window: int = 3600):\n        self.max_requests = max_requests\n        self.window = window\n        self.requests = defaultdict(list)\n        self.lock = asyncio.Lock()\n\n    async def check_rate_limit(self, key: str):\n        \"\"\"Check if request is within rate limit\"\"\"\n        async with self.lock:\n            now = datetime.now()\n            window_start = now - timedelta(seconds=self.window)\n\n            # Remove old requests\n            self.requests[key] = [\n                req_time for req_time in self.requests[key]\n                if req_time &gt; window_start\n            ]\n\n            # Check limit\n            if len(self.requests[key]) &gt;= self.max_requests:\n                raise AuthorizationError(\"Rate limit exceeded\")\n\n            # Add current request\n            self.requests[key].append(now)\n\nrate_limiter = AsyncRateLimiter(max_requests=100, window=3600)\n\nasync def check_rate_limit(user_id: str = Header(..., alias=\"X-User-ID\")):\n    \"\"\"Rate limit dependency\"\"\"\n    await rate_limiter.check_rate_limit(user_id)\n\n@router.get(\"/api/data\")\nasync def get_data(_: None = Depends(check_rate_limit)):\n    \"\"\"Rate-limited endpoint\"\"\"\n    return {\"data\": \"...\"}\n</code></pre>"},{"location":"examples/async_tasks/#best-practices","title":"Best Practices","text":""},{"location":"examples/async_tasks/#1-use-async-for-io-bound-operations","title":"1. Use Async for I/O-Bound Operations","text":"<pre><code># Good - async for network/database operations\n@router.get(\"/users\")\nasync def list_users(db = Depends(get_async_db)):\n    users = await db.fetch_users()\n    return users\n\n# Avoid - sync for I/O operations in async framework\n@router.get(\"/users\")\ndef list_users():\n    users = database.fetch_users()  # Blocking!\n    return users\n</code></pre>"},{"location":"examples/async_tasks/#2-background-tasks-for-long-operations","title":"2. Background Tasks for Long Operations","text":"<pre><code># Good - return immediately, process in background\n@router.post(\"/reports\", status_code=202)\nasync def create_report(report_type: str):\n    task_id = await queue_report_task(report_type)\n    return {\"task_id\": task_id, \"status\": \"pending\"}\n\n# Avoid - blocking the request\n@router.post(\"/reports\")\nasync def create_report(report_type: str):\n    report = await generate_report(report_type)  # Takes 10 minutes!\n    return report\n</code></pre>"},{"location":"examples/async_tasks/#3-use-task-status-endpoints","title":"3. Use Task Status Endpoints","text":"<pre><code># Create task endpoint\n@router.post(\"/tasks\", status_code=202)\nasync def create_task():\n    task_id = create_background_task()\n    return {\"task_id\": task_id, \"status_url\": f\"/tasks/{task_id}\"}\n\n# Status endpoint\n@router.get(\"/tasks/{task_id}\")\ndef get_task_status(task_id: str):\n    return {\"status\": \"completed\", \"result\": {...}}\n</code></pre>"},{"location":"examples/async_tasks/#4-handle-task-failures-gracefully","title":"4. Handle Task Failures Gracefully","text":"<pre><code>try:\n    result = await process_task()\n    task[\"status\"] = \"completed\"\n    task[\"result\"] = result\nexcept Exception as e:\n    task[\"status\"] = \"failed\"\n    task[\"error\"] = str(e)\n</code></pre>"},{"location":"examples/async_tasks/#5-use-proper-async-dependencies","title":"5. Use Proper Async Dependencies","text":"<pre><code># Good - async dependency\nasync def get_async_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n# Avoid - sync dependency in async framework\ndef get_db():\n    db = SessionLocal()  # Blocking!\n    yield db\n</code></pre>"},{"location":"examples/async_tasks/#see-also","title":"See Also","text":"<ul> <li>Dependencies Guide - Async dependencies</li> <li>Starlette Framework - Async framework guide</li> <li>Performance Guide - Optimization tips</li> </ul>"},{"location":"examples/authentication/","title":"Authentication Example","text":"<p>This example demonstrates different authentication strategies in FastOpenAPI.</p>"},{"location":"examples/authentication/#bearer-token-authentication","title":"Bearer Token Authentication","text":""},{"location":"examples/authentication/#basic-implementation","title":"Basic Implementation","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom datetime import datetime, timedelta\nimport secrets\nimport hashlib\nfrom fastopenapi import Header, Depends, Security\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import AuthenticationError, ResourceConflictError\n\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"Auth API\",\n    version=\"1.0.0\"\n)\n\n# In-memory storage\nusers_db = {}\nsessions_db = {}\n\n# Configuration\nSECRET_KEY = \"your-secret-key-change-in-production\"\nTOKEN_EXPIRY = timedelta(hours=24)\n\nclass UserRegister(BaseModel):\n    username: str\n    email: str\n    password: str\n\nclass UserLogin(BaseModel):\n    username: str\n    password: str\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\ndef hash_password(password: str) -&gt; str:\n    \"\"\"Hash password using SHA-256\"\"\"\n    return hashlib.sha256(password.encode()).hexdigest()\n\ndef create_session(user_id: int) -&gt; str:\n    \"\"\"Create authentication session\"\"\"\n    token = secrets.token_urlsafe(32)\n    sessions_db[token] = {\n        \"user_id\": user_id,\n        \"created_at\": datetime.now(),\n        \"expires_at\": datetime.now() + TOKEN_EXPIRY\n    }\n    return token\n\ndef get_current_user(\n    authorization: str = Header(..., alias=\"Authorization\")\n):\n    \"\"\"Dependency to get current authenticated user\"\"\"\n    if not authorization or not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    token = authorization.replace(\"Bearer \", \"\")\n    session = sessions_db.get(token)\n\n    if not session:\n        raise AuthenticationError(\"Invalid token\")\n\n    if session[\"expires_at\"] &lt; datetime.now():\n        del sessions_db[token]\n        raise AuthenticationError(\"Token expired\")\n\n    user = users_db.get(session[\"user_id\"])\n    if not user:\n        raise AuthenticationError(\"User not found\")\n\n    return user\n\n# Public endpoints\n\n@router.post(\"/auth/register\", response_model=UserResponse, status_code=201)\ndef register(user: UserRegister):\n    \"\"\"Register a new user\"\"\"\n    # Check if user exists\n    for u in users_db.values():\n        if u[\"username\"] == user.username:\n            raise ResourceConflictError(\"Username already exists\")\n        if u[\"email\"] == user.email:\n            raise ResourceConflictError(\"Email already registered\")\n\n    # Create user\n    user_id = len(users_db) + 1\n    users_db[user_id] = {\n        \"id\": user_id,\n        \"username\": user.username,\n        \"email\": user.email,\n        \"password_hash\": hash_password(user.password)\n    }\n\n    return UserResponse(\n        id=user_id,\n        username=user.username,\n        email=user.email\n    )\n\n@router.post(\"/auth/login\")\ndef login(credentials: UserLogin):\n    \"\"\"Login and get access token\"\"\"\n    # Find user\n    user = None\n    for u in users_db.values():\n        if u[\"username\"] == credentials.username:\n            user = u\n            break\n\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    # Verify password\n    if user[\"password_hash\"] != hash_password(credentials.password):\n        raise AuthenticationError(\"Invalid credentials\")\n\n    # Create session\n    token = create_session(user[\"id\"])\n\n    return {\n        \"access_token\": token,\n        \"token_type\": \"bearer\",\n        \"expires_in\": TOKEN_EXPIRY.total_seconds()\n    }\n\n@router.post(\"/auth/logout\")\ndef logout(user = Depends(get_current_user)):\n    \"\"\"Logout (invalidate current token)\"\"\"\n    # In real implementation, remove token from sessions\n    return {\"message\": \"Logged out successfully\"}\n\n# Protected endpoints\n\n@router.get(\"/users/me\", response_model=UserResponse)\ndef get_my_profile(user = Depends(get_current_user)):\n    \"\"\"Get current user profile\"\"\"\n    return UserResponse(\n        id=user[\"id\"],\n        username=user[\"username\"],\n        email=user[\"email\"]\n    )\n\n@router.get(\"/protected\")\ndef protected_endpoint(user = Depends(get_current_user)):\n    \"\"\"Example protected endpoint\"\"\"\n    return {\n        \"message\": f\"Hello, {user['username']}!\",\n        \"user_id\": user[\"id\"]\n    }\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/authentication/#testing","title":"Testing","text":"<pre><code># Register a user\ncurl -X POST http://localhost:5000/auth/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"john\", \"email\": \"john@example.com\", \"password\": \"secret123\"}'\n\n# Login\ncurl -X POST http://localhost:5000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"john\", \"password\": \"secret123\"}'\n# Returns: {\"access_token\": \"...\", \"token_type\": \"bearer\", \"expires_in\": 86400}\n\n# Access protected endpoint\ncurl http://localhost:5000/users/me \\\n  -H \"Authorization: Bearer YOUR_TOKEN_HERE\"\n\n# Logout\ncurl -X POST http://localhost:5000/auth/logout \\\n  -H \"Authorization: Bearer YOUR_TOKEN_HERE\"\n</code></pre>"},{"location":"examples/authentication/#api-key-authentication","title":"API Key Authentication","text":"<pre><code>from fastopenapi import Header\nfrom fastopenapi.errors import AuthenticationError\n\n# Valid API keys (in production, store in database)\nAPI_KEYS = {\n    \"key_abc123\": {\"user_id\": 1, \"name\": \"Service A\"},\n    \"key_xyz789\": {\"user_id\": 2, \"name\": \"Service B\"}\n}\n\ndef verify_api_key(\n    api_key: str = Header(..., alias=\"X-API-Key\")\n):\n    \"\"\"Verify API key\"\"\"\n    if api_key not in API_KEYS:\n        raise AuthenticationError(\"Invalid API key\")\n\n    return API_KEYS[api_key]\n\n@router.get(\"/api/data\")\ndef get_data(client = Depends(verify_api_key)):\n    \"\"\"Endpoint protected by API key\"\"\"\n    return {\n        \"data\": \"sensitive data\",\n        \"client\": client[\"name\"]\n    }\n</code></pre>"},{"location":"examples/authentication/#testing_1","title":"Testing","text":"<pre><code>curl http://localhost:5000/api/data \\\n  -H \"X-API-Key: key_abc123\"\n</code></pre>"},{"location":"examples/authentication/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom datetime import datetime, timedelta\nfrom fastopenapi import Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\n\ndef create_access_token(data: dict):\n    \"\"\"Create JWT token\"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    to_encode.update({\"exp\": expire})\n    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n    return encoded_jwt\n\ndef get_current_user_jwt(\n    authorization: str = Header(..., alias=\"Authorization\")\n):\n    \"\"\"Get current user from JWT token\"\"\"\n    if not authorization or not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    token = authorization.replace(\"Bearer \", \"\")\n\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        user_id = payload.get(\"sub\")\n        if user_id is None:\n            raise AuthenticationError(\"Invalid token payload\")\n    except jwt.ExpiredSignatureError:\n        raise AuthenticationError(\"Token expired\")\n    except jwt.JWTError:\n        raise AuthenticationError(\"Invalid token\")\n\n    # Get user from database\n    user = users_db.get(int(user_id))\n    if not user:\n        raise AuthenticationError(\"User not found\")\n\n    return user\n\n@router.post(\"/auth/jwt/login\")\ndef jwt_login(credentials: UserLogin):\n    \"\"\"Login with JWT\"\"\"\n    # Verify credentials (same as before)\n    user = None\n    for u in users_db.values():\n        if u[\"username\"] == credentials.username:\n            user = u\n            break\n\n    if not user or user[\"password_hash\"] != hash_password(credentials.password):\n        raise AuthenticationError(\"Invalid credentials\")\n\n    # Create JWT token\n    access_token = create_access_token({\"sub\": str(user[\"id\"])})\n\n    return {\n        \"access_token\": access_token,\n        \"token_type\": \"bearer\"\n    }\n\n@router.get(\"/jwt/protected\")\ndef jwt_protected(user = Depends(get_current_user_jwt)):\n    \"\"\"JWT protected endpoint\"\"\"\n    return {\"message\": f\"Hello, {user['username']}!\"}\n</code></pre>"},{"location":"examples/authentication/#role-based-access-control-rbac","title":"Role-Based Access Control (RBAC)","text":"<pre><code>from enum import Enum\nfrom fastopenapi.errors import AuthorizationError, ResourceNotFoundError\n\nclass UserRole(str, Enum):\n    USER = \"user\"\n    MODERATOR = \"moderator\"\n    ADMIN = \"admin\"\n\n# Add roles to users\ndef create_user_with_role(username, email, password, role=UserRole.USER):\n    user_id = len(users_db) + 1\n    users_db[user_id] = {\n        \"id\": user_id,\n        \"username\": username,\n        \"email\": email,\n        \"password_hash\": hash_password(password),\n        \"role\": role\n    }\n    return user_id\n\ndef require_role(required_role: UserRole):\n    \"\"\"Dependency factory for role-based access\"\"\"\n    def role_checker(user = Depends(get_current_user)):\n        if user[\"role\"] != required_role:\n            raise AuthorizationError(f\"Role '{required_role}' required\")\n        return user\n    return role_checker\n\ndef require_admin(user = Depends(get_current_user)):\n    \"\"\"Require admin role\"\"\"\n    if user[\"role\"] != UserRole.ADMIN:\n        raise AuthorizationError(\"Admin access required\")\n    return user\n\n@router.get(\"/admin/users\")\ndef list_all_users(admin = Depends(require_admin)):\n    \"\"\"Admin endpoint to list all users\"\"\"\n    return [\n        {\"id\": u[\"id\"], \"username\": u[\"username\"], \"role\": u[\"role\"]}\n        for u in users_db.values()\n    ]\n\n@router.delete(\"/admin/users/{user_id}\")\ndef delete_user(\n    user_id: int,\n    admin = Depends(require_admin)\n):\n    \"\"\"Admin endpoint to delete users\"\"\"\n    if user_id not in users_db:\n        raise ResourceNotFoundError(\"User not found\")\n\n    if user_id == admin[\"id\"]:\n        raise AuthorizationError(\"Cannot delete yourself\")\n\n    del users_db[user_id]\n    return {\"message\": \"User deleted\"}\n\n@router.get(\"/moderator/posts\")\ndef moderate_posts(moderator = Depends(require_role(UserRole.MODERATOR))):\n    \"\"\"Moderator endpoint\"\"\"\n    return {\"message\": \"Moderator access granted\"}\n</code></pre>"},{"location":"examples/authentication/#oauth2-with-scopes","title":"OAuth2 with Scopes","text":"<pre><code>from fastopenapi import Security, SecurityScopes\n\ndef verify_token_scopes(\n    authorization: str = Header(..., alias=\"Authorization\"),\n    security_scopes: SecurityScopes,\n):\n    \"\"\"Verify token and check scopes\"\"\"\n    if not authorization or not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    token = authorization.replace(\"Bearer \", \"\")\n\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        user_id = payload.get(\"sub\")\n        token_scopes = payload.get(\"scopes\", [])\n    except jwt.JWTError:\n        raise AuthenticationError(\"Invalid token\")\n\n    # Check if token has required scopes\n    for scope in security_scopes.scopes:\n        if scope not in token_scopes:\n            raise AuthenticationError(f\"Scope '{scope}' required\")\n\n    user = users_db.get(int(user_id))\n    if not user:\n        raise AuthenticationError(\"User not found\")\n\n    return user\n\n@router.get(\"/admin/settings\")\ndef admin_settings(\n    user = Security(verify_token_scopes, scopes=[\"admin:read\"])\n):\n    \"\"\"Requires 'admin:read' scope\"\"\"\n    return {\"settings\": \"...\"}\n\n@router.post(\"/admin/settings\")\ndef update_admin_settings(\n    settings: dict,\n    user = Security(verify_token_scopes, scopes=[\"admin:write\"])\n):\n    \"\"\"Requires 'admin:write' scope\"\"\"\n    return {\"message\": \"Settings updated\"}\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user_oauth(\n    user_id: int,\n    user = Security(verify_token_scopes, scopes=[\"users:delete\"])\n):\n    \"\"\"Requires 'users:delete' scope\"\"\"\n    return {\"message\": \"User deleted\"}\n</code></pre>"},{"location":"examples/authentication/#optional-authentication","title":"Optional Authentication","text":"<pre><code>def get_optional_user(\n    authorization: str = Header(None, alias=\"Authorization\")\n):\n    \"\"\"Get user if authenticated, None otherwise\"\"\"\n    if not authorization or not authorization.startswith(\"Bearer \"):\n        return None\n\n    try:\n        return get_current_user(authorization)\n    except:\n        return None\n\n@router.get(\"/posts\")\ndef list_posts(user = Depends(get_optional_user)):\n    \"\"\"Endpoint with optional authentication\"\"\"\n    if user:\n        # Return personalized results\n        return {\n            \"posts\": \"personalized for \" + user[\"username\"],\n            \"recommendations\": True\n        }\n    else:\n        # Return public results\n        return {\n            \"posts\": \"public posts\",\n            \"recommendations\": False\n        }\n</code></pre>"},{"location":"examples/authentication/#multi-factor-authentication-mfa","title":"Multi-Factor Authentication (MFA)","text":"<pre><code>import pyotp\n\n# Store MFA secrets in user records\ndef enable_mfa(user = Depends(get_current_user)):\n    \"\"\"Enable MFA for current user\"\"\"\n    # Generate secret\n    secret = pyotp.random_base32()\n\n    # Store secret for user\n    users_db[user[\"id\"]][\"mfa_secret\"] = secret\n\n    # Generate QR code URI\n    totp = pyotp.TOTP(secret)\n    provisioning_uri = totp.provisioning_uri(\n        name=user[\"email\"],\n        issuer_name=\"My App\"\n    )\n\n    return {\n        \"secret\": secret,\n        \"provisioning_uri\": provisioning_uri,\n        \"qr_code\": provisioning_uri  # Use QR code library to generate image\n    }\n\nclass MFAVerify(BaseModel):\n    code: str\n\n@router.post(\"/auth/mfa/verify\")\ndef verify_mfa(\n    mfa: MFAVerify,\n    user = Depends(get_current_user)\n):\n    \"\"\"Verify MFA code\"\"\"\n    if \"mfa_secret\" not in users_db[user[\"id\"]]:\n        raise AuthenticationError(\"MFA not enabled\")\n\n    secret = users_db[user[\"id\"]][\"mfa_secret\"]\n    totp = pyotp.TOTP(secret)\n\n    if not totp.verify(mfa.code):\n        raise AuthenticationError(\"Invalid MFA code\")\n\n    return {\"message\": \"MFA verified\"}\n</code></pre>"},{"location":"examples/authentication/#session-management","title":"Session Management","text":"<pre><code>from datetime import datetime\n\nclass SessionManager:\n    \"\"\"Manage user sessions\"\"\"\n\n    def __init__(self):\n        self.sessions = {}\n\n    def create_session(self, user_id: int, remember_me: bool = False):\n        \"\"\"Create new session\"\"\"\n        token = secrets.token_urlsafe(32)\n        expiry = timedelta(hours=24 if not remember_me else 720)  # 30 days\n\n        self.sessions[token] = {\n            \"user_id\": user_id,\n            \"created_at\": datetime.now(),\n            \"expires_at\": datetime.now() + expiry,\n            \"last_activity\": datetime.now()\n        }\n\n        return token\n\n    def get_session(self, token: str):\n        \"\"\"Get session if valid\"\"\"\n        session = self.sessions.get(token)\n\n        if not session:\n            return None\n\n        if session[\"expires_at\"] &lt; datetime.now():\n            del self.sessions[token]\n            return None\n\n        # Update last activity\n        session[\"last_activity\"] = datetime.now()\n\n        return session\n\n    def delete_session(self, token: str):\n        \"\"\"Delete session (logout)\"\"\"\n        if token in self.sessions:\n            del self.sessions[token]\n\n    def delete_user_sessions(self, user_id: int):\n        \"\"\"Delete all sessions for a user\"\"\"\n        to_delete = [\n            token for token, session in self.sessions.items()\n            if session[\"user_id\"] == user_id\n        ]\n\n        for token in to_delete:\n            del self.sessions[token]\n\nsession_manager = SessionManager()\n\n@router.post(\"/auth/logout-all\")\ndef logout_all_sessions(user = Depends(get_current_user)):\n    \"\"\"Logout from all devices\"\"\"\n    session_manager.delete_user_sessions(user[\"id\"])\n    return {\"message\": \"Logged out from all devices\"}\n\n@router.get(\"/auth/sessions\")\ndef list_sessions(user = Depends(get_current_user)):\n    \"\"\"List all active sessions\"\"\"\n    user_sessions = [\n        {\n            \"created_at\": session[\"created_at\"],\n            \"last_activity\": session[\"last_activity\"],\n            \"expires_at\": session[\"expires_at\"]\n        }\n        for session in session_manager.sessions.values()\n        if session[\"user_id\"] == user[\"id\"]\n    ]\n\n    return {\"sessions\": user_sessions}\n</code></pre>"},{"location":"examples/authentication/#best-practices","title":"Best Practices","text":""},{"location":"examples/authentication/#1-never-store-plain-passwords","title":"1. Never Store Plain Passwords","text":"<pre><code># Good\npassword_hash = hashlib.sha256(password.encode()).hexdigest()\n\n# Better - use bcrypt\nimport bcrypt\npassword_hash = bcrypt.hashpw(password.encode(), bcrypt.gensalt())\n</code></pre>"},{"location":"examples/authentication/#2-use-secure-token-generation","title":"2. Use Secure Token Generation","text":"<pre><code># Good\nimport secrets\ntoken = secrets.token_urlsafe(32)\n\n# Avoid\nimport random\ntoken = str(random.randint(1000, 9999))  # Not secure!\n</code></pre>"},{"location":"examples/authentication/#3-set-token-expiry","title":"3. Set Token Expiry","text":"<pre><code># Good\nexpires_at = datetime.now() + timedelta(hours=24)\n\n# Avoid\n# No expiry - tokens valid forever\n</code></pre>"},{"location":"examples/authentication/#4-validate-token-on-every-request","title":"4. Validate Token on Every Request","text":"<pre><code># Good\nif session[\"expires_at\"] &lt; datetime.now():\n    del sessions_db[token]\n    raise AuthenticationError(\"Token expired\")\n\n# Avoid\n# Not checking expiry\n</code></pre>"},{"location":"examples/authentication/#5-use-https-in-production","title":"5. Use HTTPS in Production","text":"<p>Always use HTTPS to protect tokens in transit.</p>"},{"location":"examples/authentication/#see-also","title":"See Also","text":"<ul> <li>Security Guide - Security best practices</li> <li>Dependencies Reference - Using Depends and Security</li> <li>Error Handling - Authentication errors</li> </ul>"},{"location":"examples/crud_api/","title":"CRUD API Example","text":"<p>This example demonstrates building a complete CRUD (Create, Read, Update, Delete) API for managing users using FastOpenAPI.</p>"},{"location":"examples/crud_api/#complete-example","title":"Complete Example","text":"<pre><code>import hashlib\nfrom datetime import datetime\n\nfrom flask import Flask\nfrom pydantic import BaseModel, EmailStr, Field\n\nfrom fastopenapi import Query\nfrom fastopenapi.errors import BadRequestError, ResourceNotFoundError\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\",\n    description=\"Complete CRUD API for user management\",\n)\n\n# In-memory database\nusers_db: dict[int, dict] = {}\nnext_id = 1\n\n\n# Models\nclass UserBase(BaseModel):\n    username: str = Field(..., min_length=3, max_length=50)\n    email: EmailStr\n    full_name: str | None = Field(None, max_length=100)\n    is_active: bool = True\n\n\nclass UserCreate(UserBase):\n    password: str = Field(..., min_length=8)\n\n\nclass UserUpdate(BaseModel):\n    username: str | None = Field(None, min_length=3, max_length=50)\n    email: EmailStr | None = None\n    full_name: str | None = Field(None, max_length=100)\n    password: str | None = Field(None, min_length=8)\n    is_active: bool | None = None\n\n\nclass UserResponse(UserBase):\n    id: int\n    created_at: datetime\n    updated_at: datetime\n\n\nclass UserListResponse(BaseModel):\n    users: list[UserResponse]\n    total: int\n    page: int\n    per_page: int\n    total_pages: int\n\n\nclass BulkUserCreate(BaseModel):\n    users: list[UserCreate]\n\n\nclass BulkUserDelete(BaseModel):\n    user_ids: list[int]\n\n\nclass BulkResultResponse(BaseModel):\n    success_count: int\n    success_ids: list[int]\n    error_count: int\n    errors: list[dict]\n\n\n# Helpers\ndef hash_password(password: str) -&gt; str:\n    \"\"\"Simplified hash \u2014 use bcrypt in production.\"\"\"\n    return hashlib.sha256(password.encode()).hexdigest()\n\n\ndef find_user(username: str | None = None, email: str | None = None) -&gt; dict | None:\n    for user in users_db.values():\n        if username and user[\"username\"] == username:\n            return user\n        if email and user[\"email\"] == email:\n            return user\n    return None\n\n\ndef user_response(user: dict) -&gt; dict:\n    \"\"\"Strip internal fields before returning.\"\"\"\n    return {k: v for k, v in user.items() if k != \"password_hash\"}\n\n\ndef check_unique(username: str, email: str, exclude_id: int | None = None):\n    existing = find_user(username=username)\n    if existing and existing[\"id\"] != exclude_id:\n        raise BadRequestError(f\"Username '{username}' already exists\")\n    existing = find_user(email=email)\n    if existing and existing[\"id\"] != exclude_id:\n        raise BadRequestError(f\"Email '{email}' already exists\")\n\n\n# Endpoints\n\n@router.get(\"/\", tags=[\"Root\"])\ndef root():\n    return {\n        \"message\": \"User Management API\",\n        \"version\": \"1.0.0\",\n    }\n\n\n@router.get(\"/users\", response_model=UserListResponse, tags=[\"Users\"])\ndef list_users(\n    page: int = Query(1, ge=1, description=\"Page number\"),\n    per_page: int = Query(10, ge=1, le=100, description=\"Users per page\"),\n    is_active: bool | None = Query(None, description=\"Filter by active status\"),\n    search: str | None = Query(None, description=\"Search in username or email\"),\n):\n    users = list(users_db.values())\n\n    if is_active is not None:\n        users = [u for u in users if u[\"is_active\"] == is_active]\n    if search:\n        q = search.lower()\n        users = [u for u in users if q in u[\"username\"].lower() or q in u[\"email\"].lower()]\n\n    total = len(users)\n    total_pages = (total + per_page - 1) // per_page\n    start = (page - 1) * per_page\n    page_users = users[start : start + per_page]\n\n    return {\n        \"users\": [user_response(u) for u in page_users],\n        \"total\": total,\n        \"page\": page,\n        \"per_page\": per_page,\n        \"total_pages\": total_pages,\n    }\n\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\ndef get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User with ID {user_id} not found\")\n    return user_response(user)\n\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\ndef create_user(user: UserCreate):\n    global next_id\n\n    check_unique(user.username, user.email)\n\n    now = datetime.now()\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email,\n        \"full_name\": user.full_name,\n        \"is_active\": user.is_active,\n        \"password_hash\": hash_password(user.password),\n        \"created_at\": now,\n        \"updated_at\": now,\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n\n    return user_response(new_user)\n\n\n@router.put(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\ndef replace_user(user_id: int, user: UserCreate):\n    existing = users_db.get(user_id)\n    if not existing:\n        raise ResourceNotFoundError(f\"User with ID {user_id} not found\")\n\n    check_unique(user.username, user.email, exclude_id=user_id)\n\n    updated = {\n        \"id\": user_id,\n        \"username\": user.username,\n        \"email\": user.email,\n        \"full_name\": user.full_name,\n        \"is_active\": user.is_active,\n        \"password_hash\": hash_password(user.password),\n        \"created_at\": existing[\"created_at\"],\n        \"updated_at\": datetime.now(),\n    }\n    users_db[user_id] = updated\n\n    return user_response(updated)\n\n\n@router.patch(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\ndef update_user(user_id: int, updates: UserUpdate):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User with ID {user_id} not found\")\n\n    data = updates.model_dump(exclude_unset=True)\n\n    if \"username\" in data:\n        existing = find_user(username=data[\"username\"])\n        if existing and existing[\"id\"] != user_id:\n            raise BadRequestError(f\"Username '{data['username']}' already exists\")\n\n    if \"email\" in data:\n        existing = find_user(email=data[\"email\"])\n        if existing and existing[\"id\"] != user_id:\n            raise BadRequestError(f\"Email '{data['email']}' already exists\")\n\n    if \"password\" in data:\n        data[\"password_hash\"] = hash_password(data.pop(\"password\"))\n\n    user.update(data)\n    user[\"updated_at\"] = datetime.now()\n\n    return user_response(user)\n\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\ndef delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User with ID {user_id} not found\")\n    del users_db[user_id]\n    return None\n\n\n# Bulk operations\n\n@router.post(\"/users/bulk\", response_model=BulkResultResponse, status_code=201, tags=[\"Bulk Operations\"])\ndef bulk_create_users(payload: BulkUserCreate):\n    global next_id\n    created = []\n    errors = []\n\n    for idx, user in enumerate(payload.users):\n        if find_user(username=user.username):\n            errors.append({\"index\": idx, \"error\": f\"Username '{user.username}' already exists\"})\n            continue\n        if find_user(email=user.email):\n            errors.append({\"index\": idx, \"error\": f\"Email '{user.email}' already exists\"})\n            continue\n\n        now = datetime.now()\n        users_db[next_id] = {\n            \"id\": next_id,\n            \"username\": user.username,\n            \"email\": user.email,\n            \"full_name\": user.full_name,\n            \"is_active\": user.is_active,\n            \"password_hash\": hash_password(user.password),\n            \"created_at\": now,\n            \"updated_at\": now,\n        }\n        created.append(next_id)\n        next_id += 1\n\n    return {\"success_count\": len(created), \"success_ids\": created, \"error_count\": len(errors), \"errors\": errors}\n\n\n@router.post(\"/users/bulk-delete\", response_model=BulkResultResponse, tags=[\"Bulk Operations\"])\ndef bulk_delete_users(payload: BulkUserDelete):\n    deleted = []\n    errors = []\n\n    for uid in payload.user_ids:\n        if uid in users_db:\n            del users_db[uid]\n            deleted.append(uid)\n        else:\n            errors.append({\"user_id\": uid, \"error\": \"User not found\"})\n\n    return {\"success_count\": len(deleted), \"success_ids\": deleted, \"error_count\": len(errors), \"errors\": errors}\n\n\nif __name__ == \"__main__\":\n    for name, email in [(\"alice\", \"alice@example.com\"), (\"bob\", \"bob@example.com\")]:\n        create_user(UserCreate(username=name, email=email, full_name=name.title(), password=\"password123\"))\n\n    print(\"Sample users created! Docs at http://localhost:5000/docs\")\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/crud_api/#testing-the-api","title":"Testing the API","text":""},{"location":"examples/crud_api/#list-users","title":"List Users","text":"<pre><code>curl http://localhost:5000/users\ncurl http://localhost:5000/users?page=1&amp;per_page=5\ncurl http://localhost:5000/users?is_active=true\ncurl http://localhost:5000/users?search=alice\n</code></pre>"},{"location":"examples/crud_api/#get-single-user","title":"Get Single User","text":"<pre><code>curl http://localhost:5000/users/1\n</code></pre>"},{"location":"examples/crud_api/#create-user","title":"Create User","text":"<pre><code>curl -X POST http://localhost:5000/users \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"charlie\",\n    \"email\": \"charlie@example.com\",\n    \"full_name\": \"Charlie Brown\",\n    \"password\": \"securepass123\",\n    \"is_active\": true\n  }'\n</code></pre>"},{"location":"examples/crud_api/#update-user-full","title":"Update User (Full)","text":"<pre><code>curl -X PUT http://localhost:5000/users/1 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"username\": \"alice_updated\",\n    \"email\": \"alice.new@example.com\",\n    \"full_name\": \"Alice Updated\",\n    \"password\": \"newpassword123\",\n    \"is_active\": true\n  }'\n</code></pre>"},{"location":"examples/crud_api/#update-user-partial","title":"Update User (Partial)","text":"<pre><code>curl -X PATCH http://localhost:5000/users/1 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"full_name\": \"Alice Wilson\"\n  }'\n</code></pre>"},{"location":"examples/crud_api/#delete-user","title":"Delete User","text":"<pre><code>curl -X DELETE http://localhost:5000/users/1\n</code></pre>"},{"location":"examples/crud_api/#bulk-create","title":"Bulk Create","text":"<pre><code>curl -X POST http://localhost:5000/users/bulk \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"users\": [\n      {\n        \"username\": \"user1\",\n        \"email\": \"user1@example.com\",\n        \"password\": \"password123\"\n      },\n      {\n        \"username\": \"user2\",\n        \"email\": \"user2@example.com\",\n        \"password\": \"password123\"\n      }\n    ]\n  }'\n</code></pre>"},{"location":"examples/crud_api/#bulk-delete","title":"Bulk Delete","text":"<pre><code>curl -X POST http://localhost:5000/users/bulk-delete \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"user_ids\": [1, 2, 3]}'\n</code></pre>"},{"location":"examples/crud_api/#key-concepts-demonstrated","title":"Key Concepts Demonstrated","text":"<ol> <li>Complete CRUD Operations - Create, Read, Update, Delete</li> <li>Pagination - List endpoints with page/per_page</li> <li>Filtering - Filter by active status, search by text</li> <li>Validation - Pydantic models with field constraints</li> <li>Error Handling - Proper 404 and 400 errors</li> <li>Bulk Operations - Create/delete multiple records</li> <li>Partial Updates - PATCH for updating specific fields</li> <li>Data Integrity - Username and email uniqueness checks</li> </ol>"},{"location":"examples/crud_api/#next-steps","title":"Next Steps","text":"<ul> <li>Authentication - Add user authentication</li> <li>File Uploads - Handle file uploads</li> <li>Testing - Write tests for your API</li> </ul>"},{"location":"examples/file_uploads/","title":"File Uploads Example","text":"<p>This example demonstrates how to handle file uploads in FastOpenAPI.</p>"},{"location":"examples/file_uploads/#basic-file-upload","title":"Basic File Upload","text":""},{"location":"examples/file_uploads/#single-file-upload","title":"Single File Upload","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi import File, FileUpload\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"File Upload API\",\n    version=\"1.0.0\"\n)\n\n@router.post(\n    \"/upload\",\n    tags=[\"Files\"],\n    summary=\"Upload a single file\"\n)\ndef upload_file(file: FileUpload = File(..., description=\"File to upload\")):\n    \"\"\"Upload a single file and save it to disk\"\"\"\n    # Read file content\n    content = file.read()\n\n    # Save to disk\n    filepath = f\"uploads/{file.filename}\"\n    with open(filepath, \"wb\") as f:\n        f.write(content)\n\n    return {\n        \"filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": len(content),\n        \"saved_to\": filepath\n    }\n\nif __name__ == \"__main__\":\n    import os\n    os.makedirs(\"uploads\", exist_ok=True)\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/file_uploads/#testing","title":"Testing","text":"<pre><code># Upload a file\ncurl -X POST http://localhost:5000/upload \\\n  -F \"file=@document.pdf\"\n</code></pre>"},{"location":"examples/file_uploads/#multiple-file-uploads","title":"Multiple File Uploads","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\n    \"/upload-multiple\",\n    tags=[\"Files\"],\n    summary=\"Upload multiple files\"\n)\ndef upload_multiple_files(\n    files: list[FileUpload] = File(..., description=\"Files to upload\")\n):\n    \"\"\"Upload multiple files at once\"\"\"\n    uploaded = []\n\n    for file in files:\n        content = file.read()\n        filepath = f\"uploads/{file.filename}\"\n\n        with open(filepath, \"wb\") as f:\n            f.write(content)\n\n        uploaded.append({\n            \"filename\": file.filename,\n            \"content_type\": file.content_type,\n            \"size\": len(content)\n        })\n\n    return {\n        \"uploaded_count\": len(uploaded),\n        \"files\": uploaded\n    }\n</code></pre>"},{"location":"examples/file_uploads/#testing_1","title":"Testing","text":"<pre><code># Upload multiple files\ncurl -X POST http://localhost:5000/upload-multiple \\\n  -F \"files=@file1.pdf\" \\\n  -F \"files=@file2.jpg\" \\\n  -F \"files=@file3.txt\"\n</code></pre>"},{"location":"examples/file_uploads/#file-upload-with-form-data","title":"File Upload with Form Data","text":"<pre><code>from pydantic import BaseModel\nfrom fastopenapi import File, FileUpload, Form\n\nclass DocumentMetadata(BaseModel):\n    title: str\n    description: str\n    category: str\n\n@router.post(\n    \"/upload-with-metadata\",\n    tags=[\"Files\"],\n    summary=\"Upload file with metadata\"\n)\ndef upload_with_metadata(\n    file: FileUpload = File(..., description=\"File to upload\"),\n    title: str = Form(...),\n    description: str = Form(...),\n    category: str = Form(...)\n):\n    \"\"\"Upload a file along with metadata\"\"\"\n    # Read and save file\n    content = file.read()\n    filepath = f\"uploads/{file.filename}\"\n\n    with open(filepath, \"wb\") as f:\n        f.write(content)\n\n    # Store metadata\n    metadata = {\n        \"title\": title,\n        \"description\": description,\n        \"category\": category,\n        \"filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": len(content)\n    }\n\n    return {\n        \"file\": filepath,\n        \"metadata\": metadata\n    }\n</code></pre>"},{"location":"examples/file_uploads/#testing_2","title":"Testing","text":"<pre><code>curl -X POST http://localhost:5000/upload-with-metadata \\\n  -F \"file=@document.pdf\" \\\n  -F \"title=Important Document\" \\\n  -F \"description=A very important document\" \\\n  -F \"category=legal\"\n</code></pre>"},{"location":"examples/file_uploads/#async-file-upload-starlette","title":"Async File Upload (Starlette)","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom fastopenapi import File, FileUpload\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(\n    app=app,\n    title=\"Async File Upload API\",\n    version=\"1.0.0\"\n)\n\n@router.post(\n    \"/upload\",\n    tags=[\"Files\"],\n    summary=\"Upload file (async)\"\n)\nasync def upload_file(file: FileUpload = File(...)):\n    \"\"\"Upload file asynchronously\"\"\"\n    # Read file content asynchronously\n    content = await file.aread()\n\n    # Save to disk\n    filepath = f\"uploads/{file.filename}\"\n    with open(filepath, \"wb\") as f:\n        f.write(content)\n\n    return {\n        \"filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": len(content)\n    }\n\nif __name__ == \"__main__\":\n    import os\n    os.makedirs(\"uploads\", exist_ok=True)\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"examples/file_uploads/#file-size-validation","title":"File Size Validation","text":"<pre><code>from fastopenapi.errors import BadRequestError\n\nMAX_FILE_SIZE = 10 * 1024 * 1024  # 10 MB\n\n@router.post(\"/upload-limited\", tags=[\"Files\"])\ndef upload_limited_file(file: FileUpload = File(...)):\n    \"\"\"Upload file with size validation\"\"\"\n    content = file.read()\n\n    # Check file size\n    if len(content) &gt; MAX_FILE_SIZE:\n        raise BadRequestError(\n            f\"File too large. Maximum size is {MAX_FILE_SIZE / 1024 / 1024:.1f} MB\"\n        )\n\n    # Save file\n    filepath = f\"uploads/{file.filename}\"\n    with open(filepath, \"wb\") as f:\n        f.write(content)\n\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"examples/file_uploads/#file-type-validation","title":"File Type Validation","text":"<pre><code>ALLOWED_EXTENSIONS = {\".pdf\", \".jpg\", \".jpeg\", \".png\", \".txt\"}\n\n@router.post(\"/upload-validated\", tags=[\"Files\"])\ndef upload_validated_file(file: FileUpload = File(...)):\n    \"\"\"Upload file with type validation\"\"\"\n    import os\n\n    # Get file extension\n    _, ext = os.path.splitext(file.filename)\n    ext = ext.lower()\n\n    # Validate extension\n    if ext not in ALLOWED_EXTENSIONS:\n        raise BadRequestError(\n            f\"File type not allowed. Allowed types: {', '.join(ALLOWED_EXTENSIONS)}\"\n        )\n\n    # Validate MIME type\n    allowed_mimes = {\n        \"application/pdf\",\n        \"image/jpeg\",\n        \"image/png\",\n        \"text/plain\"\n    }\n\n    if file.content_type not in allowed_mimes:\n        raise BadRequestError(\n            f\"Invalid content type: {file.content_type}\"\n        )\n\n    # Save file\n    content = file.read()\n    filepath = f\"uploads/{file.filename}\"\n\n    with open(filepath, \"wb\") as f:\n        f.write(content)\n\n    return {\n        \"filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"examples/file_uploads/#image-processing","title":"Image Processing","text":"<pre><code>from PIL import Image\nimport io\n\n@router.post(\"/upload-image\", tags=[\"Images\"])\ndef upload_image(file: FileUpload = File(...)):\n    \"\"\"Upload and process an image\"\"\"\n    # Read image\n    content = file.read()\n\n    # Validate it's an image\n    try:\n        image = Image.open(io.BytesIO(content))\n    except Exception:\n        raise BadRequestError(\"Invalid image file\")\n\n    # Get image info\n    width, height = image.size\n    format_type = image.format\n\n    # Create thumbnail\n    thumbnail = image.copy()\n    thumbnail.thumbnail((200, 200))\n\n    # Save original\n    original_path = f\"uploads/{file.filename}\"\n    with open(original_path, \"wb\") as f:\n        f.write(content)\n\n    # Save thumbnail\n    thumb_filename = f\"thumb_{file.filename}\"\n    thumb_path = f\"uploads/{thumb_filename}\"\n    thumbnail.save(thumb_path)\n\n    return {\n        \"original\": {\n            \"filename\": file.filename,\n            \"path\": original_path,\n            \"width\": width,\n            \"height\": height,\n            \"format\": format_type,\n            \"size\": len(content)\n        },\n        \"thumbnail\": {\n            \"filename\": thumb_filename,\n            \"path\": thumb_path,\n            \"width\": thumbnail.size[0],\n            \"height\": thumbnail.size[1]\n        }\n    }\n</code></pre>"},{"location":"examples/file_uploads/#csv-file-upload","title":"CSV File Upload","text":"<pre><code>import csv\nimport io\n\n@router.post(\"/upload-csv\", tags=[\"Files\"])\ndef upload_csv(file: FileUpload = File(...)):\n    \"\"\"Upload and parse CSV file\"\"\"\n    content = file.read()\n\n    # Parse CSV\n    text_content = content.decode('utf-8')\n    csv_reader = csv.DictReader(io.StringIO(text_content))\n\n    rows = list(csv_reader)\n\n    return {\n        \"filename\": file.filename,\n        \"rows_count\": len(rows),\n        \"columns\": list(rows[0].keys()) if rows else [],\n        \"sample_rows\": rows[:5]  # First 5 rows\n    }\n</code></pre>"},{"location":"examples/file_uploads/#file-download","title":"File Download","text":"<pre><code>from fastopenapi import Response\nfrom fastopenapi.errors import ResourceNotFoundError\n\n@router.get(\"/download/{filename}\", tags=[\"Files\"])\ndef download_file(filename: str):\n    \"\"\"Download a file\"\"\"\n    filepath = f\"uploads/{filename}\"\n\n    # Check if file exists\n    import os\n    if not os.path.exists(filepath):\n        raise ResourceNotFoundError(f\"File '{filename}' not found\")\n\n    # Read file\n    with open(filepath, \"rb\") as f:\n        content = f.read()\n\n    # Determine content type\n    content_types = {\n        \".pdf\": \"application/pdf\",\n        \".jpg\": \"image/jpeg\",\n        \".jpeg\": \"image/jpeg\",\n        \".png\": \"image/png\",\n        \".txt\": \"text/plain\",\n        \".csv\": \"text/csv\"\n    }\n\n    _, ext = os.path.splitext(filename)\n    content_type = content_types.get(ext.lower(), \"application/octet-stream\")\n\n    return Response(\n        content=content,\n        status_code=200,\n        headers={\n            \"Content-Type\": content_type,\n            \"Content-Disposition\": f'attachment; filename=\"{filename}\"'\n        }\n    )\n</code></pre>"},{"location":"examples/file_uploads/#complete-example-with-database","title":"Complete Example with Database","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom datetime import datetime\nfrom fastopenapi import File, FileUpload, Form, Response\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import ResourceNotFoundError, BadRequestError\nimport os\nimport uuid\n\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"File Management API\",\n    version=\"1.0.0\"\n)\n\n# In-memory database\nfiles_db = {}\n\nclass FileRecord(BaseModel):\n    id: str\n    filename: str\n    original_filename: str\n    content_type: str\n    size: int\n    uploaded_at: datetime\n    path: str\n\n@router.post(\n    \"/files\",\n    response_model=FileRecord,\n    status_code=201,\n    tags=[\"Files\"]\n)\ndef upload_file(file: FileUpload = File(...)):\n    \"\"\"Upload a file and store metadata\"\"\"\n    # Generate unique ID\n    file_id = str(uuid.uuid4())\n\n    # Read content\n    content = file.read()\n\n    # Validate size (max 10 MB)\n    if len(content) &gt; 10 * 1024 * 1024:\n        raise BadRequestError(\"File too large (max 10 MB)\")\n\n    # Save file with unique name\n    ext = os.path.splitext(file.filename)[1]\n    stored_filename = f\"{file_id}{ext}\"\n    filepath = f\"uploads/{stored_filename}\"\n\n    with open(filepath, \"wb\") as f:\n        f.write(content)\n\n    # Create record\n    record = {\n        \"id\": file_id,\n        \"filename\": stored_filename,\n        \"original_filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": len(content),\n        \"uploaded_at\": datetime.now(),\n        \"path\": filepath\n    }\n\n    files_db[file_id] = record\n\n    return record\n\n@router.get(\n    \"/files\",\n    response_model=list[FileRecord],\n    tags=[\"Files\"]\n)\ndef list_files():\n    \"\"\"List all uploaded files\"\"\"\n    return list(files_db.values())\n\n@router.get(\n    \"/files/{file_id}\",\n    response_model=FileRecord,\n    tags=[\"Files\"]\n)\ndef get_file_info(file_id: str):\n    \"\"\"Get file metadata\"\"\"\n    if file_id not in files_db:\n        raise ResourceNotFoundError(f\"File {file_id} not found\")\n\n    return files_db[file_id]\n\n@router.get(\n    \"/files/{file_id}/download\",\n    tags=[\"Files\"]\n)\ndef download_file(file_id: str):\n    \"\"\"Download a file\"\"\"\n    if file_id not in files_db:\n        raise ResourceNotFoundError(f\"File {file_id} not found\")\n\n    record = files_db[file_id]\n\n    # Read file\n    with open(record[\"path\"], \"rb\") as f:\n        content = f.read()\n\n    return Response(\n        content=content,\n        headers={\n            \"Content-Type\": record[\"content_type\"],\n            \"Content-Disposition\": f'attachment; filename=\"{record[\"original_filename\"]}\"'\n        }\n    )\n\n@router.delete(\n    \"/files/{file_id}\",\n    status_code=204,\n    tags=[\"Files\"]\n)\ndef delete_file(file_id: str):\n    \"\"\"Delete a file\"\"\"\n    if file_id not in files_db:\n        raise ResourceNotFoundError(f\"File {file_id} not found\")\n\n    record = files_db[file_id]\n\n    # Delete file from disk\n    if os.path.exists(record[\"path\"]):\n        os.remove(record[\"path\"])\n\n    # Delete from database\n    del files_db[file_id]\n\n    return None\n\nif __name__ == \"__main__\":\n    os.makedirs(\"uploads\", exist_ok=True)\n    print(\"File Management API running on http://localhost:5000\")\n    print(\"Docs at http://localhost:5000/docs\")\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/file_uploads/#testing-the-complete-api","title":"Testing the Complete API","text":"<pre><code># Upload a file\ncurl -X POST http://localhost:5000/files \\\n  -F \"file=@document.pdf\"\n# Returns: {\"id\": \"abc-123\", \"filename\": \"abc-123.pdf\", ...}\n\n# List all files\ncurl http://localhost:5000/files\n\n# Get file info\ncurl http://localhost:5000/files/abc-123\n\n# Download file\ncurl http://localhost:5000/files/abc-123/download -o downloaded.pdf\n\n# Delete file\ncurl -X DELETE http://localhost:5000/files/abc-123\n</code></pre>"},{"location":"examples/file_uploads/#best-practices","title":"Best Practices","text":""},{"location":"examples/file_uploads/#1-always-validate-file-size","title":"1. Always Validate File Size","text":"<pre><code>MAX_SIZE = 10 * 1024 * 1024  # 10 MB\n\nif len(content) &gt; MAX_SIZE:\n    raise BadRequestError(\"File too large\")\n</code></pre>"},{"location":"examples/file_uploads/#2-validate-file-types","title":"2. Validate File Types","text":"<pre><code>ALLOWED_TYPES = {\"application/pdf\", \"image/jpeg\", \"image/png\"}\n\nif file.content_type not in ALLOWED_TYPES:\n    raise BadRequestError(\"File type not allowed\")\n</code></pre>"},{"location":"examples/file_uploads/#3-use-unique-filenames","title":"3. Use Unique Filenames","text":"<pre><code>import uuid\n\nunique_filename = f\"{uuid.uuid4()}{os.path.splitext(file.filename)[1]}\"\n</code></pre>"},{"location":"examples/file_uploads/#4-store-metadata-separately","title":"4. Store Metadata Separately","text":"<pre><code># Save file metadata to database\nmetadata = {\n    \"original_filename\": file.filename,\n    \"stored_filename\": unique_filename,\n    \"content_type\": file.content_type,\n    \"size\": len(content),\n    \"uploaded_at\": datetime.now()\n}\n</code></pre>"},{"location":"examples/file_uploads/#5-handle-errors-gracefully","title":"5. Handle Errors Gracefully","text":"<pre><code>from fastopenapi.errors import InternalServerError\n\ntry:\n    content = file.read()\n    # Process file...\nexcept Exception as e:\n    raise InternalServerError(f\"Failed to process file: {str(e)}\")\n</code></pre>"},{"location":"examples/file_uploads/#see-also","title":"See Also","text":"<ul> <li>File API Reference - FileUpload class documentation</li> <li>Request Body Guide - Form data and file uploads</li> <li>Error Handling - Handling upload errors</li> </ul>"},{"location":"examples/multi_router/","title":"Multi-Router Example","text":"<p>This example demonstrates how to organize a large API using multiple routers.</p>"},{"location":"examples/multi_router/#basic-router-composition","title":"Basic Router Composition","text":""},{"location":"examples/multi_router/#creating-sub-routers","title":"Creating Sub-Routers","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import ResourceNotFoundError\n\napp = Flask(__name__)\n\n# Main router\nmain_router = FlaskRouter(\n    app=app,\n    title=\"E-Commerce API\",\n    version=\"2.0.0\",\n    description=\"Multi-router e-commerce API example\"\n)\n\n# Users sub-router\nusers_router = FlaskRouter()\n\nclass User(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@users_router.get(\"/{user_id}\", response_model=User, tags=[\"Users\"])\ndef get_user(user_id: int):\n    \"\"\"Get user by ID\"\"\"\n    return User(id=user_id, username=\"john\", email=\"john@example.com\")\n\n@users_router.get(\"/\", response_model=list[User], tags=[\"Users\"])\ndef list_users():\n    \"\"\"List all users\"\"\"\n    return [\n        User(id=1, username=\"john\", email=\"john@example.com\"),\n        User(id=2, username=\"jane\", email=\"jane@example.com\")\n    ]\n\n@users_router.post(\"/\", response_model=User, status_code=201, tags=[\"Users\"])\ndef create_user(user: User):\n    \"\"\"Create a new user\"\"\"\n    return user\n\n# Products sub-router\nproducts_router = FlaskRouter()\n\nclass Product(BaseModel):\n    id: int\n    name: str\n    price: float\n\n@products_router.get(\"/{product_id}\", response_model=Product, tags=[\"Products\"])\ndef get_product(product_id: int):\n    \"\"\"Get product by ID\"\"\"\n    return Product(id=product_id, name=\"Product\", price=99.99)\n\n@products_router.get(\"/\", response_model=list[Product], tags=[\"Products\"])\ndef list_products():\n    \"\"\"List all products\"\"\"\n    return [\n        Product(id=1, name=\"Laptop\", price=999.99),\n        Product(id=2, name=\"Mouse\", price=29.99)\n    ]\n\n# Include sub-routers with prefixes\nmain_router.include_router(users_router, prefix=\"/users\")\nmain_router.include_router(products_router, prefix=\"/products\")\n\n# Main router endpoints\n@main_router.get(\"/health\", tags=[\"Health\"])\ndef health_check():\n    \"\"\"Health check endpoint\"\"\"\n    return {\"status\": \"healthy\"}\n\nif __name__ == \"__main__\":\n    print(\"API available at:\")\n    print(\"  GET  /users - List users\")\n    print(\"  GET  /users/{id} - Get user\")\n    print(\"  POST /users - Create user\")\n    print(\"  GET  /products - List products\")\n    print(\"  GET  /products/{id} - Get product\")\n    print(\"  GET  /health - Health check\")\n    print(\"\")\n    print(\"Docs at http://localhost:5000/docs\")\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/multi_router/#modular-api-structure","title":"Modular API Structure","text":""},{"location":"examples/multi_router/#project-structure","title":"Project Structure","text":"<pre><code>my_api/\n\u001c\u0000\u0000 main.py\n\u001c\u0000\u0000 config.py\n\u001c\u0000\u0000 dependencies.py\n\u0014\u0000\u0000 routers/\n    \u001c\u0000\u0000 __init__.py\n    \u001c\u0000\u0000 users.py\n    \u001c\u0000\u0000 products.py\n    \u001c\u0000\u0000 orders.py\n    \u0014\u0000\u0000 admin.py\n</code></pre>"},{"location":"examples/multi_router/#routersuserspy","title":"routers/users.py","text":"<pre><code>from pydantic import BaseModel\nfrom fastopenapi import Query, Path, Depends\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom dependencies import get_db, get_current_user\n\nrouter = FlaskRouter()\n\nclass User(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: str\n    password: str\n\n@router.get(\"/\", response_model=list[User], tags=[\"Users\"])\ndef list_users(\n    page: int = Query(1, ge=1),\n    limit: int = Query(10, ge=1, le=100),\n    db = Depends(get_db)\n):\n    \"\"\"List users with pagination\"\"\"\n    # Fetch from database\n    users = db.query_users(page, limit)\n    return users\n\n@router.get(\"/{user_id}\", response_model=User, tags=[\"Users\"])\ndef get_user(\n    user_id: int = Path(..., ge=1),\n    db = Depends(get_db)\n):\n    \"\"\"Get user by ID\"\"\"\n    user = db.get_user(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/\", response_model=User, status_code=201, tags=[\"Users\"])\ndef create_user(\n    user: UserCreate,\n    db = Depends(get_db)\n):\n    \"\"\"Create a new user\"\"\"\n    created_user = db.create_user(user)\n    return created_user\n\n@router.delete(\"/{user_id}\", status_code=204, tags=[\"Users\"])\ndef delete_user(\n    user_id: int = Path(..., ge=1),\n    current_user = Depends(get_current_user),\n    db = Depends(get_db)\n):\n    \"\"\"Delete a user (requires authentication)\"\"\"\n    db.delete_user(user_id)\n    return None\n</code></pre>"},{"location":"examples/multi_router/#routersproductspy","title":"routers/products.py","text":"<pre><code>from pydantic import BaseModel\nfrom fastopenapi import Query, Path, Depends\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import ResourceNotFoundError, AuthorizationError\nfrom dependencies import get_db, get_current_user\n\nrouter = FlaskRouter()\n\nclass Product(BaseModel):\n    id: int\n    name: str\n    description: str\n    price: float\n    stock: int\n\nclass ProductCreate(BaseModel):\n    name: str\n    description: str\n    price: float\n    stock: int\n\n@router.get(\"/\", response_model=list[Product], tags=[\"Products\"])\ndef list_products(\n    category: str = Query(None),\n    min_price: float = Query(None, ge=0),\n    max_price: float = Query(None, ge=0),\n    db = Depends(get_db)\n):\n    \"\"\"List products with filters\"\"\"\n    products = db.query_products(\n        category=category,\n        min_price=min_price,\n        max_price=max_price\n    )\n    return products\n\n@router.get(\"/{product_id}\", response_model=Product, tags=[\"Products\"])\ndef get_product(\n    product_id: int = Path(..., ge=1),\n    db = Depends(get_db)\n):\n    \"\"\"Get product by ID\"\"\"\n    product = db.get_product(product_id)\n    if not product:\n        raise ResourceNotFoundError(f\"Product {product_id} not found\")\n    return product\n\n@router.post(\"/\", response_model=Product, status_code=201, tags=[\"Products\"])\ndef create_product(\n    product: ProductCreate,\n    current_user = Depends(get_current_user),\n    db = Depends(get_db)\n):\n    \"\"\"Create a new product (admin only)\"\"\"\n    # Check if user is admin\n    if not current_user.is_admin:\n        raise AuthorizationError(\"Admin access required\")\n\n    created_product = db.create_product(product)\n    return created_product\n</code></pre>"},{"location":"examples/multi_router/#routersorderspy","title":"routers/orders.py","text":"<pre><code>from pydantic import BaseModel\nfrom datetime import datetime\nfrom fastopenapi import Path, Depends\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import ResourceNotFoundError, AuthorizationError\nfrom dependencies import get_db, get_current_user\n\nrouter = FlaskRouter()\n\nclass OrderItem(BaseModel):\n    product_id: int\n    quantity: int\n    price: float\n\nclass Order(BaseModel):\n    id: int\n    user_id: int\n    items: list[OrderItem]\n    total: float\n    status: str\n    created_at: datetime\n\nclass OrderCreate(BaseModel):\n    items: list[OrderItem]\n\n@router.get(\"/\", response_model=list[Order], tags=[\"Orders\"])\ndef list_my_orders(\n    current_user = Depends(get_current_user),\n    db = Depends(get_db)\n):\n    \"\"\"List current user's orders\"\"\"\n    orders = db.get_user_orders(current_user.id)\n    return orders\n\n@router.get(\"/{order_id}\", response_model=Order, tags=[\"Orders\"])\ndef get_order(\n    order_id: int = Path(..., ge=1),\n    current_user = Depends(get_current_user),\n    db = Depends(get_db)\n):\n    \"\"\"Get order by ID\"\"\"\n    order = db.get_order(order_id)\n\n    if not order:\n        raise ResourceNotFoundError(f\"Order {order_id} not found\")\n\n    # Verify ownership\n    if order.user_id != current_user.id:\n        raise AuthorizationError(\"You can only view your own orders\")\n\n    return order\n\n@router.post(\"/\", response_model=Order, status_code=201, tags=[\"Orders\"])\ndef create_order(\n    order: OrderCreate,\n    current_user = Depends(get_current_user),\n    db = Depends(get_db)\n):\n    \"\"\"Create a new order\"\"\"\n    created_order = db.create_order(current_user.id, order)\n    return created_order\n</code></pre>"},{"location":"examples/multi_router/#routersadminpy","title":"routers/admin.py","text":"<pre><code>from fastopenapi import Depends\nfrom fastopenapi.routers import FlaskRouter\nfrom dependencies import get_admin_user\n\nrouter = FlaskRouter()\n\n@router.get(\"/stats\", tags=[\"Admin\"])\ndef get_stats(admin = Depends(get_admin_user)):\n    \"\"\"Get platform statistics (admin only)\"\"\"\n    return {\n        \"total_users\": 1000,\n        \"total_products\": 500,\n        \"total_orders\": 2500\n    }\n\n@router.get(\"/users\", tags=[\"Admin\"])\ndef list_all_users(admin = Depends(get_admin_user)):\n    \"\"\"List all users (admin only)\"\"\"\n    return {\"users\": []}\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Admin\"])\ndef delete_user_admin(\n    user_id: int,\n    admin = Depends(get_admin_user)\n):\n    \"\"\"Delete any user (admin only)\"\"\"\n    # Delete user\n    return None\n</code></pre>"},{"location":"examples/multi_router/#mainpy","title":"main.py","text":"<pre><code>from flask import Flask\nfrom fastopenapi.routers import FlaskRouter\n\n# Import all routers\nfrom routers import users, products, orders, admin\n\napp = Flask(__name__)\n\n# Create main router\napi_router = FlaskRouter(\n    app=app,\n    title=\"E-Commerce Platform API\",\n    version=\"2.0.0\",\n    description=\"Complete e-commerce API with multiple routers\"\n)\n\n# Include all sub-routers\napi_router.include_router(users.router, prefix=\"/users\")\napi_router.include_router(products.router, prefix=\"/products\")\napi_router.include_router(orders.router, prefix=\"/orders\")\napi_router.include_router(admin.router, prefix=\"/admin\")\n\n# Root endpoint\n@api_router.get(\"/\", tags=[\"Root\"])\ndef root():\n    \"\"\"API root endpoint\"\"\"\n    return {\n        \"message\": \"E-Commerce API\",\n        \"version\": \"2.0.0\",\n        \"docs\": \"/docs\"\n    }\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>"},{"location":"examples/multi_router/#nested-routers","title":"Nested Routers","text":""},{"location":"examples/multi_router/#deep-nesting","title":"Deep Nesting","text":"<pre><code># Comments router (nested under posts)\ncomments_router = FlaskRouter()\n\n@comments_router.get(\"/\", tags=[\"Comments\"])\ndef list_comments(post_id: int):\n    \"\"\"List comments for a post\"\"\"\n    return []\n\n@comments_router.post(\"/\", status_code=201, tags=[\"Comments\"])\ndef create_comment(post_id: int, content: str):\n    \"\"\"Create a comment on a post\"\"\"\n    return {\"post_id\": post_id, \"content\": content}\n\n# Posts router\nposts_router = FlaskRouter()\n\n@posts_router.get(\"/{post_id}\", tags=[\"Posts\"])\ndef get_post(post_id: int):\n    \"\"\"Get post by ID\"\"\"\n    return {\"id\": post_id, \"title\": \"Post\"}\n\n# Include comments under posts\nposts_router.include_router(\n    comments_router,\n    prefix=\"/{post_id}/comments\"\n)\n\n# Main router\nmain_router.include_router(posts_router, prefix=\"/posts\")\n\n# Results in routes:\n# GET  /posts/{post_id}\n# GET  /posts/{post_id}/comments\n# POST /posts/{post_id}/comments\n</code></pre>"},{"location":"examples/multi_router/#versioned-apis","title":"Versioned APIs","text":"<pre><code>from datetime import datetime\nfrom flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\n\n# Version 1 router\nv1_router = FlaskRouter()\n\n@v1_router.get(\"/users\", tags=[\"Users V1\"])\ndef list_users_v1():\n    \"\"\"Legacy user list (v1)\"\"\"\n    return [{\"id\": 1, \"name\": \"John\"}]\n\n# Version 2 router (with improvements)\nv2_router = FlaskRouter()\n\nclass UserV2(BaseModel):\n    id: int\n    username: str\n    email: str\n    created_at: datetime\n\n@v2_router.get(\"/users\", response_model=list[UserV2], tags=[\"Users V2\"])\ndef list_users_v2():\n    \"\"\"Improved user list (v2)\"\"\"\n    return [\n        UserV2(\n            id=1,\n            username=\"john\",\n            email=\"john@example.com\",\n            created_at=datetime.now()\n        )\n    ]\n\n# Main router\nmain_router = FlaskRouter(\n    app=app,\n    title=\"Versioned API\",\n    version=\"2.0.0\"\n)\n\n# Include versioned routers\nmain_router.include_router(v1_router, prefix=\"/v1\")\nmain_router.include_router(v2_router, prefix=\"/v2\")\n\n# Routes:\n# GET /v1/users\n# GET /v2/users\n</code></pre>"},{"location":"examples/multi_router/#domain-driven-design","title":"Domain-Driven Design","text":"<pre><code># Authentication domain\nauth_router = FlaskRouter()\n\n@auth_router.post(\"/register\", tags=[\"Authentication\"])\ndef register(user: UserCreate):\n    return {\"message\": \"User registered\"}\n\n@auth_router.post(\"/login\", tags=[\"Authentication\"])\ndef login(credentials: LoginRequest):\n    return {\"access_token\": \"...\"}\n\n@auth_router.post(\"/logout\", tags=[\"Authentication\"])\ndef logout():\n    return {\"message\": \"Logged out\"}\n\n# Blog domain\nblog_router = FlaskRouter()\n\n@blog_router.get(\"/posts\", tags=[\"Blog\"])\ndef list_posts():\n    return []\n\n@blog_router.post(\"/posts\", tags=[\"Blog\"])\ndef create_post(post: PostCreate):\n    return post\n\n# E-commerce domain\nshop_router = FlaskRouter()\n\n@shop_router.get(\"/products\", tags=[\"Shop\"])\ndef list_products():\n    return []\n\n@shop_router.post(\"/cart/items\", tags=[\"Shop\"])\ndef add_to_cart(item: CartItem):\n    return item\n\n# Combine all domains\nmain_router = FlaskRouter(app=app)\nmain_router.include_router(auth_router, prefix=\"/auth\")\nmain_router.include_router(blog_router, prefix=\"/blog\")\nmain_router.include_router(shop_router, prefix=\"/shop\")\n</code></pre>"},{"location":"examples/multi_router/#shared-dependencies","title":"Shared Dependencies","text":"<pre><code># dependencies.py\nfrom fastopenapi import Depends, Header\nfrom fastopenapi.errors import AuthenticationError, AuthorizationError\n\ndef get_db():\n    \"\"\"Database dependency (shared across all routers)\"\"\"\n    db = DatabaseSession()\n    try:\n        yield db\n    finally:\n        db.close()\n\ndef get_current_user(authorization: str = Header(...)):\n    \"\"\"Authentication dependency (shared)\"\"\"\n    # Verify token\n    user = verify_token(authorization)\n    if not user:\n        raise AuthenticationError(\"Invalid token\")\n    return user\n\ndef get_admin_user(user = Depends(get_current_user)):\n    \"\"\"Admin authorization (shared)\"\"\"\n    if not user.is_admin:\n        raise AuthorizationError(\"Admin required\")\n    return user\n\n# All routers can use these dependencies\n# routers/users.py\n@router.get(\"/\")\ndef list_users(db = Depends(get_db)):\n    return db.query_users()\n\n# routers/admin.py\n@router.get(\"/stats\")\ndef get_stats(admin = Depends(get_admin_user)):\n    return {\"stats\": \"...\"}\n</code></pre>"},{"location":"examples/multi_router/#best-practices","title":"Best Practices","text":""},{"location":"examples/multi_router/#1-organize-by-featuredomain","title":"1. Organize by Feature/Domain","text":"<pre><code>routers/\n\u001c\u0000\u0000 auth.py        # Authentication\n\u001c\u0000\u0000 users.py       # User management\n\u001c\u0000\u0000 products.py    # Products\n\u001c\u0000\u0000 orders.py      # Orders\n\u0014\u0000\u0000 admin.py       # Admin operations\n</code></pre>"},{"location":"examples/multi_router/#2-use-consistent-prefixes","title":"2. Use Consistent Prefixes","text":"<pre><code>main_router.include_router(users_router, prefix=\"/users\")\nmain_router.include_router(products_router, prefix=\"/products\")\nmain_router.include_router(orders_router, prefix=\"/orders\")\n</code></pre>"},{"location":"examples/multi_router/#3-share-common-dependencies","title":"3. Share Common Dependencies","text":"<pre><code># Define once, use everywhere\ndef get_db():\n    ...\n\n# All routers use the same dependency\n@users_router.get(\"/\")\ndef list_users(db = Depends(get_db)):\n    ...\n\n@products_router.get(\"/\")\ndef list_products(db = Depends(get_db)):\n    ...\n</code></pre>"},{"location":"examples/multi_router/#4-use-tags-for-organization","title":"4. Use Tags for Organization","text":"<pre><code>@users_router.get(\"/\", tags=[\"Users\"])\n@products_router.get(\"/\", tags=[\"Products\"])\n@orders_router.get(\"/\", tags=[\"Orders\"])\n</code></pre>"},{"location":"examples/multi_router/#5-version-your-api","title":"5. Version Your API","text":"<pre><code>main_router.include_router(v1_router, prefix=\"/api/v1\")\nmain_router.include_router(v2_router, prefix=\"/api/v2\")\n</code></pre>"},{"location":"examples/multi_router/#see-also","title":"See Also","text":"<ul> <li>Routing Guide - Routing concepts</li> <li>Dependencies Guide - Sharing dependencies</li> <li>Routers API Reference - Router API</li> </ul>"},{"location":"frameworks/aiohttp/","title":"AIOHTTP Integration","text":"<p>AIOHTTP is a popular asynchronous HTTP client/server framework. This guide covers how to use FastOpenAPI with AIOHTTP.</p>"},{"location":"frameworks/aiohttp/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[aiohttp]\n</code></pre>"},{"location":"frameworks/aiohttp/#basic-setup","title":"Basic Setup","text":"<pre><code>from aiohttp import web\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import AioHttpRouter\n\napp = web.Application()\nrouter = AioHttpRouter(\n    app=app,\n    title=\"AIOHTTP API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from AIOHTTP!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    web.run_app(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/aiohttp/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/aiohttp/#request-data","title":"Request Data","text":""},{"location":"frameworks/aiohttp/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\nasync def search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/aiohttp/#request-body","title":"Request Body","text":"<pre><code>class UserCreate(BaseModel):\n    username: str\n    email: str\n    age: int\n\n@router.post(\"/users\", status_code=201)\nasync def create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/aiohttp/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\nasync def login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    # Authenticate\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/aiohttp/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content),\n        \"content_type\": file.content_type\n    }\n</code></pre>"},{"location":"frameworks/aiohttp/#working-with-aiohttp-features","title":"Working with AIOHTTP Features","text":""},{"location":"frameworks/aiohttp/#accessing-request-object","title":"Accessing Request Object","text":"<pre><code>from aiohttp import web\n\n@router.get(\"/request-info\")\nasync def get_request_info():\n    # Can access aiohttp.web.Request if needed\n    return {\"message\": \"Request info\"}\n</code></pre>"},{"location":"frameworks/aiohttp/#using-aiohttp-response","title":"Using AIOHTTP Response","text":"<pre><code>from aiohttp import web\n\n@router.get(\"/custom-response\")\nasync def custom_response():\n    # Return aiohttp response directly\n    return web.Response(\n        text='{\"message\": \"Custom\"}',\n        content_type=\"application/json\"\n    )\n</code></pre>"},{"location":"frameworks/aiohttp/#middleware","title":"Middleware","text":"<pre><code>@web.middleware\nasync def timing_middleware(request, handler):\n    import time\n    start = time.time()\n    response = await handler(request)\n    elapsed = time.time() - start\n    response.headers['X-Response-Time'] = str(elapsed)\n    return response\n\napp = web.Application(middlewares=[timing_middleware])\nrouter = AioHttpRouter(app=app)\n</code></pre>"},{"location":"frameworks/aiohttp/#background-tasks","title":"Background Tasks","text":"<pre><code>import asyncio\n\n@router.post(\"/send-email\")\nasync def send_email(email: str = Form(...)):\n    # Start background task\n    asyncio.create_task(send_email_async(email))\n    return {\"message\": \"Email will be sent\"}\n\nasync def send_email_async(email: str):\n    await asyncio.sleep(1)  # Simulate email sending\n    print(f\"Email sent to {email}\")\n</code></pre>"},{"location":"frameworks/aiohttp/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/aiohttp/#using-aiopg-postgresql","title":"Using aiopg (PostgreSQL)","text":"<pre><code>import aiopg\n\nasync def get_db_pool():\n    return await aiopg.create_pool(\n        \"dbname=test user=postgres password=secret\"\n    )\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    pool = await get_db_pool()\n    async with pool.acquire() as conn:\n        async with conn.cursor() as cur:\n            await cur.execute(\"SELECT * FROM users WHERE id = %s\", (user_id,))\n            user = await cur.fetchone()\n            if not user:\n                raise ResourceNotFoundError(f\"User {user_id} not found\")\n            return {\"id\": user[0], \"name\": user[1]}\n</code></pre>"},{"location":"frameworks/aiohttp/#using-motor-mongodb","title":"Using Motor (MongoDB)","text":"<pre><code>from motor.motor_asyncio import AsyncIOMotorClient\n\nclient = AsyncIOMotorClient('mongodb://localhost:27017')\ndb = client.test_database\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: str):\n    item = await db.items.find_one({\"_id\": item_id})\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n    return item\n</code></pre>"},{"location":"frameworks/aiohttp/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/aiohttp/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError,\n    AuthenticationError\n)\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    item = await database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/aiohttp/#using-aiohttp-errors","title":"Using AIOHTTP Errors","text":"<pre><code>from aiohttp import web\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    item = await database.get(item_id)\n    if not item:\n        raise web.HTTPNotFound(reason=\"Item not found\")\n    return item\n</code></pre>"},{"location":"frameworks/aiohttp/#authentication","title":"Authentication","text":""},{"location":"frameworks/aiohttp/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef verify_token(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.get(\"/protected\")\nasync def protected(user_id: str = Security(verify_token)):\n    return {\"user_id\": user_id, \"message\": \"Access granted\"}\n</code></pre>"},{"location":"frameworks/aiohttp/#websocket-support","title":"WebSocket Support","text":"<p>AIOHTTP has built-in WebSocket support:</p> <pre><code>from aiohttp import web\n\nasync def websocket_handler(request):\n    ws = web.WebSocketResponse()\n    await ws.prepare(request)\n\n    async for msg in ws:\n        if msg.type == web.WSMsgType.TEXT:\n            await ws.send_str(f\"Echo: {msg.data}\")\n        elif msg.type == web.WSMsgType.ERROR:\n            print(f'Connection closed with exception {ws.exception()}')\n\n    return ws\n\napp.router.add_route('GET', '/ws', websocket_handler)\n</code></pre>"},{"location":"frameworks/aiohttp/#testing","title":"Testing","text":"<pre><code>from aiohttp.test_utils import AioHTTPTestCase\nfrom aiohttp import web\n\nclass TestAPI(AioHTTPTestCase):\n    async def get_application(self):\n        return app\n\n    async def test_root(self):\n        async with self.client.request(\"GET\", \"/\") as resp:\n            self.assertEqual(resp.status, 200)\n            data = await resp.json()\n            self.assertEqual(data[\"message\"], \"Hello from AIOHTTP!\")\n\n    async def test_create_item(self):\n        async with self.client.request(\n            \"POST\", \n            \"/items\",\n            json={\"name\": \"Test\", \"price\": 9.99}\n        ) as resp:\n            self.assertEqual(resp.status, 201)\n            data = await resp.json()\n            self.assertEqual(data[\"name\"], \"Test\")\n</code></pre>"},{"location":"frameworks/aiohttp/#complete-example","title":"Complete Example","text":"<pre><code>from aiohttp import web\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import AioHttpRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\nimport asyncio\n\napp = web.Application()\nrouter = AioHttpRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\"\n)\n\n# In-memory database\nusers_db = {}\nnext_id = 1\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n@router.get(\"/\", tags=[\"Root\"])\nasync def root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\nasync def list_users(limit: int = Query(10, ge=1, le=100)):\n    users = list(users_db.values())[:limit]\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\nasync def get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\nasync def create_user(user: UserCreate):\n    global next_id\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\nasync def delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    del users_db[user_id]\n    return None\n\nif __name__ == \"__main__\":\n    web.run_app(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/aiohttp/#deployment","title":"Deployment","text":""},{"location":"frameworks/aiohttp/#development","title":"Development","text":"<pre><code>python main.py\n</code></pre>"},{"location":"frameworks/aiohttp/#production-with-gunicorn","title":"Production with Gunicorn","text":"<pre><code>pip install gunicorn aiohttp-gunicorn\n\ngunicorn main:app --bind 0.0.0.0:8000 --worker-class aiohttp.GunicornWebWorker --workers 4\n</code></pre>"},{"location":"frameworks/aiohttp/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts - Understand FastOpenAPI</li> <li>Async Patterns - Learn async patterns</li> <li>Dependencies - Use dependency injection</li> </ul>"},{"location":"frameworks/django/","title":"Django Integration","text":"<p>Django is one of the most popular Python web frameworks. This guide shows how to use FastOpenAPI with Django, supporting both synchronous (WSGI) and asynchronous (ASGI) modes.</p>"},{"location":"frameworks/django/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[django]\n</code></pre>"},{"location":"frameworks/django/#basic-setup","title":"Basic Setup","text":"<p>FastOpenAPI provides two routers for Django: - <code>DjangoRouter</code> - for synchronous views (WSGI) - <code>DjangoAsyncRouter</code> - for asynchronous views (ASGI)</p>"},{"location":"frameworks/django/#synchronous-django-wsgi","title":"Synchronous Django (WSGI)","text":"<pre><code>from django.conf import settings\nfrom django.urls import path, include\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import DjangoRouter\n\n# Configure Django settings (if running standalone)\nif not settings.configured:\n    settings.configure(\n        DEBUG=True,\n        SECRET_KEY='your-secret-key',\n        ROOT_URLCONF=__name__,\n        ALLOWED_HOSTS=['*'],\n    )\n\nrouter = DjangoRouter(\n    app=True,\n    title=\"Django API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"Hello from Django!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n\n# URL Configuration\nurlpatterns = [\n    path(\"\", include(router.urls)),\n]\n\nif __name__ == \"__main__\":\n    from django.core.management import execute_from_command_line\n    execute_from_command_line([\"manage.py\", \"runserver\", \"8000\"])\n</code></pre>"},{"location":"frameworks/django/#asynchronous-django-asgi","title":"Asynchronous Django (ASGI)","text":"<pre><code>from django.conf import settings\nfrom django.urls import path, include\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import DjangoAsyncRouter\n\n# Configure Django settings\nif not settings.configured:\n    settings.configure(\n        DEBUG=True,\n        SECRET_KEY='your-secret-key',\n        ROOT_URLCONF=__name__,\n        ALLOWED_HOSTS=['*'],\n    )\n\nrouter = DjangoAsyncRouter(\n    app=True,\n    title=\"Django Async API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from async Django!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\n# URL Configuration\nurlpatterns = [\n    path(\"\", include(router.urls)),\n]\n\nif __name__ == \"__main__\":\n    import uvicorn\n    from django.core.asgi import get_asgi_application\n\n    application = get_asgi_application()\n    uvicorn.run(application, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/django/#integration-with-django-project","title":"Integration with Django Project","text":""},{"location":"frameworks/django/#in-settingspy","title":"In settings.py","text":"<pre><code># settings.py\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'your_app',\n]\n\n# Optional: Disable CSRF for API endpoints\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    # 'django.middleware.csrf.CsrfViewMiddleware',  # Disabled for API\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n</code></pre>"},{"location":"frameworks/django/#in-urlspy","title":"In urls.py","text":"<pre><code># urls.py\nfrom django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('api/', include('your_app.api')),\n]\n</code></pre>"},{"location":"frameworks/django/#in-your_appapipy","title":"In your_app/api.py","text":"<pre><code># your_app/api.py\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import DjangoRouter\n\nrouter = DjangoRouter(\n    app=True,\n    title=\"Your App API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n\n# Export URLs\nurls = router.urls\n</code></pre>"},{"location":"frameworks/django/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n\n# Django URL: /users/&lt;user_id&gt;\n</code></pre>"},{"location":"frameworks/django/#request-data","title":"Request Data","text":""},{"location":"frameworks/django/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\ndef search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/django/#request-body","title":"Request Body","text":"<pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    password: str\n\n@router.post(\"/users\", status_code=201)\ndef create_user(user: UserCreate):\n    # user is automatically validated\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/django/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\ndef login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    # Authenticate user\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/django/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n# Synchronous\n@router.post(\"/upload\")\ndef upload_file(file: FileUpload = File(...)):\n    content = file.read()  # Sync read\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content),\n        \"content_type\": file.content_type\n    }\n\n# Asynchronous\n@router.post(\"/upload\")\nasync def upload_file_async(file: FileUpload = File(...)):\n    content = await file.aread()  # Async read\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"frameworks/django/#working-with-django-orm","title":"Working with Django ORM","text":""},{"location":"frameworks/django/#synchronous-orm","title":"Synchronous ORM","text":"<pre><code>from django.contrib.auth.models import User\nfrom fastopenapi.errors import ResourceNotFoundError\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    try:\n        user = User.objects.get(id=user_id)\n        return {\n            \"id\": user.id,\n            \"username\": user.username,\n            \"email\": user.email\n        }\n    except User.DoesNotExist:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n\n@router.get(\"/users\")\ndef list_users(limit: int = Query(10, le=100)):\n    users = User.objects.all()[:limit]\n    return [\n        {\"id\": u.id, \"username\": u.username, \"email\": u.email}\n        for u in users\n    ]\n</code></pre>"},{"location":"frameworks/django/#asynchronous-orm","title":"Asynchronous ORM","text":"<p>Django 4.1+ supports async ORM queries:</p> <pre><code>from django.contrib.auth.models import User\nfrom asgiref.sync import sync_to_async\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    try:\n        user = await User.objects.aget(id=user_id)\n        return {\n            \"id\": user.id,\n            \"username\": user.username,\n            \"email\": user.email\n        }\n    except User.DoesNotExist:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n\n@router.get(\"/users\")\nasync def list_users(limit: int = Query(10)):\n    users = []\n    async for user in User.objects.all()[:limit]:\n        users.append({\n            \"id\": user.id,\n            \"username\": user.username,\n            \"email\": user.email\n        })\n    return users\n</code></pre>"},{"location":"frameworks/django/#using-sync_to_async","title":"Using sync_to_async","text":"<p>For synchronous ORM code in async views:</p> <pre><code>from asgiref.sync import sync_to_async\n\n@sync_to_async\ndef get_user_from_db(user_id: int):\n    return User.objects.get(id=user_id)\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    try:\n        user = await get_user_from_db(user_id)\n        return {\"id\": user.id, \"username\": user.username}\n    except User.DoesNotExist:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n</code></pre>"},{"location":"frameworks/django/#django-specific-features","title":"Django-Specific Features","text":""},{"location":"frameworks/django/#using-django-request","title":"Using Django Request","text":"<pre><code>from django.http import HttpRequest\n\n@router.get(\"/request-info\")\ndef get_request_info():\n    # Access Django request via thread locals if needed\n    # Or use dependencies\n    return {\"message\": \"Request info\"}\n</code></pre>"},{"location":"frameworks/django/#django-authentication","title":"Django Authentication","text":"<pre><code>from django.contrib.auth import authenticate\nfrom fastopenapi.errors import AuthenticationError\n\n@router.post(\"/auth/login\")\ndef login(username: str = Form(...), password: str = Form(...)):\n    user = authenticate(username=username, password=password)\n    if user is None:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    # Create session or token\n    return {\"user_id\": user.id, \"username\": user.username}\n</code></pre>"},{"location":"frameworks/django/#using-django-models-as-response","title":"Using Django Models as Response","text":"<pre><code>from django.contrib.auth.models import User\nfrom pydantic import BaseModel\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n    class Config:\n        from_attributes = True  # Allows creating from Django models\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user = User.objects.get(id=user_id)\n    return user  # Pydantic will extract fields from Django model\n</code></pre>"},{"location":"frameworks/django/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/django/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError,\n    AuthenticationError\n)\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    # Get from database\n    item = database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/django/#using-django-exceptions","title":"Using Django Exceptions","text":"<pre><code>from django.http import Http404\nfrom django.core.exceptions import PermissionDenied\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    try:\n        user = User.objects.get(id=user_id)\n        return {\"username\": user.username}\n    except User.DoesNotExist:\n        raise Http404(\"User not found\")\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user(user_id: int):\n    if not has_permission():\n        raise PermissionDenied(\"Not allowed\")\n\n    User.objects.filter(id=user_id).delete()\n    return None\n</code></pre>"},{"location":"frameworks/django/#middleware-integration","title":"Middleware Integration","text":"<p>Django middleware works normally with FastOpenAPI:</p> <pre><code># middleware.py\nclass CustomMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        # Before view\n        request.custom_data = \"example\"\n\n        response = self.get_response(request)\n\n        # After view\n        response['X-Custom-Header'] = 'value'\n\n        return response\n\n# settings.py\nMIDDLEWARE = [\n    # ...\n    'your_app.middleware.CustomMiddleware',\n]\n</code></pre>"},{"location":"frameworks/django/#authentication-with-dependencies","title":"Authentication with Dependencies","text":"<pre><code>from fastopenapi import Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\ndef get_current_user(authorization: str = Header(..., alias=\"Authorization\")):\n    \"\"\"Extract user from Authorization header\"\"\"\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    token = authorization[7:]\n    # Validate token and get user\n    user = validate_token(token)\n    if not user:\n        raise AuthenticationError(\"Invalid token\")\n\n    return user\n\n@router.get(\"/profile\")\ndef get_profile(user = Depends(get_current_user)):\n    return {\n        \"id\": user.id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n</code></pre>"},{"location":"frameworks/django/#database-transactions","title":"Database Transactions","text":""},{"location":"frameworks/django/#synchronous","title":"Synchronous","text":"<pre><code>from django.db import transaction\n\n@router.post(\"/transfer\", status_code=200)\ndef transfer_money(\n    from_account: int = Form(...),\n    to_account: int = Form(...),\n    amount: float = Form(...)\n):\n    with transaction.atomic():\n        # Perform transfer\n        account_from = Account.objects.select_for_update().get(id=from_account)\n        account_to = Account.objects.select_for_update().get(id=to_account)\n\n        account_from.balance -= amount\n        account_to.balance += amount\n\n        account_from.save()\n        account_to.save()\n\n    return {\"message\": \"Transfer successful\"}\n</code></pre>"},{"location":"frameworks/django/#asynchronous","title":"Asynchronous","text":"<pre><code>from asgiref.sync import sync_to_async\nfrom django.db import transaction\n\n@router.post(\"/transfer\", status_code=200)\nasync def transfer_money(\n    from_account: int = Form(...),\n    to_account: int = Form(...),\n    amount: float = Form(...)\n):\n    @sync_to_async\n    @transaction.atomic\n    def do_transfer():\n        account_from = Account.objects.select_for_update().get(id=from_account)\n        account_to = Account.objects.select_for_update().get(id=to_account)\n\n        account_from.balance -= amount\n        account_to.balance += amount\n\n        account_from.save()\n        account_to.save()\n\n    await do_transfer()\n    return {\"message\": \"Transfer successful\"}\n</code></pre>"},{"location":"frameworks/django/#cors-support","title":"CORS Support","text":"<p>Use django-cors-headers:</p> <pre><code>pip install django-cors-headers\n</code></pre> <pre><code># settings.py\nINSTALLED_APPS = [\n    # ...\n    'corsheaders',\n]\n\nMIDDLEWARE = [\n    'corsheaders.middleware.CorsMiddleware',\n    # ...\n]\n\nCORS_ALLOWED_ORIGINS = [\n    \"http://localhost:3000\",\n    \"https://example.com\",\n]\n\n# Or allow all (development only)\nCORS_ALLOW_ALL_ORIGINS = True\n</code></pre>"},{"location":"frameworks/django/#complete-example","title":"Complete Example","text":"<pre><code># settings.py\nfrom pathlib import Path\n\nBASE_DIR = Path(__file__).resolve().parent.parent\n\nSECRET_KEY = 'django-secret-key'\nDEBUG = True\nALLOWED_HOSTS = ['*']\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\n\nROOT_URLCONF = 'project.urls'\n</code></pre> <pre><code># api.py\nfrom django.contrib.auth.models import User\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import DjangoRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\n\nrouter = DjangoRouter(\n    app=True,\n    title=\"User Management API\",\n    version=\"1.0.0\",\n    description=\"Django API with FastOpenAPI\"\n)\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n    class Config:\n        from_attributes = True\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    password: str\n\n@router.get(\"/\", tags=[\"Root\"])\ndef root():\n    \"\"\"Root endpoint\"\"\"\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\ndef list_users(limit: int = Query(10, ge=1, le=100)):\n    \"\"\"List all users\"\"\"\n    users = User.objects.all()[:limit]\n    return list(users)\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\ndef get_user(user_id: int):\n    \"\"\"Get user by ID\"\"\"\n    try:\n        user = User.objects.get(id=user_id)\n        return user\n    except User.DoesNotExist:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\ndef create_user(user: UserCreate):\n    \"\"\"Create new user\"\"\"\n    new_user = User.objects.create_user(\n        username=user.username,\n        email=user.email,\n        password=user.password\n    )\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\ndef delete_user(user_id: int):\n    \"\"\"Delete user\"\"\"\n    try:\n        user = User.objects.get(id=user_id)\n        user.delete()\n        return None\n    except User.DoesNotExist:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n\nurls = router.urls\n</code></pre> <pre><code># urls.py\nfrom django.contrib import admin\nfrom django.urls import path, include\nimport api\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include(api.urls)),\n]\n</code></pre>"},{"location":"frameworks/django/#running-the-server","title":"Running the Server","text":""},{"location":"frameworks/django/#development-synchronous","title":"Development (Synchronous)","text":"<pre><code>python manage.py runserver 8000\n</code></pre>"},{"location":"frameworks/django/#development-asynchronous","title":"Development (Asynchronous)","text":"<pre><code># Install uvicorn\npip install uvicorn\n\n# Run with uvicorn\nuvicorn project.asgi:application --host 0.0.0.0 --port 8000 --reload\n</code></pre>"},{"location":"frameworks/django/#production","title":"Production","text":"<pre><code># With Gunicorn (sync)\ngunicorn project.wsgi:application --bind 0.0.0.0:8000 --workers 4\n\n# With Uvicorn (async)\nuvicorn project.asgi:application --host 0.0.0.0 --port 8000 --workers 4\n</code></pre>"},{"location":"frameworks/django/#testing","title":"Testing","text":"<pre><code>from django.test import TestCase, Client\n\nclass APITestCase(TestCase):\n    def setUp(self):\n        self.client = Client()\n\n    def test_root(self):\n        response = self.client.get('/')\n        self.assertEqual(response.status_code, 200)\n        self.assertEqual(response.json()['message'], 'User Management API')\n\n    def test_create_user(self):\n        response = self.client.post('/users', {\n            'username': 'testuser',\n            'email': 'test@example.com',\n            'password': 'testpass123'\n        }, content_type='application/json')\n\n        self.assertEqual(response.status_code, 201)\n        self.assertEqual(response.json()['username'], 'testuser')\n\n    def test_get_user_not_found(self):\n        response = self.client.get('/users/9999')\n        self.assertEqual(response.status_code, 404)\n</code></pre>"},{"location":"frameworks/django/#tips-and-best-practices","title":"Tips and Best Practices","text":""},{"location":"frameworks/django/#1-choose-right-router","title":"1. Choose Right Router","text":"<pre><code># Use DjangoRouter for sync views\nfrom fastopenapi.routers import DjangoRouter\n\n# Use DjangoAsyncRouter for async views\nfrom fastopenapi.routers import DjangoAsyncRouter\n</code></pre>"},{"location":"frameworks/django/#2-use-djangos-built-in-features","title":"2. Use Django's Built-in Features","text":"<pre><code># Use Django's authentication\nfrom django.contrib.auth import authenticate, login\n\n# Use Django's caching\nfrom django.core.cache import cache\n\n# Use Django's signals\nfrom django.db.models.signals import post_save\n</code></pre>"},{"location":"frameworks/django/#3-leverage-pydantic-with-django-models","title":"3. Leverage Pydantic with Django Models","text":"<pre><code>class UserResponse(BaseModel):\n    id: int\n    username: str\n\n    class Config:\n        from_attributes = True  # Important for Django models\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user = User.objects.get(id=user_id)\n    return user  # Pydantic will convert automatically\n</code></pre>"},{"location":"frameworks/django/#4-handle-django-exceptions","title":"4. Handle Django Exceptions","text":"<p>FastOpenAPI automatically converts common Django exceptions:</p> <pre><code># These are automatically handled:\n# - Http404 -&gt; 404 error\n# - PermissionDenied -&gt; 403 error\n# - BadRequest -&gt; 400 error\n</code></pre>"},{"location":"frameworks/django/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts - Understand FastOpenAPI</li> <li>Routing - Learn about routing</li> <li>Dependencies - Use dependency injection</li> <li>Examples - See complete examples</li> </ul>"},{"location":"frameworks/falcon/","title":"Falcon Integration","text":"<p>Falcon is a minimalist Python web framework for building fast APIs. This guide covers how to use FastOpenAPI with both Falcon WSGI (synchronous) and ASGI (asynchronous) modes.</p>"},{"location":"frameworks/falcon/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[falcon]\n</code></pre>"},{"location":"frameworks/falcon/#basic-setup","title":"Basic Setup","text":"<p>FastOpenAPI provides two routers for Falcon: - <code>FalconRouter</code> - for synchronous WSGI apps - <code>FalconAsyncRouter</code> - for asynchronous ASGI apps</p>"},{"location":"frameworks/falcon/#synchronous-falcon-wsgi","title":"Synchronous Falcon (WSGI)","text":"<pre><code>import falcon\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FalconRouter\n\napp = falcon.App()\nrouter = FalconRouter(\n    app=app,\n    title=\"Falcon API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"Hello from Falcon!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    from wsgiref import simple_server\n    httpd = simple_server.make_server('127.0.0.1', 8000, app)\n    httpd.serve_forever()\n</code></pre>"},{"location":"frameworks/falcon/#asynchronous-falcon-asgi","title":"Asynchronous Falcon (ASGI)","text":"<pre><code>import falcon.asgi\nimport uvicorn\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FalconAsyncRouter\n\napp = falcon.asgi.App()\nrouter = FalconAsyncRouter(\n    app=app,\n    title=\"Falcon Async API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from async Falcon!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/falcon/#path-parameters","title":"Path Parameters","text":"Async (ASGI)Sync (WSGI) <pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre> <pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/falcon/#request-data","title":"Request Data","text":""},{"location":"frameworks/falcon/#query-parameters","title":"Query Parameters","text":"Async (ASGI)Sync (WSGI) <pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\nasync def search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre> <pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\ndef search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/falcon/#request-body","title":"Request Body","text":"Async (ASGI)Sync (WSGI) <pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    age: int\n\n@router.post(\"/users\", status_code=201)\nasync def create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre> <pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    age: int\n\n@router.post(\"/users\", status_code=201)\ndef create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/falcon/#form-data","title":"Form Data","text":"Async (ASGI)Sync (WSGI) <pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\nasync def login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    return {\"username\": username}\n</code></pre> <pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\ndef login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/falcon/#file-upload","title":"File Upload","text":"Async (ASGI)Sync (WSGI) <pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre> <pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\ndef upload_file(file: FileUpload = File(...)):\n    content = file.read()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"frameworks/falcon/#falcon-specific-features","title":"Falcon-Specific Features","text":""},{"location":"frameworks/falcon/#using-falcon-requestresponse","title":"Using Falcon Request/Response","text":"<pre><code>import falcon\n\n@router.get(\"/falcon-response\")\nasync def falcon_response():\n    # Can return Falcon Response directly\n    resp = falcon.Response()\n    resp.media = {\"message\": \"Falcon response\"}\n    resp.set_header(\"X-Custom\", \"Value\")\n    return resp\n</code></pre>"},{"location":"frameworks/falcon/#falcon-hooks","title":"Falcon Hooks","text":"<pre><code>def validate_api_key(req, resp, resource, params):\n    \"\"\"Hook to validate API key\"\"\"\n    api_key = req.get_header('X-API-Key')\n    if api_key != 'secret':\n        raise falcon.HTTPUnauthorized('Unauthorized', 'Invalid API key')\n\n# Apply hook to specific endpoint\n@router.get(\"/protected\")\n@falcon.before(validate_api_key)\nasync def protected():\n    return {\"message\": \"Access granted\"}\n</code></pre>"},{"location":"frameworks/falcon/#falcon-middleware","title":"Falcon Middleware","text":"<pre><code>class AuthMiddleware:\n    async def process_request(self, req, resp):\n        # Process request before handler\n        token = req.get_header('Authorization')\n        if not token:\n            raise falcon.HTTPUnauthorized()\n\n    async def process_response(self, req, resp, resource, req_succeeded):\n        # Process response after handler\n        resp.set_header('X-Powered-By', 'Falcon')\n\napp = falcon.asgi.App(middleware=[AuthMiddleware()])\nrouter = FalconAsyncRouter(app=app)\n</code></pre>"},{"location":"frameworks/falcon/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/falcon/#using-sqlalchemy-async","title":"Using SQLAlchemy (Async)","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\nengine = create_async_engine(\"postgresql+asyncpg://user:pass@localhost/db\")\nasync_session = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n\nasync def get_db():\n    async with async_session() as session:\n        yield session\n\nfrom fastopenapi import Depends\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(User).where(User.id == user_id))\n    user = result.scalar_one_or_none()\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return {\"id\": user.id, \"username\": user.username}\n</code></pre>"},{"location":"frameworks/falcon/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/falcon/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError,\n    AuthenticationError\n)\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    item = await database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/falcon/#using-falcon-errors","title":"Using Falcon Errors","text":"<pre><code>import falcon\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    item = await database.get(item_id)\n    if not item:\n        raise falcon.HTTPNotFound(\n            title=\"Not Found\",\n            description=f\"Item {item_id} not found\"\n        )\n    return item\n</code></pre>"},{"location":"frameworks/falcon/#authentication","title":"Authentication","text":""},{"location":"frameworks/falcon/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef verify_token(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.get(\"/protected\")\nasync def protected(user_id: str = Security(verify_token)):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/falcon/#testing","title":"Testing","text":""},{"location":"frameworks/falcon/#async-testing","title":"Async Testing","text":"<pre><code>import pytest\nfrom falcon import testing\n\n@pytest.fixture\ndef client():\n    return testing.TestClient(app)\n\ndef test_root(client):\n    response = client.simulate_get('/')\n    assert response.status_code == 200\n    assert response.json == {\"message\": \"Hello from async Falcon!\"}\n\ndef test_create_item(client):\n    response = client.simulate_post(\n        '/items',\n        json={\"name\": \"Test\", \"price\": 9.99}\n    )\n    assert response.status_code == 201\n    assert response.json[\"name\"] == \"Test\"\n</code></pre>"},{"location":"frameworks/falcon/#complete-example","title":"Complete Example","text":"<pre><code>import falcon.asgi\nimport uvicorn\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import FalconAsyncRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\n\napp = falcon.asgi.App()\nrouter = FalconAsyncRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\"\n)\n\n# In-memory database\nusers_db = {}\nnext_id = 1\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n@router.get(\"/\", tags=[\"Root\"])\nasync def root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\nasync def list_users(limit: int = Query(10, ge=1, le=100)):\n    users = list(users_db.values())[:limit]\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\nasync def get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\nasync def create_user(user: UserCreate):\n    global next_id\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\nasync def delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    del users_db[user_id]\n    return None\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/falcon/#deployment","title":"Deployment","text":""},{"location":"frameworks/falcon/#development-async","title":"Development (Async)","text":"<pre><code>uvicorn main:app --reload\n</code></pre>"},{"location":"frameworks/falcon/#development-sync","title":"Development (Sync)","text":"<pre><code>python main.py\n</code></pre>"},{"location":"frameworks/falcon/#production-async","title":"Production (Async)","text":"<pre><code>uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4\n</code></pre>"},{"location":"frameworks/falcon/#production-sync","title":"Production (Sync)","text":"<pre><code>gunicorn --bind 0.0.0.0:8000 --workers 4 main:app\n</code></pre>"},{"location":"frameworks/falcon/#performance-tips","title":"Performance Tips","text":"<p>Falcon is designed for performance:</p> <ol> <li>Use ASGI for async operations</li> <li>Minimize middleware - only use what you need</li> <li>Use connection pooling for databases</li> <li>Cache responses where appropriate</li> <li>Profile with cProfile to find bottlenecks</li> </ol>"},{"location":"frameworks/falcon/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts - Understand FastOpenAPI</li> <li>Performance - Optimization tips</li> <li>Dependencies - Use dependency injection</li> </ul>"},{"location":"frameworks/flask/","title":"Flask Integration","text":"<p>Flask is the most popular Python web framework. This guide shows how to use FastOpenAPI with Flask.</p>"},{"location":"frameworks/flask/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[flask]\n</code></pre>"},{"location":"frameworks/flask/#basic-setup","title":"Basic Setup","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FlaskRouter\n\napp = Flask(__name__)\nrouter = FlaskRouter(\n    app=app,\n    title=\"Flask API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"Hello from Flask!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    app.run(debug=True, port=8000)\n</code></pre>"},{"location":"frameworks/flask/#path-parameters","title":"Path Parameters","text":"<p>Flask uses <code>&lt;type:name&gt;</code> syntax, but FastOpenAPI converts <code>{name}</code> automatically:</p> <pre><code># FastOpenAPI syntax (preferred)\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    return {\"user_id\": user_id}\n\n# Both generate the same Flask route: /users/&lt;user_id&gt;\n</code></pre>"},{"location":"frameworks/flask/#request-data","title":"Request Data","text":""},{"location":"frameworks/flask/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\ndef search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/flask/#request-body","title":"Request Body","text":"<pre><code>from pydantic import BaseModel\n\nclass User(BaseModel):\n    name: str\n    email: str\n    age: int | None = None\n\n@router.post(\"/users\")\ndef create_user(user: User):\n    # user is automatically validated\n    return {\"user\": user}\n</code></pre>"},{"location":"frameworks/flask/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\ndef login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    # Authenticate user\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/flask/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\ndef upload_file(file: FileUpload = File(...)):\n    content = file.read()  # Synchronous read for Flask\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content),\n        \"content_type\": file.content_type\n    }\n</code></pre>"},{"location":"frameworks/flask/#flask-specific-features","title":"Flask-Specific Features","text":""},{"location":"frameworks/flask/#accessing-flask-request","title":"Accessing Flask Request","text":"<pre><code>from flask import request\n\n@router.get(\"/request-info\")\ndef get_request_info():\n    return {\n        \"method\": request.method,\n        \"path\": request.path,\n        \"remote_addr\": request.remote_addr,\n        \"user_agent\": request.user_agent.string\n    }\n</code></pre>"},{"location":"frameworks/flask/#using-flask-response","title":"Using Flask Response","text":"<pre><code>from flask import make_response, jsonify\n\n@router.get(\"/custom-response\")\ndef custom_response():\n    response = make_response(jsonify({\"message\": \"success\"}))\n    response.headers[\"X-Custom-Header\"] = \"value\"\n    return response\n</code></pre>"},{"location":"frameworks/flask/#flask-sessions","title":"Flask Sessions","text":"<pre><code>from flask import session\n\napp.secret_key = \"your-secret-key\"\n\n@router.post(\"/login\")\ndef login(username: str = Form(...), password: str = Form(...)):\n    if authenticate(username, password):\n        session[\"user_id\"] = get_user_id(username)\n        return {\"message\": \"Logged in\"}\n    raise AuthenticationError(\"Invalid credentials\")\n\n@router.get(\"/profile\")\ndef profile():\n    user_id = session.get(\"user_id\")\n    if not user_id:\n        raise AuthenticationError(\"Not logged in\")\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/flask/#flask-blueprints","title":"Flask Blueprints","text":"<p>You can use FastOpenAPI with Flask blueprints:</p> <pre><code>from flask import Blueprint\n\n# Create blueprint\napi_bp = Blueprint(\"api\", __name__, url_prefix=\"/api\")\n\n# Create router for blueprint\napi_router = FlaskRouter(app=api_bp)\n\n@api_router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\n# Register blueprint\napp.register_blueprint(api_bp)\n</code></pre>"},{"location":"frameworks/flask/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/flask/#using-flasks-abort","title":"Using Flask's abort","text":"<pre><code>from flask import abort\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    user = database.get(user_id)\n    if not user:\n        abort(404, description=\"User not found\")\n    return user\n</code></pre>"},{"location":"frameworks/flask/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import ResourceNotFoundError\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    item = database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n    return item\n</code></pre>"},{"location":"frameworks/flask/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/flask/#sqlalchemy","title":"SQLAlchemy","text":"<pre><code>from flask_sqlalchemy import SQLAlchemy\nfrom fastopenapi import Depends\n\napp.config[\"SQLALCHEMY_DATABASE_URI\"] = \"sqlite:///app.db\"\ndb = SQLAlchemy(app)\n\nclass User(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(100))\n\ndef get_db():\n    return db.session\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int, session = Depends(get_db)):\n    user = session.query(User).get(user_id)\n    if not user:\n        raise ResourceNotFoundError(\"User not found\")\n    return {\"id\": user.id, \"name\": user.name}\n</code></pre>"},{"location":"frameworks/flask/#authentication","title":"Authentication","text":""},{"location":"frameworks/flask/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom datetime import datetime, timedelta\nfrom fastopenapi import Depends, Security, Header\n\nSECRET_KEY = \"your-secret-key\"\n\ndef create_token(user_id: int) -&gt; str:\n    payload = {\n        \"user_id\": user_id,\n        \"exp\": datetime.utcnow() + timedelta(hours=24)\n    }\n    return jwt.encode(payload, SECRET_KEY, algorithm=\"HS256\")\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef get_current_user(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.post(\"/login\")\ndef login(username: str = Form(...), password: str = Form(...)):\n    user = authenticate_user(username, password)\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    token = create_token(user.id)\n    return {\"access_token\": token, \"token_type\": \"bearer\"}\n\n@router.get(\"/protected\")\ndef protected(user_id: int = Security(get_current_user)):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/flask/#cors","title":"CORS","text":"<p>Use Flask-CORS for CORS support:</p> <pre><code>from flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)  # Enable CORS for all routes\n\n# Or configure specific origins\nCORS(app, resources={\n    r\"/api/*\": {\n        \"origins\": [\"https://example.com\"],\n        \"methods\": [\"GET\", \"POST\"]\n    }\n})\n</code></pre>"},{"location":"frameworks/flask/#deployment","title":"Deployment","text":""},{"location":"frameworks/flask/#development-server","title":"Development Server","text":"<pre><code>if __name__ == \"__main__\":\n    app.run(debug=True, host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"frameworks/flask/#production-with-gunicorn","title":"Production with Gunicorn","text":"<pre><code>pip install gunicorn\ngunicorn -w 4 -b 0.0.0.0:8000 app:app\n</code></pre>"},{"location":"frameworks/flask/#production-with-uwsgi","title":"Production with uWSGI","text":"<pre><code>pip install uwsgi\nuwsgi --http :8000 --wsgi-file app.py --callable app --processes 4\n</code></pre>"},{"location":"frameworks/flask/#complete-example","title":"Complete Example","text":"<pre><code>from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import FlaskRouter\nfrom fastopenapi.errors import ResourceNotFoundError\n\n# Initialize Flask\napp = Flask(__name__)\napp.config[\"SQLALCHEMY_DATABASE_URI\"] = \"sqlite:///users.db\"\ndb = SQLAlchemy(app)\n\n# Initialize FastOpenAPI\nrouter = FlaskRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\",\n    description=\"Flask API with FastOpenAPI\"\n)\n\n# Database Model\nclass User(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(100), nullable=False)\n    email = db.Column(db.String(100), unique=True, nullable=False)\n\n# Pydantic Models\nclass UserCreate(BaseModel):\n    name: str\n    email: EmailStr\n\nclass UserResponse(BaseModel):\n    id: int\n    name: str\n    email: str\n\n# Routes\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse])\ndef list_users():\n    users = User.query.all()\n    return [{\"id\": u.id, \"name\": u.name, \"email\": u.email} for u in users]\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user = User.query.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return {\"id\": user.id, \"name\": user.name, \"email\": user.email}\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201)\ndef create_user(user: UserCreate):\n    new_user = User(name=user.name, email=user.email)\n    db.session.add(new_user)\n    db.session.commit()\n    return {\"id\": new_user.id, \"name\": new_user.name, \"email\": new_user.email}\n\n@router.delete(\"/users/{user_id}\", status_code=204)\ndef delete_user(user_id: int):\n    user = User.query.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    db.session.delete(user)\n    db.session.commit()\n    return None\n\n# Create tables\nwith app.app_context():\n    db.create_all()\n\nif __name__ == \"__main__\":\n    app.run(debug=True, port=8000)\n</code></pre>"},{"location":"frameworks/flask/#testing","title":"Testing","text":"<pre><code>import pytest\nfrom app import app\n\n@pytest.fixture\ndef client():\n    app.config[\"TESTING\"] = True\n    with app.test_client() as client:\n        yield client\n\ndef test_root(client):\n    response = client.get(\"/\")\n    assert response.status_code == 200\n    assert response.json[\"message\"] == \"User Management API\"\n\ndef test_create_user(client):\n    response = client.post(\"/users\", json={\n        \"name\": \"John Doe\",\n        \"email\": \"john@example.com\"\n    })\n    assert response.status_code == 201\n    assert response.json[\"name\"] == \"John Doe\"\n</code></pre>"},{"location":"frameworks/flask/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts - Understand FastOpenAPI</li> <li>User Guide - Learn all features</li> <li>Examples - See complete examples</li> </ul>"},{"location":"frameworks/overview/","title":"Framework Overview","text":"<p>FastOpenAPI supports 8 popular Python web frameworks. This guide helps you choose the right one for your project.</p>"},{"location":"frameworks/overview/#supported-frameworks","title":"Supported Frameworks","text":"Framework Async Python 3.10+ Best For Flask No Yes Traditional web apps, simple APIs Django Both Yes Full-featured web applications Starlette Yes Yes Modern async APIs, high performance Quart Yes Yes Async Flask alternative AIOHTTP Yes Yes Async HTTP client/server Sanic Yes Yes Speed-focused async framework Falcon Both Yes Minimalist APIs, microservices Tornado Yes Yes Long-lived connections, WebSockets"},{"location":"frameworks/overview/#quick-comparison","title":"Quick Comparison","text":""},{"location":"frameworks/overview/#flask","title":"Flask","text":"<p>Pros: - Most popular Python web framework - Large ecosystem and community - Easy to learn - Extensive documentation - Many extensions available</p> <p>Cons: - Synchronous (blocks on I/O) - Not ideal for high-concurrency scenarios - Less performant than async alternatives</p> <p>Use When: - You need maximum compatibility - Working with synchronous libraries - Building traditional web applications - Team is familiar with Flask</p> <p>Installation: <pre><code>pip install fastopenapi[flask]\n</code></pre></p>"},{"location":"frameworks/overview/#django","title":"Django","text":"<p>Pros: - Full-featured web framework - Built-in admin panel, ORM, authentication - Large community and ecosystem - Both sync and async support - Battle-tested in production</p> <p>Cons: - Heavyweight for simple APIs - Opinionated structure - Steeper learning curve</p> <p>Use When: - Building complex web applications - Need admin interface - Want built-in ORM and auth - Building content-heavy sites</p> <p>Installation: <pre><code>pip install fastopenapi[django]\n</code></pre></p>"},{"location":"frameworks/overview/#starlette","title":"Starlette","text":"<p>Pros: - Modern ASGI framework - High performance - Full async support - WebSocket support - FastAPI is built on Starlette</p> <p>Cons: - Smaller ecosystem than Flask/Django - Requires understanding of async/await - Less middleware/extensions available</p> <p>Use When: - Building modern async APIs - Need high performance - Want lightweight framework - Comfortable with async Python</p> <p>Installation: <pre><code>pip install fastopenapi[starlette]\n</code></pre></p>"},{"location":"frameworks/overview/#quart","title":"Quart","text":"<p>Pros: - Async version of Flask - Flask-compatible API - Easy migration from Flask - WebSocket support</p> <p>Cons: - Smaller ecosystem than Flask - Less mature than Flask - Some Flask extensions don't work</p> <p>Use When: - Migrating Flask app to async - Want Flask-like API with async - Need WebSocket support</p> <p>Installation: <pre><code>pip install fastopenapi[quart]\n</code></pre></p>"},{"location":"frameworks/overview/#aiohttp","title":"AIOHTTP","text":"<p>Pros: - Mature async framework - Both client and server - WebSocket support - Good for async networking</p> <p>Cons: - More verbose than others - Less intuitive routing - Smaller community</p> <p>Use When: - Need both HTTP client and server - Building async networking services - Working heavily with aiohttp ecosystem</p> <p>Installation: <pre><code>pip install fastopenapi[aiohttp]\n</code></pre></p>"},{"location":"frameworks/overview/#sanic","title":"Sanic","text":"<p>Pros: - Very fast (Flask-like API) - Built for speed - Good documentation - Active development</p> <p>Cons: - Not compatible with WSGI - Smaller ecosystem - Breaking changes between versions</p> <p>Use When: - Performance is critical - Want Flask-like async framework - Building high-throughput APIs</p> <p>Installation: <pre><code>pip install fastopenapi[sanic]\n</code></pre></p>"},{"location":"frameworks/overview/#falcon","title":"Falcon","text":"<p>Pros: - Extremely lightweight - Very fast - Minimalist design - Both WSGI and ASGI</p> <p>Cons: - Bare-bones (no built-in features) - Smaller community - Must add everything yourself</p> <p>Use When: - Building microservices - Need minimal overhead - Want maximum control - Performance is critical</p> <p>Installation: <pre><code>pip install fastopenapi[falcon]\n</code></pre></p>"},{"location":"frameworks/overview/#tornado","title":"Tornado","text":"<p>Pros: - Mature async framework - Excellent for WebSockets - Good for long-polling - Built-in WebSocket support</p> <p>Cons: - Older async model (pre async/await) - Less modern than Starlette/FastAPI - Smaller community now</p> <p>Use When: - Need WebSocket support - Building real-time applications - Legacy Tornado projects</p> <p>Installation: <pre><code>pip install fastopenapi[tornado]\n</code></pre></p>"},{"location":"frameworks/overview/#performance-comparison","title":"Performance Comparison","text":"<p>Approximate requests/second (higher is better):</p> <pre><code>Starlette:  ~20,000 req/s\nSanic:      ~18,000 req/s\nFalcon:     ~15,000 req/s (ASGI)\nAIOHTTP:    ~14,000 req/s\nQuart:      ~12,000 req/s\nTornado:    ~10,000 req/s\nFalcon:     ~8,000 req/s (WSGI)\nFlask:      ~5,000 req/s\nDjango:     ~3,000 req/s\n</code></pre> <p>Note: These are approximate and depend heavily on your specific use case.</p>"},{"location":"frameworks/overview/#sync-vs-async","title":"Sync vs Async","text":""},{"location":"frameworks/overview/#when-to-use-sync-flask-django-wsgi-falcon-wsgi","title":"When to Use Sync (Flask, Django WSGI, Falcon WSGI)","text":"<ul> <li>Working with synchronous libraries (psycopg2, etc.)</li> <li>Team unfamiliar with async/await</li> <li>Simple CRUD operations</li> <li>Traditional web applications</li> <li>Lower concurrency requirements</li> </ul>"},{"location":"frameworks/overview/#when-to-use-async-starlette-aiohttp-sanic-quart-tornado-django-asgi-falcon-asgi","title":"When to Use Async (Starlette, AIOHTTP, Sanic, Quart, Tornado, Django ASGI, Falcon ASGI)","text":"<ul> <li>High-concurrency requirements</li> <li>I/O-bound operations</li> <li>WebSocket support needed</li> <li>Working with async libraries</li> <li>Modern API development</li> </ul>"},{"location":"frameworks/overview/#migration-guide","title":"Migration Guide","text":""},{"location":"frameworks/overview/#from-flask-to-quart","title":"From Flask to Quart","text":"<p>Quart is designed to be Flask-compatible:</p> <pre><code># Flask\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef hello():\n    return {\"message\": \"Hello\"}\n\n# Quart (minimal changes)\nfrom quart import Quart\napp = Quart(__name__)\n\n@app.route(\"/\")\nasync def hello():  # Just add async\n    return {\"message\": \"Hello\"}\n</code></pre>"},{"location":"frameworks/overview/#from-flask-to-starlette","title":"From Flask to Starlette","text":"<pre><code># Flask\nfrom flask import Flask, jsonify\napp = Flask(__name__)\n\n@app.route(\"/items/&lt;int:item_id&gt;\")\ndef get_item(item_id):\n    return jsonify({\"item_id\": item_id})\n\n# Starlette\nfrom starlette.applications import Starlette\nfrom starlette.responses import JSONResponse\nfrom starlette.routing import Route\n\nasync def get_item(request):\n    item_id = request.path_params[\"item_id\"]\n    return JSONResponse({\"item_id\": item_id})\n\napp = Starlette(routes=[\n    Route(\"/items/{item_id:int}\", get_item)\n])\n</code></pre>"},{"location":"frameworks/overview/#from-django-views-to-fastopenapi","title":"From Django Views to FastOpenAPI","text":"<pre><code># Traditional Django view\nfrom django.http import JsonResponse\n\ndef get_user(request, user_id):\n    user = User.objects.get(id=user_id)\n    return JsonResponse({\n        \"id\": user.id,\n        \"name\": user.name\n    })\n\n# FastOpenAPI with Django\nfrom fastopenapi.routers import DjangoRouter\n\nrouter = DjangoRouter(app=True)\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    user = User.objects.get(id=user_id)\n    return {\"id\": user.id, \"name\": user.name}\n</code></pre>"},{"location":"frameworks/overview/#feature-matrix","title":"Feature Matrix","text":"Feature Flask Django Starlette Quart AIOHTTP Sanic Falcon Tornado Async No Yes* Yes Yes Yes Yes Yes* Yes WebSockets Extension Yes Yes Yes Yes Yes No Yes Built-in ORM No Yes No No No No No No Admin Panel No Yes No No No No No No File Upload Yes Yes Yes Yes Yes Yes Yes Yes Form Handling Extension Yes Yes Yes No Yes No Yes Session Management Extension Yes Middleware Extension No Extension No Yes Template Engine Jinja2 Django Templates Jinja2 Jinja2 Jinja2 Jinja2 No Native Deployment Sync Sync/Async Async Async Async Async Sync/Async Async <p>*Django and Falcon support both sync and async</p>"},{"location":"frameworks/overview/#choosing-your-framework","title":"Choosing Your Framework","text":""},{"location":"frameworks/overview/#for-beginners","title":"For Beginners","text":"<p>Start with Flask: - Easiest to learn - Best documentation - Largest community</p>"},{"location":"frameworks/overview/#for-production-apis","title":"For Production APIs","text":"<p>Choose Starlette or FastAPI: - Modern async support - High performance - Growing ecosystem</p>"},{"location":"frameworks/overview/#for-full-web-applications","title":"For Full Web Applications","text":"<p>Choose Django: - Complete solution - Built-in admin - Authentication, ORM included</p>"},{"location":"frameworks/overview/#for-maximum-performance","title":"For Maximum Performance","text":"<p>Choose Sanic or Starlette: - Highest throughput - Async from ground up - Optimized for speed</p>"},{"location":"frameworks/overview/#for-microservices","title":"For Microservices","text":"<p>Choose Falcon: - Minimal overhead - Very lightweight - Fast</p>"},{"location":"frameworks/overview/#framework-specific-examples","title":"Framework-Specific Examples","text":"<p>See detailed guides for each framework:</p> <ul> <li>Flask - Synchronous, traditional</li> <li>Django - Full-featured framework</li> <li>Starlette - Modern async</li> <li>Quart - Async Flask</li> <li>AIOHTTP - Async client/server</li> <li>Sanic - Fast async</li> <li>Falcon - Minimalist</li> <li>Tornado - Async networking</li> </ul>"},{"location":"frameworks/overview/#next-steps","title":"Next Steps","text":"<ol> <li>Choose a framework based on your needs</li> <li>Follow the framework-specific guide</li> <li>Check out examples for complete applications</li> <li>Read core concepts if you haven't</li> </ol>"},{"location":"frameworks/quart/","title":"Quart Integration","text":"<p>Quart is an async Python web framework with a Flask-compatible API. This guide shows how to use FastOpenAPI with Quart.</p>"},{"location":"frameworks/quart/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[quart]\n</code></pre>"},{"location":"frameworks/quart/#basic-setup","title":"Basic Setup","text":"<pre><code>from quart import Quart\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import QuartRouter\n\napp = Quart(__name__)\nrouter = QuartRouter(\n    app=app,\n    title=\"Quart API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Quart!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    app.run(port=8000)\n</code></pre>"},{"location":"frameworks/quart/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/quart/#request-data","title":"Request Data","text":""},{"location":"frameworks/quart/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\nasync def search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/quart/#request-body","title":"Request Body","text":"<pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    age: int\n\n@router.post(\"/users\", status_code=201)\nasync def create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/quart/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\nasync def login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    # Authenticate\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/quart/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content),\n        \"content_type\": file.content_type\n    }\n</code></pre>"},{"location":"frameworks/quart/#quart-specific-features","title":"Quart-Specific Features","text":""},{"location":"frameworks/quart/#using-quart-request","title":"Using Quart Request","text":"<pre><code>from quart import request\n\n@router.get(\"/request-info\")\nasync def get_request_info():\n    return {\n        \"method\": request.method,\n        \"path\": request.path,\n        \"remote_addr\": request.remote_addr,\n        \"user_agent\": request.user_agent.string\n    }\n</code></pre>"},{"location":"frameworks/quart/#using-quart-response","title":"Using Quart Response","text":"<pre><code>from quart import Response\n\n@router.get(\"/custom-response\")\nasync def custom_response():\n    return Response('{\"message\": \"custom\"}', mimetype=\"application/json\")\n</code></pre>"},{"location":"frameworks/quart/#sessions","title":"Sessions","text":"<pre><code>from quart import session\n\napp.secret_key = \"your-secret-key\"\n\n@router.post(\"/login\")\nasync def login(username: str = Form(...), password: str = Form(...)):\n    if authenticate(username, password):\n        session[\"user_id\"] = get_user_id(username)\n        return {\"message\": \"Logged in\"}\n    raise AuthenticationError(\"Invalid credentials\")\n\n@router.get(\"/profile\")\nasync def profile():\n    user_id = session.get(\"user_id\")\n    if not user_id:\n        raise AuthenticationError(\"Not logged in\")\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/quart/#blueprints","title":"Blueprints","text":"<pre><code>from quart import Blueprint\n\n# Create blueprint\napi_bp = Blueprint(\"api\", __name__, url_prefix=\"/api\")\n\n# Create router for blueprint\napi_router = QuartRouter(app=api_bp)\n\n@api_router.get(\"/items\")\nasync def list_items():\n    return {\"items\": []}\n\n# Register blueprint\napp.register_blueprint(api_bp)\n</code></pre>"},{"location":"frameworks/quart/#websocket-support","title":"WebSocket Support","text":"<pre><code>from quart import websocket\n\n@app.websocket('/ws')\nasync def ws():\n    while True:\n        data = await websocket.receive()\n        await websocket.send(f\"Echo: {data}\")\n</code></pre>"},{"location":"frameworks/quart/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/quart/#using-asyncpg-postgresql","title":"Using asyncpg (PostgreSQL)","text":"<pre><code>import asyncpg\n\nasync def get_db_pool():\n    return await asyncpg.create_pool(\n        \"postgresql://user:password@localhost/db\"\n    )\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    pool = await get_db_pool()\n    async with pool.acquire() as conn:\n        user = await conn.fetchrow(\n            \"SELECT * FROM users WHERE id = $1\", user_id\n        )\n        if not user:\n            raise ResourceNotFoundError(f\"User {user_id} not found\")\n        return dict(user)\n</code></pre>"},{"location":"frameworks/quart/#using-sqlalchemy-async","title":"Using SQLAlchemy (Async)","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nfrom fastopenapi import Depends\n\nengine = create_async_engine(\"postgresql+asyncpg://user:pass@localhost/db\")\nasync_session = sessionmaker(engine, class_=AsyncSession)\n\nasync def get_db():\n    async with async_session() as session:\n        yield session\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(User).where(User.id == user_id))\n    user = result.scalar_one_or_none()\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return {\"id\": user.id, \"username\": user.username}\n</code></pre>"},{"location":"frameworks/quart/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/quart/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError,\n    AuthenticationError\n)\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    item = await database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/quart/#using-quart-errors","title":"Using Quart Errors","text":"<pre><code>from quart import abort\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    item = await database.get(item_id)\n    if not item:\n        abort(404, description=\"Item not found\")\n    return item\n</code></pre>"},{"location":"frameworks/quart/#authentication","title":"Authentication","text":""},{"location":"frameworks/quart/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom datetime import datetime, timedelta\nfrom fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\ndef create_access_token(data: dict):\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(hours=24)\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef verify_token(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.post(\"/login\")\nasync def login(username: str = Form(...), password: str = Form(...)):\n    user = authenticate_user(username, password)\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    access_token = create_access_token(data={\"user_id\": str(user.id)})\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n\n@router.get(\"/protected\")\nasync def protected(user_id: str = Security(verify_token)):\n    return {\"user_id\": user_id, \"message\": \"Access granted\"}\n</code></pre>"},{"location":"frameworks/quart/#background-tasks","title":"Background Tasks","text":"<pre><code>import asyncio\n\n@router.post(\"/send-email\")\nasync def send_email(email: str = Form(...)):\n    # Start background task\n    asyncio.create_task(send_email_task(email))\n    return {\"message\": \"Email will be sent\"}\n\nasync def send_email_task(email: str):\n    await asyncio.sleep(1)  # Simulate sending\n    print(f\"Email sent to {email}\")\n</code></pre>"},{"location":"frameworks/quart/#cors","title":"CORS","text":"<p>Use Quart-CORS:</p> <pre><code>pip install quart-cors\n</code></pre> <pre><code>from quart_cors import cors\n\napp = Quart(__name__)\napp = cors(app, allow_origin=\"*\")\n\nrouter = QuartRouter(app=app)\n</code></pre>"},{"location":"frameworks/quart/#testing","title":"Testing","text":"<pre><code>import pytest\n\n@pytest.fixture\ndef app():\n    app = Quart(__name__)\n    router = QuartRouter(app=app)\n\n    @router.get(\"/\")\n    async def root():\n        return {\"message\": \"test\"}\n\n    return app\n\n@pytest.fixture\ndef client(app):\n    return app.test_client()\n\n@pytest.mark.asyncio\nasync def test_root(client):\n    response = await client.get('/')\n    assert response.status_code == 200\n    data = await response.get_json()\n    assert data[\"message\"] == \"test\"\n\n@pytest.mark.asyncio\nasync def test_create_item(client):\n    response = await client.post(\n        '/items',\n        json={\"name\": \"Test\", \"price\": 9.99}\n    )\n    assert response.status_code == 201\n</code></pre>"},{"location":"frameworks/quart/#complete-example","title":"Complete Example","text":"<pre><code>from quart import Quart\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import QuartRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\n\napp = Quart(__name__)\nrouter = QuartRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\"\n)\n\n# In-memory database\nusers_db = {}\nnext_id = 1\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n@router.get(\"/\", tags=[\"Root\"])\nasync def root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\nasync def list_users(limit: int = Query(10, ge=1, le=100)):\n    users = list(users_db.values())[:limit]\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\nasync def get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\nasync def create_user(user: UserCreate):\n    global next_id\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\nasync def delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    del users_db[user_id]\n    return None\n\nif __name__ == \"__main__\":\n    app.run(port=8000)\n</code></pre>"},{"location":"frameworks/quart/#deployment","title":"Deployment","text":""},{"location":"frameworks/quart/#development","title":"Development","text":"<pre><code>python main.py\n</code></pre> <p>Or use hypercorn:</p> <pre><code>pip install hypercorn\nhypercorn main:app --reload\n</code></pre>"},{"location":"frameworks/quart/#production","title":"Production","text":"<pre><code>hypercorn main:app --bind 0.0.0.0:8000 --workers 4\n</code></pre>"},{"location":"frameworks/quart/#migrating-from-flask","title":"Migrating from Flask","text":"<p>Quart is designed to be Flask-compatible:</p> <pre><code># Flask code\nfrom flask import Flask\n\n# Just change to Quart\nfrom quart import Quart\n\n# Add async to route handlers\n@router.get(\"/\")\nasync def root():  # Add async here\n    return {\"message\": \"Hello\"}\n</code></pre>"},{"location":"frameworks/quart/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts - Understand FastOpenAPI</li> <li>Async Patterns - Learn async patterns</li> <li>Dependencies - Use dependency injection</li> </ul>"},{"location":"frameworks/sanic/","title":"Sanic Integration","text":"<p>Sanic is a fast Python async web framework built for speed. This guide covers how to use FastOpenAPI with Sanic.</p>"},{"location":"frameworks/sanic/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[sanic]\n</code></pre>"},{"location":"frameworks/sanic/#basic-setup","title":"Basic Setup","text":"<pre><code>from sanic import Sanic\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import SanicRouter\n\napp = Sanic(\"MyAPI\")\nrouter = SanicRouter(\n    app=app,\n    title=\"Sanic API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Sanic!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"frameworks/sanic/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/sanic/#request-data","title":"Request Data","text":""},{"location":"frameworks/sanic/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\nasync def search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/sanic/#request-body","title":"Request Body","text":"<pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    age: int\n\n@router.post(\"/users\", status_code=201)\nasync def create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/sanic/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\nasync def login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/sanic/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"frameworks/sanic/#sanic-specific-features","title":"Sanic-Specific Features","text":""},{"location":"frameworks/sanic/#using-sanic-response","title":"Using Sanic Response","text":"<pre><code>from sanic import response\n\n@router.get(\"/custom-response\")\nasync def custom_response():\n    return response.json({\"message\": \"custom\"})\n</code></pre>"},{"location":"frameworks/sanic/#background-tasks","title":"Background Tasks","text":"<pre><code>from sanic import Sanic\n\n@router.post(\"/send-email\")\nasync def send_email(email: str = Form(...)):\n    # Add background task\n    app.add_task(send_email_task(email))\n    return {\"message\": \"Email will be sent\"}\n\nasync def send_email_task(email: str):\n    await asyncio.sleep(1)\n    print(f\"Email sent to {email}\")\n</code></pre>"},{"location":"frameworks/sanic/#middleware","title":"Middleware","text":"<pre><code>@app.middleware('request')\nasync def add_request_id(request):\n    request.ctx.request_id = str(uuid.uuid4())\n\n@app.middleware('response')\nasync def add_response_header(request, response):\n    response.headers[\"X-Request-ID\"] = request.ctx.request_id\n</code></pre>"},{"location":"frameworks/sanic/#listeners","title":"Listeners","text":"<pre><code>@app.before_server_start\nasync def setup_db(app, loop):\n    app.ctx.db = await create_db_pool()\n\n@app.after_server_stop\nasync def cleanup_db(app, loop):\n    await app.ctx.db.close()\n</code></pre>"},{"location":"frameworks/sanic/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/sanic/#using-asyncpg","title":"Using asyncpg","text":"<pre><code>import asyncpg\n\n@app.before_server_start\nasync def create_db_pool(app, loop):\n    app.ctx.db = await asyncpg.create_pool(\n        \"postgresql://user:password@localhost/db\"\n    )\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    async with app.ctx.db.acquire() as conn:\n        user = await conn.fetchrow(\n            \"SELECT * FROM users WHERE id = $1\", user_id\n        )\n        if not user:\n            raise ResourceNotFoundError(f\"User {user_id} not found\")\n        return dict(user)\n</code></pre>"},{"location":"frameworks/sanic/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/sanic/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError\n)\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    item = await database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/sanic/#using-sanic-errors","title":"Using Sanic Errors","text":"<pre><code>from sanic.exceptions import NotFound, ServerError\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    item = await database.get(item_id)\n    if not item:\n        raise NotFound(\"Item not found\")\n    return item\n</code></pre>"},{"location":"frameworks/sanic/#authentication","title":"Authentication","text":""},{"location":"frameworks/sanic/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef verify_token(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.get(\"/protected\")\nasync def protected(user_id: str = Security(verify_token)):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/sanic/#websocket-support","title":"WebSocket Support","text":"<pre><code>@app.websocket(\"/ws\")\nasync def websocket_handler(request, ws):\n    while True:\n        data = await ws.recv()\n        await ws.send(f\"Echo: {data}\")\n</code></pre>"},{"location":"frameworks/sanic/#testing","title":"Testing","text":"<pre><code>import pytest\n\n@pytest.fixture\ndef app():\n    app = Sanic(\"test\")\n    router = SanicRouter(app=app)\n\n    @router.get(\"/\")\n    async def root():\n        return {\"message\": \"test\"}\n\n    return app\n\ndef test_root(app):\n    _, response = app.test_client.get('/')\n    assert response.status == 200\n    assert response.json[\"message\"] == \"test\"\n\ndef test_create_item(app):\n    _, response = app.test_client.post(\n        '/items',\n        json={\"name\": \"Test\", \"price\": 9.99}\n    )\n    assert response.status == 201\n</code></pre>"},{"location":"frameworks/sanic/#complete-example","title":"Complete Example","text":"<pre><code>from sanic import Sanic\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import SanicRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\n\napp = Sanic(\"UserAPI\")\nrouter = SanicRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\"\n)\n\nusers_db = {}\nnext_id = 1\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n@router.get(\"/\", tags=[\"Root\"])\nasync def root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\nasync def list_users(limit: int = Query(10, ge=1, le=100)):\n    users = list(users_db.values())[:limit]\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\nasync def get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\nasync def create_user(user: UserCreate):\n    global next_id\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\nasync def delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    del users_db[user_id]\n    return None\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=8000, debug=True)\n</code></pre>"},{"location":"frameworks/sanic/#deployment","title":"Deployment","text":""},{"location":"frameworks/sanic/#development","title":"Development","text":"<pre><code>python main.py\n</code></pre>"},{"location":"frameworks/sanic/#production","title":"Production","text":"<pre><code>sanic main.app --host=0.0.0.0 --port=8000 --workers=4\n</code></pre> <p>Or with environment variables:</p> <pre><code>export SANIC_HOST=0.0.0.0\nexport SANIC_PORT=8000\nexport SANIC_WORKERS=4\nsanic main.app\n</code></pre>"},{"location":"frameworks/sanic/#performance","title":"Performance","text":"<p>Sanic is built for speed. Tips:</p> <ol> <li>Use workers - <code>--workers=N</code> for CPU-bound tasks</li> <li>Enable fast mode - <code>--fast</code> for production</li> <li>Use connection pooling for databases</li> <li>Profile with <code>sanic-testing</code></li> <li>Monitor with built-in statistics</li> </ol>"},{"location":"frameworks/sanic/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts</li> <li>Async Patterns</li> <li>Performance</li> </ul>"},{"location":"frameworks/starlette/","title":"Starlette Integration","text":"<p>Starlette is a lightweight ASGI framework that FastAPI is built upon. This guide covers how to use FastOpenAPI with Starlette.</p>"},{"location":"frameworks/starlette/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[starlette]\n</code></pre>"},{"location":"frameworks/starlette/#basic-setup","title":"Basic Setup","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import StarletteRouter\n\napp = Starlette()\nrouter = StarletteRouter(\n    app=app,\n    title=\"Starlette API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Starlette!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/starlette/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/starlette/#request-data","title":"Request Data","text":""},{"location":"frameworks/starlette/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\nasync def search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/starlette/#request-body","title":"Request Body","text":"<pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    age: int\n\n@router.post(\"/users\", status_code=201)\nasync def create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/starlette/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\nasync def login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/starlette/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"frameworks/starlette/#starlette-specific-features","title":"Starlette-Specific Features","text":""},{"location":"frameworks/starlette/#using-starlette-response","title":"Using Starlette Response","text":"<pre><code>from starlette.responses import JSONResponse, PlainTextResponse\n\n@router.get(\"/json-response\")\nasync def json_response():\n    return JSONResponse({\"message\": \"custom\"})\n\n@router.get(\"/text-response\")\nasync def text_response():\n    return PlainTextResponse(\"Hello, World!\")\n</code></pre>"},{"location":"frameworks/starlette/#streaming-response","title":"Streaming Response","text":"<pre><code>from starlette.responses import StreamingResponse\nimport asyncio\n\n@router.get(\"/stream\")\nasync def stream():\n    async def generate():\n        for i in range(10):\n            yield f\"data: {i}\\n\\n\"\n            await asyncio.sleep(1)\n\n    return StreamingResponse(generate(), media_type=\"text/event-stream\")\n</code></pre>"},{"location":"frameworks/starlette/#file-response","title":"File Response","text":"<pre><code>from starlette.responses import FileResponse\n\n@router.get(\"/download/{filename}\")\nasync def download_file(filename: str):\n    return FileResponse(\n        path=f\"/files/{filename}\",\n        filename=filename,\n        media_type=\"application/octet-stream\"\n    )\n</code></pre>"},{"location":"frameworks/starlette/#middleware","title":"Middleware","text":"<pre><code>from starlette.middleware import Middleware\nfrom starlette.middleware.cors import CORSMiddleware\nfrom starlette.middleware.trustedhost import TrustedHostMiddleware\n\nmiddleware = [\n    Middleware(\n        CORSMiddleware,\n        allow_origins=['*'],\n        allow_methods=['*'],\n        allow_headers=['*']\n    ),\n    Middleware(\n        TrustedHostMiddleware,\n        allowed_hosts=['example.com', '*.example.com']\n    )\n]\n\napp = Starlette(middleware=middleware)\nrouter = StarletteRouter(app=app)\n</code></pre>"},{"location":"frameworks/starlette/#background-tasks","title":"Background Tasks","text":"<pre><code>from starlette.background import BackgroundTask\n\n@router.post(\"/send-email\")\nasync def send_email(email: str = Form(...)):\n    task = BackgroundTask(send_email_task, email)\n    return JSONResponse(\n        {\"message\": \"Email will be sent\"},\n        background=task\n    )\n\nasync def send_email_task(email: str):\n    await asyncio.sleep(1)\n    print(f\"Email sent to {email}\")\n</code></pre>"},{"location":"frameworks/starlette/#lifespan-events","title":"Lifespan Events","text":"<pre><code>from contextlib import asynccontextmanager\n\n@asynccontextmanager\nasync def lifespan(app):\n    # Startup\n    print(\"Starting up...\")\n    app.state.db = await create_db_pool()\n    yield\n    # Shutdown\n    print(\"Shutting down...\")\n    await app.state.db.close()\n\napp = Starlette(lifespan=lifespan)\nrouter = StarletteRouter(app=app)\n</code></pre>"},{"location":"frameworks/starlette/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/starlette/#using-sqlalchemy-async","title":"Using SQLAlchemy (Async)","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nfrom fastopenapi import Depends\n\nengine = create_async_engine(\"postgresql+asyncpg://user:pass@localhost/db\")\nasync_session = sessionmaker(engine, class_=AsyncSession)\n\nasync def get_db():\n    async with async_session() as session:\n        yield session\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    from sqlalchemy import select\n    result = await db.execute(select(User).where(User.id == user_id))\n    user = result.scalar_one_or_none()\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return {\"id\": user.id, \"username\": user.username}\n</code></pre>"},{"location":"frameworks/starlette/#using-databases-library","title":"Using Databases Library","text":"<pre><code>import databases\n\ndatabase = databases.Database(\"postgresql://user:pass@localhost/db\")\n\n@app.on_event(\"startup\")\nasync def startup():\n    await database.connect()\n\n@app.on_event(\"shutdown\")\nasync def shutdown():\n    await database.disconnect()\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    query = \"SELECT * FROM users WHERE id = :user_id\"\n    user = await database.fetch_one(query, values={\"user_id\": user_id})\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return dict(user)\n</code></pre>"},{"location":"frameworks/starlette/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/starlette/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError\n)\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    item = await database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/starlette/#using-starlette-errors","title":"Using Starlette Errors","text":"<pre><code>from starlette.exceptions import HTTPException\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    item = await database.get(item_id)\n    if not item:\n        raise HTTPException(status_code=404, detail=\"Item not found\")\n    return item\n</code></pre>"},{"location":"frameworks/starlette/#custom-error-handler","title":"Custom Error Handler","text":"<pre><code>from starlette.exceptions import HTTPException\nfrom starlette.responses import JSONResponse\n\nasync def http_exception_handler(request, exc):\n    return JSONResponse(\n        {\n            \"error\": {\n                \"message\": exc.detail,\n                \"status\": exc.status_code\n            }\n        },\n        status_code=exc.status_code\n    )\n\napp.add_exception_handler(HTTPException, http_exception_handler)\n</code></pre>"},{"location":"frameworks/starlette/#authentication","title":"Authentication","text":""},{"location":"frameworks/starlette/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom datetime import datetime, timedelta\nfrom fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\ndef create_access_token(data: dict):\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(hours=24)\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef verify_token(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.post(\"/login\")\nasync def login(username: str = Form(...), password: str = Form(...)):\n    user = authenticate_user(username, password)\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    access_token = create_access_token(data={\"user_id\": str(user.id)})\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n\n@router.get(\"/protected\")\nasync def protected(user_id: str = Security(verify_token)):\n    return {\"user_id\": user_id, \"message\": \"Access granted\"}\n</code></pre>"},{"location":"frameworks/starlette/#websocket-support","title":"WebSocket Support","text":"<pre><code>from starlette.websockets import WebSocket\n\n@app.websocket_route('/ws')\nasync def websocket_endpoint(websocket: WebSocket):\n    await websocket.accept()\n    while True:\n        data = await websocket.receive_text()\n        await websocket.send_text(f\"Echo: {data}\")\n</code></pre>"},{"location":"frameworks/starlette/#testing","title":"Testing","text":"<pre><code>from starlette.testclient import TestClient\n\ndef test_root():\n    client = TestClient(app)\n    response = client.get('/')\n    assert response.status_code == 200\n    assert response.json()[\"message\"] == \"Hello from Starlette!\"\n\ndef test_create_item():\n    client = TestClient(app)\n    response = client.post(\n        '/items',\n        json={\"name\": \"Test\", \"price\": 9.99}\n    )\n    assert response.status_code == 201\n    assert response.json()[\"name\"] == \"Test\"\n</code></pre>"},{"location":"frameworks/starlette/#complete-example","title":"Complete Example","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import StarletteRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\n\napp = Starlette()\nrouter = StarletteRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\"\n)\n\nusers_db = {}\nnext_id = 1\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n@router.get(\"/\", tags=[\"Root\"])\nasync def root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\nasync def list_users(limit: int = Query(10, ge=1, le=100)):\n    users = list(users_db.values())[:limit]\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\nasync def get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\nasync def create_user(user: UserCreate):\n    global next_id\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\nasync def delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    del users_db[user_id]\n    return None\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"frameworks/starlette/#deployment","title":"Deployment","text":""},{"location":"frameworks/starlette/#development","title":"Development","text":"<pre><code>uvicorn main:app --reload\n</code></pre>"},{"location":"frameworks/starlette/#production","title":"Production","text":"<pre><code>uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4\n</code></pre> <p>Or with Gunicorn:</p> <pre><code>gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000\n</code></pre>"},{"location":"frameworks/starlette/#cors","title":"CORS","text":"<pre><code>from starlette.middleware.cors import CORSMiddleware\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n</code></pre>"},{"location":"frameworks/starlette/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts</li> <li>Async Patterns</li> <li>Performance</li> </ul>"},{"location":"frameworks/tornado/","title":"Tornado Integration","text":"<p>Tornado is a Python web framework and asynchronous networking library. This guide covers how to use FastOpenAPI with Tornado.</p>"},{"location":"frameworks/tornado/#installation","title":"Installation","text":"<pre><code>pip install fastopenapi[tornado]\n</code></pre>"},{"location":"frameworks/tornado/#basic-setup","title":"Basic Setup","text":"<pre><code>import asyncio\nfrom tornado.web import Application\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import TornadoRouter\n\napp = Application()\nrouter = TornadoRouter(\n    app=app,\n    title=\"Tornado API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Tornado!\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nasync def main():\n    app.listen(8000)\n    print(\"Server running on http://localhost:8000\")\n    await asyncio.Event().wait()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"frameworks/tornado/#path-parameters","title":"Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/tornado/#request-data","title":"Request Data","text":""},{"location":"frameworks/tornado/#query-parameters","title":"Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/search\")\nasync def search(\n    q: str = Query(..., description=\"Search query\"),\n    page: int = Query(1, ge=1)\n):\n    return {\"query\": q, \"page\": page}\n</code></pre>"},{"location":"frameworks/tornado/#request-body","title":"Request Body","text":"<pre><code>from pydantic import BaseModel, EmailStr\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n    age: int\n\n@router.post(\"/users\", status_code=201)\nasync def create_user(user: UserCreate):\n    return {\"username\": user.username, \"email\": user.email}\n</code></pre>"},{"location":"frameworks/tornado/#form-data","title":"Form Data","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\nasync def login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    return {\"username\": username}\n</code></pre>"},{"location":"frameworks/tornado/#file-upload","title":"File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"frameworks/tornado/#tornado-specific-features","title":"Tornado-Specific Features","text":""},{"location":"frameworks/tornado/#using-tornado-request-handler","title":"Using Tornado Request Handler","text":"<pre><code>from tornado.web import RequestHandler\n\n# You can still use traditional Tornado handlers alongside FastOpenAPI\nclass CustomHandler(RequestHandler):\n    def get(self):\n        self.write({\"message\": \"Traditional Tornado handler\"})\n\n# Add to app\napp.add_handlers(r\".*\", [(r\"/custom\", CustomHandler)])\n</code></pre>"},{"location":"frameworks/tornado/#asynchronous-operations","title":"Asynchronous Operations","text":"<pre><code>import asyncio\n\n@router.get(\"/slow\")\nasync def slow_endpoint():\n    # Simulate slow operation\n    await asyncio.sleep(2)\n    return {\"message\": \"Done\"}\n</code></pre>"},{"location":"frameworks/tornado/#background-tasks","title":"Background Tasks","text":"<pre><code>from tornado.ioloop import IOLoop\n\n@router.post(\"/send-email\")\nasync def send_email(email: str = Form(...)):\n    # Schedule background task\n    IOLoop.current().spawn_callback(send_email_task, email)\n    return {\"message\": \"Email will be sent\"}\n\nasync def send_email_task(email: str):\n    await asyncio.sleep(1)\n    print(f\"Email sent to {email}\")\n</code></pre>"},{"location":"frameworks/tornado/#database-integration","title":"Database Integration","text":""},{"location":"frameworks/tornado/#using-motor-mongodb","title":"Using Motor (MongoDB)","text":"<pre><code>from motor.motor_asyncio import AsyncIOMotorClient\n\nclient = AsyncIOMotorClient('mongodb://localhost:27017')\ndb = client.test_database\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: str):\n    user = await db.users.find_one({\"_id\": user_id})\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n</code></pre>"},{"location":"frameworks/tornado/#using-asyncpg-postgresql","title":"Using asyncpg (PostgreSQL)","text":"<pre><code>import asyncpg\n\n# Create connection pool at startup\nasync def create_pool():\n    return await asyncpg.create_pool(\n        \"postgresql://user:password@localhost/db\"\n    )\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    pool = await create_pool()\n    async with pool.acquire() as conn:\n        user = await conn.fetchrow(\n            \"SELECT * FROM users WHERE id = $1\", user_id\n        )\n        if not user:\n            raise ResourceNotFoundError(f\"User {user_id} not found\")\n        return dict(user)\n</code></pre>"},{"location":"frameworks/tornado/#error-handling","title":"Error Handling","text":""},{"location":"frameworks/tornado/#using-fastopenapi-errors","title":"Using FastOpenAPI Errors","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError\n)\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    if item_id &lt; 0:\n        raise BadRequestError(\"Item ID must be positive\")\n\n    item = await database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    return item\n</code></pre>"},{"location":"frameworks/tornado/#using-tornado-errors","title":"Using Tornado Errors","text":"<pre><code>from tornado.web import HTTPError\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    item = await database.get(item_id)\n    if not item:\n        raise HTTPError(status_code=404, reason=\"Item not found\")\n    return item\n</code></pre>"},{"location":"frameworks/tornado/#authentication","title":"Authentication","text":""},{"location":"frameworks/tornado/#jwt-authentication","title":"JWT Authentication","text":"<pre><code>import jwt\nfrom fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]\n\ndef verify_token(token: str = Depends(get_bearer_token)):\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload[\"user_id\"]\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.get(\"/protected\")\nasync def protected(user_id: str = Security(verify_token)):\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"frameworks/tornado/#websocket-support","title":"WebSocket Support","text":"<pre><code>from tornado.websocket import WebSocketHandler\n\nclass ChatWebSocket(WebSocketHandler):\n    def open(self):\n        print(\"WebSocket opened\")\n\n    def on_message(self, message):\n        self.write_message(f\"Echo: {message}\")\n\n    def on_close(self):\n        print(\"WebSocket closed\")\n\n# Add WebSocket handler\napp.add_handlers(r\".*\", [(r\"/ws\", ChatWebSocket)])\n</code></pre>"},{"location":"frameworks/tornado/#testing","title":"Testing","text":"<pre><code>import pytest\nfrom tornado.testing import AsyncHTTPTestCase\nfrom tornado.web import Application\n\nclass TestAPI(AsyncHTTPTestCase):\n    def get_app(self):\n        return app\n\n    def test_root(self):\n        response = self.fetch('/')\n        self.assertEqual(response.code, 200)\n        data = json.loads(response.body)\n        self.assertEqual(data[\"message\"], \"Hello from Tornado!\")\n\n    def test_create_item(self):\n        response = self.fetch(\n            '/items',\n            method='POST',\n            body=json.dumps({\"name\": \"Test\", \"price\": 9.99}),\n            headers={'Content-Type': 'application/json'}\n        )\n        self.assertEqual(response.code, 201)\n</code></pre>"},{"location":"frameworks/tornado/#complete-example","title":"Complete Example","text":"<pre><code>import asyncio\nfrom tornado.web import Application\nfrom pydantic import BaseModel, EmailStr\nfrom fastopenapi.routers import TornadoRouter\nfrom fastopenapi.errors import ResourceNotFoundError\nfrom fastopenapi import Query\n\napp = Application()\nrouter = TornadoRouter(\n    app=app,\n    title=\"User Management API\",\n    version=\"1.0.0\"\n)\n\nusers_db = {}\nnext_id = 1\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\nclass UserCreate(BaseModel):\n    username: str\n    email: EmailStr\n\n@router.get(\"/\", tags=[\"Root\"])\nasync def root():\n    return {\"message\": \"User Management API\"}\n\n@router.get(\"/users\", response_model=list[UserResponse], tags=[\"Users\"])\nasync def list_users(limit: int = Query(10, ge=1, le=100)):\n    users = list(users_db.values())[:limit]\n    return users\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse, tags=[\"Users\"])\nasync def get_user(user_id: int):\n    user = users_db.get(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n\n@router.post(\"/users\", response_model=UserResponse, status_code=201, tags=[\"Users\"])\nasync def create_user(user: UserCreate):\n    global next_id\n    new_user = {\n        \"id\": next_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n    users_db[next_id] = new_user\n    next_id += 1\n    return new_user\n\n@router.delete(\"/users/{user_id}\", status_code=204, tags=[\"Users\"])\nasync def delete_user(user_id: int):\n    if user_id not in users_db:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    del users_db[user_id]\n    return None\n\nasync def main():\n    app.listen(8000)\n    print(\"Server running on http://localhost:8000\")\n    print(\"Docs at http://localhost:8000/docs\")\n    await asyncio.Event().wait()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"frameworks/tornado/#deployment","title":"Deployment","text":""},{"location":"frameworks/tornado/#development","title":"Development","text":"<pre><code>python main.py\n</code></pre>"},{"location":"frameworks/tornado/#production","title":"Production","text":"<p>For production, use multiple processes:</p> <pre><code>import tornado.httpserver\nimport tornado.ioloop\n\nif __name__ == \"__main__\":\n    server = tornado.httpserver.HTTPServer(app)\n    server.bind(8000)\n    server.start(4)  # 4 processes\n    tornado.ioloop.IOLoop.current().start()\n</code></pre> <p>Or use supervisor/systemd to manage processes.</p>"},{"location":"frameworks/tornado/#configuration","title":"Configuration","text":""},{"location":"frameworks/tornado/#settings","title":"Settings","text":"<pre><code>from tornado.options import define, options\n\ndefine(\"port\", default=8000, help=\"run on the given port\", type=int)\ndefine(\"debug\", default=False, help=\"run in debug mode\", type=bool)\n\nasync def main():\n    tornado.options.parse_command_line()\n    app.listen(options.port)\n    print(f\"Server running on port {options.port}\")\n    await asyncio.Event().wait()\n</code></pre> <p>Run with: <pre><code>python main.py --port=8080 --debug=true\n</code></pre></p>"},{"location":"frameworks/tornado/#periodic-tasks","title":"Periodic Tasks","text":"<pre><code>from tornado.ioloop import PeriodicCallback\n\ndef periodic_task():\n    print(\"Running periodic task\")\n\n# Run every 60 seconds\nPeriodicCallback(periodic_task, 60000).start()\n</code></pre>"},{"location":"frameworks/tornado/#static-files","title":"Static Files","text":"<pre><code>import os\n\napp = Application(\n    router.routes,\n    static_path=os.path.join(os.path.dirname(__file__), \"static\"),\n    static_url_prefix=\"/static/\"\n)\n</code></pre>"},{"location":"frameworks/tornado/#templates","title":"Templates","text":"<pre><code>import os\n\napp = Application(\n    router.routes,\n    template_path=os.path.join(os.path.dirname(__file__), \"templates\")\n)\n\nfrom tornado.web import RequestHandler\n\nclass TemplateHandler(RequestHandler):\n    def get(self):\n        self.render(\"index.html\", title=\"My App\")\n\napp.add_handlers(r\".*\", [(r\"/\", TemplateHandler)])\n</code></pre>"},{"location":"frameworks/tornado/#security","title":"Security","text":""},{"location":"frameworks/tornado/#xsrf-protection","title":"XSRF Protection","text":"<pre><code>app = Application(\n    router.routes,\n    cookie_secret=\"your-secret-key\",\n    xsrf_cookies=True\n)\n</code></pre>"},{"location":"frameworks/tornado/#secure-cookies","title":"Secure Cookies","text":"<pre><code>from tornado.web import RequestHandler\n\nclass SecureHandler(RequestHandler):\n    def get(self):\n        self.set_secure_cookie(\"user\", \"username\")\n        self.write(\"Cookie set\")\n\n    def post(self):\n        user = self.get_secure_cookie(\"user\")\n        self.write(f\"User: {user}\")\n</code></pre>"},{"location":"frameworks/tornado/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts</li> <li>Async Patterns</li> <li>Performance</li> </ul>"},{"location":"getting_started/core_concepts/","title":"Core Concepts","text":"<p>This guide explains the fundamental concepts behind FastOpenAPI and how it works.</p>"},{"location":"getting_started/core_concepts/#what-is-openapi","title":"What is OpenAPI?","text":"<p>OpenAPI (formerly Swagger) is a specification for describing RESTful APIs. An OpenAPI document describes:</p> <ul> <li>Available endpoints (paths)</li> <li>HTTP methods for each endpoint (GET, POST, etc.)</li> <li>Request parameters (path, query, header, body)</li> <li>Response formats and status codes</li> <li>Authentication methods</li> <li>Data models and schemas</li> </ul> <p>OpenAPI documents are machine-readable, which enables:</p> <ul> <li>Automatic documentation generation - Tools like Swagger UI and ReDoc</li> <li>Code generation - Generate client libraries in multiple languages</li> <li>API validation - Ensure requests and responses match the specification</li> <li>Testing - Automated API testing tools</li> </ul>"},{"location":"getting_started/core_concepts/#how-fastopenapi-works","title":"How FastOpenAPI Works","text":"<p>FastOpenAPI acts as a bridge between your web framework and OpenAPI documentation:</p> <pre><code>Your Framework (Flask, Django, etc.)\n         |\n         v\n   FastOpenAPI Router\n    - Registers routes\n    - Validates requests\n    - Generates OpenAPI schema\n         |\n         v\n    Automatic Docs\n    (Swagger UI, ReDoc)\n</code></pre>"},{"location":"getting_started/core_concepts/#the-flow","title":"The Flow","text":"<ol> <li>You define routes using FastOpenAPI decorators</li> <li>FastOpenAPI registers routes with your framework</li> <li>When a request comes in, FastOpenAPI:</li> <li>Extracts parameters from the request</li> <li>Validates them against Pydantic models</li> <li>Calls your endpoint function</li> <li>Validates and serializes the response</li> <li>OpenAPI schema is generated from your route definitions</li> <li>Documentation UIs consume the schema to create interactive docs</li> </ol>"},{"location":"getting_started/core_concepts/#key-components","title":"Key Components","text":""},{"location":"getting_started/core_concepts/#1-router","title":"1. Router","text":"<p>The router is the main interface to FastOpenAPI. Each framework has its own router class:</p> <pre><code>from fastopenapi.routers import FlaskRouter\n\nrouter = FlaskRouter(\n    app=app,                    # Your framework's app instance\n    title=\"My API\",             # API title for docs\n    version=\"1.0.0\",            # API version\n    description=\"API docs\",     # Description\n    docs_url=\"/docs\",           # Swagger UI URL\n    redoc_url=\"/redoc\",         # ReDoc URL\n    openapi_url=\"/openapi.json\" # OpenAPI schema URL\n)\n</code></pre> <p>The router provides decorators for defining routes:</p> <pre><code>@router.get(\"/items/{item_id}\")\n@router.post(\"/items\")\n@router.put(\"/items/{item_id}\")\n@router.patch(\"/items/{item_id}\")\n@router.delete(\"/items/{item_id}\")\n</code></pre>"},{"location":"getting_started/core_concepts/#2-request-parameters","title":"2. Request Parameters","text":"<p>FastOpenAPI uses special classes to define where parameters come from:</p> <pre><code>from fastopenapi import Query, Path, Header, Cookie, Body\n\n@router.get(\"/items/{item_id}\")\ndef get_item(\n    item_id: int = Path(..., description=\"The item ID\"),\n    search: str = Query(None, description=\"Search query\"),\n    user_agent: str = Header(None, alias=\"User-Agent\")\n):\n    return {\"item_id\": item_id, \"search\": search}\n</code></pre> <p>Parameter Types:</p> <ul> <li><code>Path(...)</code> - From URL path (<code>/items/{item_id}</code>)</li> <li><code>Query(...)</code> - From query string (<code>?search=value</code>)</li> <li><code>Header(...)</code> - From HTTP headers</li> <li><code>Cookie(...)</code> - From cookies</li> <li><code>Body(...)</code> - From request body (JSON, form, etc.)</li> </ul>"},{"location":"getting_started/core_concepts/#3-pydantic-models","title":"3. Pydantic Models","text":"<p>Pydantic is used for:</p> <ul> <li>Request body validation</li> <li>Response serialization</li> <li>Automatic JSON Schema generation</li> </ul> <pre><code>from pydantic import BaseModel, Field\n\nclass Item(BaseModel):\n    name: str = Field(..., description=\"Item name\")\n    price: float = Field(..., gt=0, description=\"Price must be positive\")\n    description: str | None = None\n\n@router.post(\"/items\", response_model=Item)\ndef create_item(item: Item = Body(...)):\n    # item is already validated\n    return item\n</code></pre> <p>Benefits:</p> <ul> <li>Type safety - Python type hints enforced at runtime</li> <li>Automatic validation - Invalid data returns 422 error with details</li> <li>Data coercion - Strings converted to ints, floats, etc.</li> <li>Schema generation - JSON Schema created automatically</li> </ul>"},{"location":"getting_started/core_concepts/#4-response-models","title":"4. Response Models","text":"<p>Response models ensure your endpoints return the correct structure:</p> <pre><code>class UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user = database.get_user(user_id)\n    # Response is validated against UserResponse\n    return user\n</code></pre> <p>What happens:</p> <ol> <li>Your function returns data (dict, model instance, etc.)</li> <li>FastOpenAPI validates it against <code>response_model</code></li> <li>Invalid responses raise <code>InternalServerError</code> (500)</li> <li>Valid responses are serialized to JSON</li> </ol>"},{"location":"getting_started/core_concepts/#5-status-codes","title":"5. Status Codes","text":"<p>Specify the success status code for each endpoint:</p> <pre><code>@router.post(\"/items\", status_code=201)  # Created\ndef create_item(item: Item):\n    return item\n\n@router.delete(\"/items/{item_id}\", status_code=204)  # No Content\ndef delete_item(item_id: int):\n    database.delete(item_id)\n    return None\n</code></pre> <p>Common status codes:</p> <ul> <li><code>200</code> - OK (default)</li> <li><code>201</code> - Created (for POST)</li> <li><code>204</code> - No Content (for DELETE)</li> <li><code>400</code> - Bad Request</li> <li><code>401</code> - Unauthorized</li> <li><code>403</code> - Forbidden</li> <li><code>404</code> - Not Found</li> <li><code>422</code> - Validation Error</li> </ul>"},{"location":"getting_started/core_concepts/#6-tags","title":"6. Tags","text":"<p>Group endpoints in the documentation:</p> <pre><code>@router.get(\"/users\", tags=[\"Users\"])\ndef list_users():\n    return []\n\n@router.get(\"/items\", tags=[\"Items\"])\ndef list_items():\n    return []\n</code></pre> <p>Tags appear as sections in Swagger UI and ReDoc.</p>"},{"location":"getting_started/core_concepts/#request-lifecycle","title":"Request Lifecycle","text":"<p>Let's follow a request through FastOpenAPI:</p> <pre><code>@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(\n    item: Item = Body(...),\n    api_key: str = Header(..., alias=\"X-API-Key\")\n):\n    return item\n</code></pre> <p>1. Request arrives: <pre><code>POST /items HTTP/1.1\nX-API-Key: secret123\nContent-Type: application/json\n\n{\"name\": \"Widget\", \"price\": 9.99}\n</code></pre></p> <p>2. Framework routes to FastOpenAPI handler</p> <p>3. FastOpenAPI extracts parameters: - Body: <code>{\"name\": \"Widget\", \"price\": 9.99}</code> - Header: <code>X-API-Key: secret123</code></p> <p>4. Validation: - Body validated against <code>Item</code> model - Header validated as string - If invalid, returns 422 error immediately</p> <p>5. Your function is called: <pre><code>create_item(\n    item=Item(name=\"Widget\", price=9.99),\n    api_key=\"secret123\"\n)\n</code></pre></p> <p>6. Response validation: - Return value validated against <code>Item</code> model - If invalid, returns 500 error</p> <p>7. Serialization: - Model converted to dict - Dict converted to JSON</p> <p>8. HTTP response: <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\n\n{\"name\": \"Widget\", \"price\": 9.99, \"description\": null}\n</code></pre></p>"},{"location":"getting_started/core_concepts/#validation-errors","title":"Validation Errors","text":"<p>When validation fails, FastOpenAPI returns a detailed error:</p> <p>Invalid request: <pre><code>POST /items\n{\"name\": \"Widget\", \"price\": -5}\n</code></pre></p> <p>Error response: <pre><code>HTTP/1.1 422 Unprocessable Entity\n\n{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error\",\n    \"status\": 422,\n    \"details\": [\n      {\n        \"loc\": [\"price\"],\n        \"msg\": \"Input should be greater than 0\",\n        \"type\": \"greater_than\"\n      }\n    ]\n  }\n}\n</code></pre></p>"},{"location":"getting_started/core_concepts/#error-handling","title":"Error Handling","text":"<p>FastOpenAPI provides standard exception classes:</p> <pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    ResourceNotFoundError,\n    AuthorizationError\n)\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    item = database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n    return item\n</code></pre> <p>Built-in exceptions:</p> <ul> <li><code>BadRequestError</code> - 400</li> <li><code>AuthenticationError</code> - 401</li> <li><code>AuthorizationError</code> - 403</li> <li><code>ResourceNotFoundError</code> - 404</li> <li><code>ResourceConflictError</code> - 409</li> <li><code>ValidationError</code> - 422</li> <li><code>InternalServerError</code> - 500</li> <li><code>ServiceUnavailableError</code> - 503</li> </ul>"},{"location":"getting_started/core_concepts/#framework-agnostic-design","title":"Framework-Agnostic Design","text":"<p>FastOpenAPI is designed to work with multiple frameworks by:</p> <ol> <li>Abstracting request/response handling</li> <li>Each framework has an adapter</li> <li> <p>Adapters convert framework-specific objects to unified types</p> </li> <li> <p>Using Pydantic for validation</p> </li> <li>Framework-independent validation logic</li> <li> <p>Same validation behavior across all frameworks</p> </li> <li> <p>Generating standard OpenAPI</p> </li> <li>OpenAPI schema is framework-agnostic</li> <li>Same documentation regardless of framework</li> </ol> <p>This means you can:</p> <ul> <li>Switch frameworks with minimal code changes</li> <li>Use the same skills across different projects</li> <li>Build libraries that support multiple frameworks</li> </ul>"},{"location":"getting_started/core_concepts/#sync-vs-async","title":"Sync vs Async","text":"<p>Some frameworks are synchronous (Flask, Django WSGI), others are asynchronous (Starlette, AIOHTTP).</p> <p>Synchronous example (Flask): <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n</code></pre></p> <p>Asynchronous example (Starlette): <pre><code>@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    await asyncio.sleep(0.1)  # Some async operation\n    return {\"item_id\": item_id}\n</code></pre></p> <p>FastOpenAPI handles both automatically:</p> <ul> <li>Sync routers call functions normally</li> <li>Async routers await async functions</li> <li>Mixing sync/async incorrectly raises an error</li> </ul>"},{"location":"getting_started/core_concepts/#comparison-with-fastapi","title":"Comparison with FastAPI","text":"Feature FastAPI FastOpenAPI Framework Complete framework Library for existing frameworks Routing Built-in Integrates with framework routing Validation Pydantic v2 Pydantic v2 OpenAPI Auto-generated Auto-generated Async ASGI only Sync and async Dependencies Built-in DI Built-in DI (new in 1.0) Learning curve Moderate Low (if you know the framework) Best for New projects Existing projects, multi-framework"},{"location":"getting_started/core_concepts/#next-steps","title":"Next Steps","text":"<p>Now that you understand the concepts, learn how to use them:</p> <ul> <li>Routing - Define endpoints and HTTP methods</li> <li>Request Parameters - Path, query, header parameters</li> <li>Request Body - JSON, forms, files</li> <li>Validation - Deep dive into Pydantic</li> <li>Dependencies - Dependency injection system</li> <li>Security - Authentication and authorization</li> </ul>"},{"location":"getting_started/installation/","title":"Installation","text":"<p>FastOpenAPI is available on PyPI and supports Python 3.10 and above.</p>"},{"location":"getting_started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+ - Required for modern type hints and Pydantic v2 support</li> <li>Pydantic v2 - Automatically installed as a dependency</li> <li>(Optional) A web framework - Install separately or use extras</li> </ul>"},{"location":"getting_started/installation/#basic-installation","title":"Basic Installation","text":"<p>Install FastOpenAPI using pip:</p> <pre><code>pip install fastopenapi\n</code></pre> <p>This installs the core library with Pydantic v2. You'll need to install your web framework separately if you don't have it already.</p>"},{"location":"getting_started/installation/#installation-with-framework-extras","title":"Installation with Framework Extras","text":"<p>To install FastOpenAPI along with a specific framework, use one of the following extras:</p>"},{"location":"getting_started/installation/#aiohttp","title":"AIOHTTP","text":"<pre><code>pip install fastopenapi[aiohttp]\n</code></pre> <p>Installs FastOpenAPI with aiohttp.</p>"},{"location":"getting_started/installation/#django","title":"Django","text":"<pre><code>pip install fastopenapi[django]\n</code></pre> <p>Installs FastOpenAPI with Django.</p>"},{"location":"getting_started/installation/#falcon","title":"Falcon","text":"<pre><code>pip install fastopenapi[falcon]\n</code></pre> <p>Installs FastOpenAPI with Falcon (ASGI/WSGI support).</p>"},{"location":"getting_started/installation/#flask","title":"Flask","text":"<pre><code>pip install fastopenapi[flask]\n</code></pre> <p>Installs FastOpenAPI with Flask.</p>"},{"location":"getting_started/installation/#quart","title":"Quart","text":"<pre><code>pip install fastopenapi[quart]\n</code></pre> <p>Installs FastOpenAPI with Quart (async Flask alternative).</p>"},{"location":"getting_started/installation/#sanic","title":"Sanic","text":"<pre><code>pip install fastopenapi[sanic]\n</code></pre> <p>Installs FastOpenAPI with Sanic.</p>"},{"location":"getting_started/installation/#starlette","title":"Starlette","text":"<pre><code>pip install fastopenapi[starlette]\n</code></pre> <p>Installs FastOpenAPI with Starlette.</p>"},{"location":"getting_started/installation/#tornado","title":"Tornado","text":"<pre><code>pip install fastopenapi[tornado]\n</code></pre> <p>Installs FastOpenAPI with Tornado.</p>"},{"location":"getting_started/installation/#installing-multiple-frameworks","title":"Installing Multiple Frameworks","text":"<p>If you need to work with multiple frameworks (e.g., for testing or library development), you can install multiple extras:</p> <pre><code>pip install fastopenapi[flask,starlette,django]\n</code></pre>"},{"location":"getting_started/installation/#development-installation","title":"Development Installation","text":"<p>To contribute to FastOpenAPI or run tests, clone the repository and install in development mode:</p> <pre><code>git clone https://github.com/mr-fatalyst/fastopenapi.git\ncd fastopenapi\npoetry install --all-extras\n</code></pre> <p>This installs FastOpenAPI with all development dependencies and framework extras.</p>"},{"location":"getting_started/installation/#verifying-installation","title":"Verifying Installation","text":"<p>After installation, verify that FastOpenAPI is correctly installed:</p> <pre><code>import fastopenapi\nprint(fastopenapi.__version__)\n</code></pre> <p>You should see the version number (e.g., <code>1.0.0b1</code>).</p>"},{"location":"getting_started/installation/#upgrading","title":"Upgrading","text":"<p>To upgrade FastOpenAPI to the latest version:</p> <pre><code>pip install --upgrade fastopenapi\n</code></pre> <p>To upgrade with extras:</p> <pre><code>pip install --upgrade fastopenapi[flask]\n</code></pre>"},{"location":"getting_started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting_started/installation/#importerror-for-a-specific-framework","title":"ImportError for a specific framework","text":"<p>If you get an <code>ImportError</code> when trying to use a specific router:</p> <pre><code>from fastopenapi.routers import FlaskRouter\n# ImportError: This framework is not installed.\n</code></pre> <p>Solution: Install the framework extra:</p> <pre><code>pip install fastopenapi[flask]\n</code></pre> <p>Or install the framework separately:</p> <pre><code>pip install flask\n</code></pre>"},{"location":"getting_started/installation/#pydantic-v1-vs-v2","title":"Pydantic v1 vs v2","text":"<p>FastOpenAPI requires Pydantic v2. If you have Pydantic v1 installed, you may encounter compatibility issues.</p> <p>Check your Pydantic version:</p> <pre><code>pip show pydantic\n</code></pre> <p>Upgrade to Pydantic v2:</p> <pre><code>pip install --upgrade \"pydantic&gt;=2.0\"\n</code></pre>"},{"location":"getting_started/installation/#python-version-issues","title":"Python Version Issues","text":"<p>FastOpenAPI requires Python 3.10 or higher. Check your Python version:</p> <pre><code>python --version\n</code></pre> <p>If you have an older version, consider using pyenv to manage multiple Python versions.</p>"},{"location":"getting_started/installation/#next-steps","title":"Next Steps","text":"<p>Now that FastOpenAPI is installed, continue to:</p> <ul> <li>Quickstart - Build your first API</li> <li>Core Concepts - Understand the fundamentals</li> <li>Framework Guides - Choose your framework</li> </ul>"},{"location":"getting_started/quickstart/","title":"Quickstart","text":"<p>This quickstart guide will help you create your first FastOpenAPI application in just a few minutes.</p>"},{"location":"getting_started/quickstart/#choose-your-framework","title":"Choose Your Framework","text":"<p>Select your preferred framework to see a working example:</p> <ul> <li>Flask</li> <li>Starlette</li> <li>Django</li> <li>AIOHTTP</li> <li>Falcon</li> <li>Quart</li> <li>Sanic</li> <li>Tornado</li> </ul>"},{"location":"getting_started/quickstart/#flask-example","title":"Flask Example","text":""},{"location":"getting_started/quickstart/#step-1-install","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[flask]\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>from flask import Flask\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FlaskRouter\n\n# Create Flask app\napp = Flask(__name__)\n\n# Create FastOpenAPI router\nrouter = FlaskRouter(\n    app=app,\n    title=\"My Flask API\",\n    version=\"1.0.0\",\n    description=\"A simple API built with Flask and FastOpenAPI\"\n)\n\n# Define a Pydantic model\nclass Item(BaseModel):\n    name: str\n    price: float\n    description: str | None = None\n\n# Define routes\n@router.get(\"/\")\ndef root():\n    \"\"\"Root endpoint\"\"\"\n    return {\"message\": \"Hello from Flask!\"}\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    \"\"\"Get an item by ID\"\"\"\n    return {\"item_id\": item_id, \"name\": f\"Item {item_id}\"}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    \"\"\"Create a new item\"\"\"\n    return item\n\nif __name__ == \"__main__\":\n    app.run(port=8000, debug=True)\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#step-4-test","title":"Step 4: Test","text":"<p>Open your browser and visit:</p> <ul> <li>API: <code>http://localhost:8000/items/1</code></li> <li>Swagger UI: <code>http://localhost:8000/docs</code></li> <li>ReDoc: <code>http://localhost:8000/redoc</code></li> </ul>"},{"location":"getting_started/quickstart/#starlette-example","title":"Starlette Example","text":""},{"location":"getting_started/quickstart/#step-1-install_1","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[starlette] uvicorn\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_1","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>import uvicorn\nfrom starlette.applications import Starlette\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import StarletteRouter\n\n# Create Starlette app\napp = Starlette()\n\n# Create FastOpenAPI router\nrouter = StarletteRouter(\n    app=app,\n    title=\"My Starlette API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Starlette!\"}\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_1","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre> <p>Or use uvicorn directly:</p> <pre><code>uvicorn main:app --reload\n</code></pre>"},{"location":"getting_started/quickstart/#django-example","title":"Django Example","text":""},{"location":"getting_started/quickstart/#step-1-install_2","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[django]\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_2","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>from django.conf import settings\nfrom django.core.management import call_command\nfrom django.core.wsgi import get_wsgi_application\nfrom django.urls import path\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import DjangoRouter\n\n# Configure Django settings\nsettings.configure(\n    DEBUG=True,\n    SECRET_KEY=\"your-secret-key-here\",\n    ROOT_URLCONF=__name__,\n    ALLOWED_HOSTS=[\"*\"],\n)\n\n# Initialize Django\napplication = get_wsgi_application()\n\n# Create FastOpenAPI router\nrouter = DjangoRouter(\n    app=True,\n    title=\"My Django API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"Hello from Django!\"}\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\ndef create_item(item: Item):\n    return item\n\n# Django URL configuration\nurlpatterns = [\n    path(\"\", router.urls)\n]\n\nif __name__ == \"__main__\":\n    call_command(\"runserver\", \"8000\")\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_2","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#aiohttp-example","title":"AIOHTTP Example","text":""},{"location":"getting_started/quickstart/#step-1-install_3","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[aiohttp]\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_3","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>from aiohttp import web\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import AioHttpRouter\n\n# Create AIOHTTP app\napp = web.Application()\n\n# Create FastOpenAPI router\nrouter = AioHttpRouter(\n    app=app,\n    title=\"My AIOHTTP API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from AIOHTTP!\"}\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    web.run_app(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_3","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#falcon-example","title":"Falcon Example","text":""},{"location":"getting_started/quickstart/#step-1-install_4","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[falcon] uvicorn\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_4","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>import falcon.asgi\nimport uvicorn\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import FalconAsyncRouter\n\n# Create Falcon app\napp = falcon.asgi.App()\n\n# Create FastOpenAPI router\nrouter = FalconAsyncRouter(\n    app=app,\n    title=\"My Falcon API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Falcon!\"}\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_4","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#quart-example","title":"Quart Example","text":""},{"location":"getting_started/quickstart/#step-1-install_5","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[quart]\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_5","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>from quart import Quart\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import QuartRouter\n\n# Create Quart app\napp = Quart(__name__)\n\n# Create FastOpenAPI router\nrouter = QuartRouter(\n    app=app,\n    title=\"My Quart API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Quart!\"}\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    app.run(port=8000)\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_5","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#sanic-example","title":"Sanic Example","text":""},{"location":"getting_started/quickstart/#step-1-install_6","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[sanic]\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_6","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>from sanic import Sanic\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import SanicRouter\n\n# Create Sanic app\napp = Sanic(\"MyAPI\")\n\n# Create FastOpenAPI router\nrouter = SanicRouter(\n    app=app,\n    title=\"My Sanic API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Sanic!\"}\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\", port=8000)\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_6","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#tornado-example","title":"Tornado Example","text":""},{"location":"getting_started/quickstart/#step-1-install_7","title":"Step 1: Install","text":"<pre><code>pip install fastopenapi[tornado]\n</code></pre>"},{"location":"getting_started/quickstart/#step-2-create-mainpy_7","title":"Step 2: Create <code>main.py</code>","text":"<pre><code>import asyncio\nfrom tornado.web import Application\nfrom pydantic import BaseModel\nfrom fastopenapi.routers import TornadoRouter\n\n# Create Tornado app\napp = Application()\n\n# Create FastOpenAPI router\nrouter = TornadoRouter(\n    app=app,\n    title=\"My Tornado API\",\n    version=\"1.0.0\"\n)\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello from Tornado!\"}\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", response_model=Item, status_code=201)\nasync def create_item(item: Item):\n    return item\n\nasync def main():\n    app.listen(8000)\n    print(\"Server started on http://localhost:8000\")\n    print(\"Documentation at http://localhost:8000/docs\")\n    await asyncio.Event().wait()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"getting_started/quickstart/#step-3-run_7","title":"Step 3: Run","text":"<pre><code>python main.py\n</code></pre>"},{"location":"getting_started/quickstart/#testing-your-api","title":"Testing Your API","text":"<p>Once your server is running, you can test your API in several ways:</p>"},{"location":"getting_started/quickstart/#using-a-browser","title":"Using a Browser","text":"<p>Visit the documentation pages:</p> <ul> <li>Swagger UI: <code>http://localhost:8000/docs</code> - Interactive API testing</li> <li>ReDoc: <code>http://localhost:8000/redoc</code> - Clean, readable documentation</li> <li>OpenAPI JSON: <code>http://localhost:8000/openapi.json</code> - Raw OpenAPI schema</li> </ul>"},{"location":"getting_started/quickstart/#using-curl","title":"Using curl","text":"<pre><code># GET request\ncurl http://localhost:8000/items/1\n\n# POST request\ncurl -X POST http://localhost:8000/items \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Test Item\", \"price\": 9.99}'\n</code></pre>"},{"location":"getting_started/quickstart/#using-httpie","title":"Using httpie","text":"<pre><code># GET request\nhttp :8000/items/1\n\n# POST request\nhttp POST :8000/items name=\"Test Item\" price:=9.99\n</code></pre>"},{"location":"getting_started/quickstart/#using-python-requests","title":"Using Python requests","text":"<pre><code>import requests\n\n# GET request\nresponse = requests.get(\"http://localhost:8000/items/1\")\nprint(response.json())\n\n# POST request\nitem = {\"name\": \"Test Item\", \"price\": 9.99}\nresponse = requests.post(\"http://localhost:8000/items\", json=item)\nprint(response.json())\n</code></pre>"},{"location":"getting_started/quickstart/#whats-next","title":"What's Next?","text":"<p>Now that you have a working API, explore more features:</p> <ul> <li>Core Concepts - Understand how FastOpenAPI works</li> <li>Routing - Learn about HTTP methods and path parameters</li> <li>Request Parameters - Query, path, and header parameters</li> <li>Request Body - Handle JSON, forms, and file uploads</li> <li>Validation - Use Pydantic for robust validation</li> <li>Framework Guides - Framework-specific details</li> </ul>"},{"location":"getting_started/quickstart/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting_started/quickstart/#port-already-in-use","title":"Port Already in Use","text":"<p>If you get an error that port 8000 is already in use, change the port:</p> <pre><code># For Flask\napp.run(port=8001)\n\n# For Uvicorn-based frameworks\nuvicorn.run(app, port=8001)\n\n# For Tornado\napp.listen(8001)\n</code></pre>"},{"location":"getting_started/quickstart/#import-errors","title":"Import Errors","text":"<p>If you get an import error, make sure you installed the framework extra:</p> <pre><code>pip install fastopenapi[your-framework]\n</code></pre>"},{"location":"getting_started/quickstart/#module-not-found","title":"Module Not Found","text":"<p>If Python can't find your <code>main.py</code>, make sure you're in the correct directory:</p> <pre><code>cd /path/to/your/project\npython main.py\n</code></pre>"},{"location":"guide/dependencies/","title":"Dependencies","text":"<p>This guide covers the dependency injection system in FastOpenAPI.</p>"},{"location":"guide/dependencies/#what-are-dependencies","title":"What are Dependencies?","text":"<p>Dependencies are reusable functions that can be injected into your endpoints. They're useful for:</p> <ul> <li>Database connections</li> <li>Authentication</li> <li>Authorization</li> <li>Common parameters</li> <li>Shared business logic</li> </ul>"},{"location":"guide/dependencies/#basic-dependencies","title":"Basic Dependencies","text":""},{"location":"guide/dependencies/#simple-dependency","title":"Simple Dependency","text":"<pre><code>from fastopenapi import Depends, Query\n\ndef get_query_param(q: str = Query(None)):\n    return q or \"default\"\n\n@router.get(\"/search\")\ndef search(query: str = Depends(get_query_param)):\n    return {\"query\": query}\n</code></pre>"},{"location":"guide/dependencies/#dependency-with-logic","title":"Dependency with Logic","text":"<pre><code>from fastopenapi import Header\nfrom fastopenapi.errors import AuthenticationError\n\ndef get_current_user(token: str = Header(..., alias=\"Authorization\")):\n    if not token.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid token format\")\n\n    token_value = token[7:]  # Remove \"Bearer \"\n    user = validate_token(token_value)\n\n    if not user:\n        raise AuthenticationError(\"Invalid token\")\n\n    return user\n\n@router.get(\"/profile\")\ndef get_profile(user = Depends(get_current_user)):\n    return {\"user\": user}\n</code></pre>"},{"location":"guide/dependencies/#database-dependencies","title":"Database Dependencies","text":""},{"location":"guide/dependencies/#database-session","title":"Database Session","text":"<pre><code>from sqlalchemy.orm import Session\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int, db: Session = Depends(get_db)):\n    user = db.query(User).filter(User.id == user_id).first()\n    if not user:\n        raise ResourceNotFoundError(\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/dependencies/#async-database","title":"Async Database","text":"<pre><code>async def get_async_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int, db = Depends(get_async_db)):\n    result = await db.execute(select(User).where(User.id == user_id))\n    user = result.scalar_one_or_none()\n    if not user:\n        raise ResourceNotFoundError(\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/dependencies/#authentication-dependencies","title":"Authentication Dependencies","text":""},{"location":"guide/dependencies/#token-authentication","title":"Token Authentication","text":"<pre><code>def verify_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    token = authorization[7:]\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\n        return payload\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n\n@router.get(\"/protected\")\ndef protected_endpoint(payload = Depends(verify_token)):\n    return {\"user_id\": payload[\"user_id\"]}\n</code></pre>"},{"location":"guide/dependencies/#api-key-authentication","title":"API Key Authentication","text":"<pre><code>def verify_api_key(api_key: str = Header(..., alias=\"X-API-Key\")):\n    if api_key not in VALID_API_KEYS:\n        raise AuthenticationError(\"Invalid API key\")\n    return api_key\n\n@router.get(\"/data\")\ndef get_data(api_key: str = Depends(verify_api_key)):\n    return {\"data\": \"sensitive\"}\n</code></pre>"},{"location":"guide/dependencies/#current-user-dependency","title":"Current User Dependency","text":"<pre><code>class CurrentUser:\n    def __init__(self, user_id: int, username: str, roles: list[str]):\n        self.user_id = user_id\n        self.username = username\n        self.roles = roles\n\ndef get_current_user(token: str = Header(..., alias=\"Authorization\")) -&gt; CurrentUser:\n    payload = verify_token(token)\n    user = database.get_user(payload[\"user_id\"])\n    return CurrentUser(\n        user_id=user.id,\n        username=user.username,\n        roles=user.roles\n    )\n\n@router.get(\"/profile\")\ndef get_profile(current_user: CurrentUser = Depends(get_current_user)):\n    return {\n        \"user_id\": current_user.user_id,\n        \"username\": current_user.username\n    }\n</code></pre>"},{"location":"guide/dependencies/#authorization-dependencies","title":"Authorization Dependencies","text":""},{"location":"guide/dependencies/#role-based-access-control","title":"Role-Based Access Control","text":"<pre><code>def require_role(required_role: str):\n    def role_checker(current_user: CurrentUser = Depends(get_current_user)):\n        if required_role not in current_user.roles:\n            raise AuthorizationError(f\"Role '{required_role}' required\")\n        return current_user\n    return role_checker\n\n@router.get(\"/admin/users\")\ndef list_users(admin: CurrentUser = Depends(require_role(\"admin\"))):\n    return {\"users\": database.get_all_users()}\n</code></pre>"},{"location":"guide/dependencies/#permission-checker","title":"Permission Checker","text":"<pre><code>def has_permission(permission: str):\n    def permission_checker(current_user: CurrentUser = Depends(get_current_user)):\n        if not current_user.has_permission(permission):\n            raise AuthorizationError(f\"Permission '{permission}' required\")\n        return current_user\n    return permission_checker\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user(\n    user_id: int,\n    current_user: CurrentUser = Depends(has_permission(\"users:delete\"))\n):\n    database.delete_user(user_id)\n    return {\"deleted\": user_id}\n</code></pre>"},{"location":"guide/dependencies/#nested-dependencies","title":"Nested Dependencies","text":"<p>Dependencies can depend on other dependencies:</p> <pre><code>def get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\ndef get_current_user(\n    token: str = Header(..., alias=\"Authorization\"),\n    db: Session = Depends(get_db)\n):\n    payload = verify_token(token)\n    user = db.query(User).filter(User.id == payload[\"user_id\"]).first()\n    if not user:\n        raise AuthenticationError(\"User not found\")\n    return user\n\ndef require_admin(current_user: User = Depends(get_current_user)):\n    if not current_user.is_admin:\n        raise AuthorizationError(\"Admin access required\")\n    return current_user\n\n@router.get(\"/admin/stats\")\ndef admin_stats(admin: User = Depends(require_admin)):\n    return {\"stats\": get_admin_statistics()}\n</code></pre>"},{"location":"guide/dependencies/#class-based-dependencies","title":"Class-Based Dependencies","text":"<p>Use classes as dependencies:</p> <pre><code>class Pagination:\n    def __init__(\n        self,\n        page: int = Query(1, ge=1),\n        per_page: int = Query(20, ge=1, le=100)\n    ):\n        self.page = page\n        self.per_page = per_page\n        self.skip = (page - 1) * per_page\n\n@router.get(\"/items\")\ndef list_items(pagination: Pagination = Depends()):\n    items = database.get_items(\n        skip=pagination.skip,\n        limit=pagination.per_page\n    )\n    return {\"items\": items, \"page\": pagination.page}\n</code></pre>"},{"location":"guide/dependencies/#advanced-class-dependency","title":"Advanced Class Dependency","text":"<pre><code>class SearchParams:\n    def __init__(\n        self,\n        q: str = Query(None, description=\"Search query\"),\n        category: str = Query(None, description=\"Category filter\"),\n        min_price: float = Query(None, ge=0),\n        max_price: float = Query(None, ge=0),\n        sort: str = Query(\"created_at\", description=\"Sort field\"),\n        order: str = Query(\"desc\", pattern=\"^(asc|desc)$\")\n    ):\n        self.q = q\n        self.category = category\n        self.min_price = min_price\n        self.max_price = max_price\n        self.sort = sort\n        self.order = order\n\n    def to_filter(self):\n        filters = {}\n        if self.q:\n            filters[\"search\"] = self.q\n        if self.category:\n            filters[\"category\"] = self.category\n        if self.min_price is not None:\n            filters[\"min_price\"] = self.min_price\n        if self.max_price is not None:\n            filters[\"max_price\"] = self.max_price\n        return filters\n\n@router.get(\"/items\")\ndef search_items(search: SearchParams = Depends()):\n    items = database.search(\n        filters=search.to_filter(),\n        sort=search.sort,\n        order=search.order\n    )\n    return {\"items\": items}\n</code></pre>"},{"location":"guide/dependencies/#caching-dependencies","title":"Caching Dependencies","text":"<p>Dependencies are executed once per request by default:</p> <pre><code>def get_db():\n    print(\"Creating database connection\")\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        print(\"Closing database connection\")\n        db.close()\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int,\n    db1: Session = Depends(get_db),  # Same instance\n    db2: Session = Depends(get_db)   # Same instance\n):\n    # get_db() is called only once\n    assert db1 is db2\n    return {\"user_id\": user_id}\n</code></pre>"},{"location":"guide/dependencies/#global-dependencies","title":"Global Dependencies","text":"<p>Apply dependencies to all routes in a router:</p> <pre><code># This is conceptually shown - implementation may vary\nadmin_router = FlaskRouter()\n\n# All routes in admin_router require admin role\n@admin_router.get(\"/users\")\ndef list_users(admin: User = Depends(require_admin)):\n    return database.get_all_users()\n\n@admin_router.get(\"/stats\")\ndef get_stats(admin: User = Depends(require_admin)):\n    return get_statistics()\n\nmain_router.include_router(admin_router, prefix=\"/admin\")\n</code></pre>"},{"location":"guide/dependencies/#dependency-injection-patterns","title":"Dependency Injection Patterns","text":""},{"location":"guide/dependencies/#service-layer","title":"Service Layer","text":"<pre><code>class UserService:\n    def __init__(self, db: Session):\n        self.db = db\n\n    def get_user(self, user_id: int):\n        return self.db.query(User).filter(User.id == user_id).first()\n\n    def create_user(self, user_data: dict):\n        user = User(**user_data)\n        self.db.add(user)\n        self.db.commit()\n        return user\n\ndef get_user_service(db: Session = Depends(get_db)):\n    return UserService(db)\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int,\n    service: UserService = Depends(get_user_service)\n):\n    user = service.get_user(user_id)\n    if not user:\n        raise ResourceNotFoundError(\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/dependencies/#repository-pattern","title":"Repository Pattern","text":"<pre><code>class UserRepository:\n    def __init__(self, db: Session):\n        self.db = db\n\n    def find_by_id(self, user_id: int):\n        return self.db.query(User).filter(User.id == user_id).first()\n\n    def find_by_email(self, email: str):\n        return self.db.query(User).filter(User.email == email).first()\n\n    def save(self, user: User):\n        self.db.add(user)\n        self.db.commit()\n        return user\n\ndef get_user_repository(db: Session = Depends(get_db)):\n    return UserRepository(db)\n\n@router.get(\"/users/{user_id}\")\ndef get_user(\n    user_id: int,\n    repo: UserRepository = Depends(get_user_repository)\n):\n    user = repo.find_by_id(user_id)\n    if not user:\n        raise ResourceNotFoundError(\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/dependencies/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"guide/dependencies/#optional-dependencies","title":"Optional Dependencies","text":"<pre><code>def get_optional_token(authorization: str | None = Header(None, alias=\"Authorization\")):\n    if not authorization:\n        return None\n\n    if authorization.startswith(\"Bearer \"):\n        token = authorization[7:]\n        try:\n            return verify_token(token)\n        except:\n            return None\n    return None\n\n@router.get(\"/items\")\ndef list_items(user_id: int | None = Depends(get_optional_token)):\n    if user_id:\n        # Return personalized results\n        return get_personalized_items(user_id)\n    else:\n        # Return public results\n        return get_public_items()\n</code></pre>"},{"location":"guide/dependencies/#dependency-composition","title":"Dependency Composition","text":"<pre><code>def verify_user(current_user: User = Depends(get_current_user)):\n    if not current_user.is_verified:\n        raise AuthorizationError(\"Email verification required\")\n    return current_user\n\ndef verify_active(current_user: User = Depends(verify_user)):\n    if not current_user.is_active:\n        raise AuthorizationError(\"Account is not active\")\n    return current_user\n\n@router.post(\"/items\")\ndef create_item(\n    item: Item,\n    user: User = Depends(verify_active)  # Checks verified AND active\n):\n    return create_item_for_user(item, user)\n</code></pre>"},{"location":"guide/dependencies/#testing-with-dependencies","title":"Testing with Dependencies","text":"<p>For testing, create separate test dependencies and use them directly:</p> <pre><code># Production dependency\ndef get_db():\n    db = ProductionDatabase()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Test dependency\ndef get_test_db():\n    db = TestDatabase()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# In your test setup, create router with test dependencies\ndef test_get_user():\n    from myapp import create_app\n\n    # Create app with test configuration\n    app = create_app(testing=True)\n    client = app.test_client()\n\n    response = client.get(\"/users/1\")\n    assert response.status_code == 200\n</code></pre>"},{"location":"guide/dependencies/#mocking-dependencies","title":"Mocking Dependencies","text":"<p>Use <code>unittest.mock</code> for more control:</p> <pre><code>from unittest.mock import Mock, patch\n\ndef test_with_mocked_db():\n    mock_db = Mock()\n    mock_db.query.return_value.filter.return_value.first.return_value = {\n        \"id\": 1,\n        \"name\": \"Test User\"\n    }\n\n    with patch(\"myapp.dependencies.get_db\", return_value=mock_db):\n        response = client.get(\"/users/1\")\n        assert response.status_code == 200\n</code></pre>"},{"location":"guide/dependencies/#common-patterns","title":"Common Patterns","text":""},{"location":"guide/dependencies/#rate-limiting","title":"Rate Limiting","text":"<pre><code>from datetime import datetime, timedelta\n\nrate_limit_store = {}\n\ndef rate_limit(max_requests: int = 100, window: int = 3600):\n    def limiter(api_key: str = Header(..., alias=\"X-API-Key\")):\n        now = datetime.now()\n        key = f\"rate_limit:{api_key}\"\n\n        if key not in rate_limit_store:\n            rate_limit_store[key] = []\n\n        # Remove old requests\n        rate_limit_store[key] = [\n            req_time for req_time in rate_limit_store[key]\n            if now - req_time &lt; timedelta(seconds=window)\n        ]\n\n        # Check limit\n        if len(rate_limit_store[key]) &gt;= max_requests:\n            raise AuthorizationError(\"Rate limit exceeded\")\n\n        # Add current request\n        rate_limit_store[key].append(now)\n        return api_key\n\n    return limiter\n\n@router.get(\"/api/data\")\ndef get_data(api_key: str = Depends(rate_limit(max_requests=100))):\n    return {\"data\": \"...\"}\n</code></pre>"},{"location":"guide/dependencies/#request-id-tracking","title":"Request ID Tracking","text":"<pre><code>import uuid\n\ndef get_request_id(request_id: str | None = Header(None, alias=\"X-Request-ID\")):\n    if not request_id:\n        request_id = str(uuid.uuid4())\n    return request_id\n\n@router.get(\"/items\")\ndef list_items(request_id: str = Depends(get_request_id)):\n    logger.info(f\"Request {request_id}: Listing items\")\n    return {\"items\": [], \"request_id\": request_id}\n</code></pre>"},{"location":"guide/dependencies/#tenant-isolation","title":"Tenant Isolation","text":"<pre><code>def get_tenant(tenant_id: str = Header(..., alias=\"X-Tenant-ID\")):\n    tenant = database.get_tenant(tenant_id)\n    if not tenant:\n        raise AuthorizationError(\"Invalid tenant\")\n    return tenant\n\n@router.get(\"/items\")\ndef list_items(tenant = Depends(get_tenant)):\n    return database.get_items_for_tenant(tenant.id)\n</code></pre>"},{"location":"guide/dependencies/#best-practices","title":"Best Practices","text":""},{"location":"guide/dependencies/#1-keep-dependencies-focused","title":"1. Keep Dependencies Focused","text":"<pre><code># Good - single responsibility\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Avoid - doing too much\ndef get_db_and_user_and_validate():\n    db = SessionLocal()\n    user = get_user()\n    validate(user)\n    return db, user\n</code></pre>"},{"location":"guide/dependencies/#2-use-type-hints","title":"2. Use Type Hints","text":"<pre><code># Good\ndef get_current_user() -&gt; User:\n    ...\n\n# Avoid\ndef get_current_user():\n    ...\n</code></pre>"},{"location":"guide/dependencies/#3-handle-errors-properly","title":"3. Handle Errors Properly","text":"<pre><code># Good\ndef get_current_user(token: str = Header(...)):\n    try:\n        user = validate_token(token)\n        if not user:\n            raise AuthenticationError(\"Invalid token\")\n        return user\n    except Exception as e:\n        raise AuthenticationError(\"Authentication failed\")\n\n# Avoid - letting exceptions leak\ndef get_current_user(token: str = Header(...)):\n    return validate_token(token)  # May raise unexpected errors\n</code></pre>"},{"location":"guide/dependencies/#4-document-dependencies","title":"4. Document Dependencies","text":"<pre><code>def get_current_user(\n    authorization: str = Header(..., alias=\"Authorization\", description=\"Bearer token\")\n) -&gt; User:\n    \"\"\"\n    Get the currently authenticated user.\n\n    Raises:\n        AuthenticationError: If token is invalid or missing\n    \"\"\"\n    ...\n</code></pre>"},{"location":"guide/dependencies/#5-use-generators-for-cleanup","title":"5. Use Generators for Cleanup","text":"<pre><code># Good - proper cleanup\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Avoid - no cleanup\ndef get_db():\n    return SessionLocal()\n</code></pre>"},{"location":"guide/dependencies/#next-steps","title":"Next Steps","text":"<ul> <li>Security - Security-specific dependencies</li> <li>Error Handling - Handle dependency errors</li> <li>Testing - Test with dependencies</li> <li>Examples - Real-world examples</li> </ul>"},{"location":"guide/error_handling/","title":"Error Handling","text":"<p>This guide covers how to handle errors and exceptions in FastOpenAPI.</p>"},{"location":"guide/error_handling/#built-in-exceptions","title":"Built-in Exceptions","text":"<p>FastOpenAPI provides standard exception classes for common HTTP errors.</p>"},{"location":"guide/error_handling/#importing-exceptions","title":"Importing Exceptions","text":"<pre><code>from fastopenapi.errors import (\n    BadRequestError,\n    AuthenticationError,\n    AuthorizationError,\n    ResourceNotFoundError,\n    ResourceConflictError,\n    ValidationError,\n    InternalServerError,\n    ServiceUnavailableError\n)\n</code></pre>"},{"location":"guide/error_handling/#exception-classes","title":"Exception Classes","text":"Exception Status Code Use Case <code>BadRequestError</code> 400 Invalid request format <code>AuthenticationError</code> 401 Authentication required or failed <code>AuthorizationError</code> 403 User lacks permission <code>ResourceNotFoundError</code> 404 Resource doesn't exist <code>ResourceConflictError</code> 409 Resource conflict (duplicate, etc.) <code>ValidationError</code> 422 Request validation failed <code>InternalServerError</code> 500 Server error <code>ServiceUnavailableError</code> 503 Service temporarily unavailable"},{"location":"guide/error_handling/#basic-error-handling","title":"Basic Error Handling","text":""},{"location":"guide/error_handling/#raising-exceptions","title":"Raising Exceptions","text":"<pre><code>from fastopenapi.errors import ResourceNotFoundError\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    user = database.get_user(user_id)\n    if not user:\n        raise ResourceNotFoundError(f\"User {user_id} not found\")\n    return user\n</code></pre>"},{"location":"guide/error_handling/#with-custom-message","title":"With Custom Message","text":"<pre><code>from fastopenapi.errors import BadRequestError\n\n@router.post(\"/items\")\ndef create_item(item: Item):\n    if item.price &lt; 0:\n        raise BadRequestError(\"Price cannot be negative\")\n    return {\"item\": item}\n</code></pre>"},{"location":"guide/error_handling/#with-details","title":"With Details","text":"<pre><code>from fastopenapi.errors import ValidationError\n\n@router.post(\"/users\")\ndef create_user(user: UserCreate):\n    existing = database.get_user_by_email(user.email)\n    if existing:\n        raise ValidationError(\n            message=\"User already exists\",\n            details={\"email\": user.email, \"user_id\": existing.id}\n        )\n    return database.create_user(user)\n</code></pre>"},{"location":"guide/error_handling/#error-response-format","title":"Error Response Format","text":"<p>All errors return a standardized JSON format:</p> <pre><code>{\n  \"error\": {\n    \"type\": \"resource_not_found\",\n    \"message\": \"User 123 not found\",\n    \"status\": 404\n  }\n}\n</code></pre> <p>Note: The <code>details</code> field is only included when it has a truthy value. When no details are provided, the field is omitted entirely.</p>"},{"location":"guide/error_handling/#with-details_1","title":"With Details","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Error parsing parameter 'email'\",\n    \"status\": 422,\n    \"details\": \"Value is not a valid email address\"\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#validation-errors","title":"Validation Errors","text":"<p>Pydantic validation errors are automatically caught:</p>"},{"location":"guide/error_handling/#request-validation","title":"Request Validation","text":"<pre><code>class User(BaseModel):\n    name: str\n    age: int = Field(..., ge=0, le=120)\n    email: EmailStr\n\n@router.post(\"/users\")\ndef create_user(user: User):\n    return user\n</code></pre> <p>Invalid Request: <pre><code>POST /users\nContent-Type: application/json\n\n{\"name\": \"John\", \"age\": -5, \"email\": \"invalid\"}\n</code></pre></p> <p>Error Response: <pre><code>{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error for parameter 'age'\",\n    \"status\": 422,\n    \"details\": \"Input should be greater than or equal to 0 ...\"\n  }\n}\n</code></pre></p> <p>Note: The <code>details</code> field is a string representation of the Pydantic validation error message. If there are no details, the field is omitted entirely.</p>"},{"location":"guide/error_handling/#common-error-patterns","title":"Common Error Patterns","text":""},{"location":"guide/error_handling/#not-found-pattern","title":"Not Found Pattern","text":"<pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    item = database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n    return item\n</code></pre>"},{"location":"guide/error_handling/#authorization-pattern","title":"Authorization Pattern","text":"<pre><code>@router.delete(\"/items/{item_id}\")\ndef delete_item(\n    item_id: int,\n    current_user: User = Depends(get_current_user)\n):\n    item = database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n\n    if item.owner_id != current_user.id:\n        raise AuthorizationError(\"You don't own this item\")\n\n    database.delete(item_id)\n    return {\"deleted\": True}\n</code></pre>"},{"location":"guide/error_handling/#conflict-pattern","title":"Conflict Pattern","text":"<pre><code>@router.post(\"/users\")\ndef create_user(user: UserCreate):\n    existing = database.get_user_by_email(user.email)\n    if existing:\n        raise ResourceConflictError(f\"User with email {user.email} already exists\")\n\n    return database.create_user(user)\n</code></pre>"},{"location":"guide/error_handling/#bad-request-pattern","title":"Bad Request Pattern","text":"<pre><code>@router.post(\"/orders\")\ndef create_order(order: OrderCreate):\n    if not order.items:\n        raise BadRequestError(\"Order must contain at least one item\")\n\n    total = sum(item.price * item.quantity for item in order.items)\n    if total &lt;= 0:\n        raise BadRequestError(\"Order total must be positive\")\n\n    return database.create_order(order)\n</code></pre>"},{"location":"guide/error_handling/#framework-specific-exceptions","title":"Framework-Specific Exceptions","text":"<p>You can also use framework-specific exceptions:</p>"},{"location":"guide/error_handling/#flask","title":"Flask","text":"<pre><code>from flask import abort\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    user = database.get(user_id)\n    if not user:\n        abort(404, description=\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/error_handling/#django","title":"Django","text":"<pre><code>from django.http import Http404\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    user = database.get(user_id)\n    if not user:\n        raise Http404(\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/error_handling/#starlette","title":"Starlette","text":"<pre><code>from starlette.exceptions import HTTPException\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    user = await database.get(user_id)\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/error_handling/#falcon","title":"Falcon","text":"<pre><code>import falcon\n\n@router.get(\"/users/{user_id}\")\nasync def get_user(user_id: int):\n    user = await database.get(user_id)\n    if not user:\n        raise falcon.HTTPNotFound(description=\"User not found\")\n    return user\n</code></pre>"},{"location":"guide/error_handling/#try-except-blocks","title":"Try-Except Blocks","text":""},{"location":"guide/error_handling/#catching-specific-errors","title":"Catching Specific Errors","text":"<pre><code>@router.post(\"/items\")\ndef create_item(item: Item):\n    try:\n        result = database.create(item)\n        return result\n    except DatabaseConnectionError:\n        raise ServiceUnavailableError(\"Database temporarily unavailable\")\n    except DuplicateKeyError as e:\n        raise ResourceConflictError(f\"Item already exists: {e}\")\n</code></pre>"},{"location":"guide/error_handling/#generic-error-handling","title":"Generic Error Handling","text":"<pre><code>import logging\n\nlogger = logging.getLogger(__name__)\n\n@router.post(\"/process\")\ndef process_data(data: dict):\n    try:\n        result = complex_processing(data)\n        return result\n    except ValueError as e:\n        raise BadRequestError(f\"Invalid data: {str(e)}\")\n    except Exception as e:\n        logger.error(f\"Unexpected error: {str(e)}\", exc_info=True)\n        raise InternalServerError(\"An unexpected error occurred\")\n</code></pre>"},{"location":"guide/error_handling/#custom-error-responses","title":"Custom Error Responses","text":""},{"location":"guide/error_handling/#creating-custom-exceptions","title":"Creating Custom Exceptions","text":"<pre><code>from fastopenapi.errors import APIError\nfrom http import HTTPStatus\n\nclass PaymentRequiredError(APIError):\n    status_code = HTTPStatus.PAYMENT_REQUIRED\n    default_message = \"Payment required\"\n    error_type = \"payment_required\"\n\n@router.get(\"/premium-content\")\ndef get_premium_content(current_user: User = Depends(get_current_user)):\n    if not current_user.is_premium:\n        raise PaymentRequiredError(\"Premium subscription required\")\n    return {\"content\": \"premium data\"}\n</code></pre>"},{"location":"guide/error_handling/#custom-error-details","title":"Custom Error Details","text":"<pre><code>class InsufficientBalanceError(APIError):\n    status_code = HTTPStatus.PAYMENT_REQUIRED\n    default_message = \"Insufficient balance\"\n    error_type = \"insufficient_balance\"\n\n@router.post(\"/purchases\")\ndef create_purchase(purchase: Purchase, user: User = Depends(get_current_user)):\n    if user.balance &lt; purchase.amount:\n        raise InsufficientBalanceError(\n            message=f\"Insufficient balance. Required: {purchase.amount}, Available: {user.balance}\",\n            details={\n                \"required\": purchase.amount,\n                \"available\": user.balance,\n                \"shortfall\": purchase.amount - user.balance\n            }\n        )\n\n    return process_purchase(purchase, user)\n</code></pre>"},{"location":"guide/error_handling/#error-logging","title":"Error Logging","text":""},{"location":"guide/error_handling/#basic-logging","title":"Basic Logging","text":"<pre><code>import logging\n\nlogger = logging.getLogger(__name__)\n\n@router.post(\"/items\")\ndef create_item(item: Item):\n    try:\n        result = database.create(item)\n        return result\n    except Exception as e:\n        logger.error(f\"Failed to create item: {str(e)}\", exc_info=True)\n        raise InternalServerError(\"Failed to create item\")\n</code></pre>"},{"location":"guide/error_handling/#structured-logging","title":"Structured Logging","text":"<pre><code>import structlog\n\nlogger = structlog.get_logger()\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    try:\n        user = database.get(user_id)\n        if not user:\n            logger.warning(\"user_not_found\", user_id=user_id)\n            raise ResourceNotFoundError(f\"User {user_id} not found\")\n        return user\n    except Exception as e:\n        logger.error(\n            \"user_fetch_failed\",\n            user_id=user_id,\n            error=str(e),\n            exc_info=True\n        )\n        raise\n</code></pre>"},{"location":"guide/error_handling/#error-context","title":"Error Context","text":""},{"location":"guide/error_handling/#adding-request-context","title":"Adding Request Context","text":"<pre><code>from contextvars import ContextVar\n\nrequest_id_var: ContextVar[str] = ContextVar('request_id', default=None)\n\ndef get_request_id():\n    return request_id_var.get() or \"unknown\"\n\n@router.get(\"/items/{item_id}\")\ndef get_item(\n    item_id: int,\n    request_id: str = Header(..., alias=\"X-Request-ID\")\n):\n    request_id_var.set(request_id)\n\n    try:\n        item = database.get(item_id)\n        if not item:\n            raise ResourceNotFoundError(f\"Item {item_id} not found\")\n        return item\n    except Exception as e:\n        logger.error(\n            f\"Error processing request {get_request_id()}: {str(e)}\",\n            exc_info=True\n        )\n        raise\n</code></pre>"},{"location":"guide/error_handling/#validation-error-customization","title":"Validation Error Customization","text":""},{"location":"guide/error_handling/#custom-field-validators","title":"Custom Field Validators","text":"<pre><code>from pydantic import field_validator\n\nclass User(BaseModel):\n    username: str\n    age: int\n\n    @field_validator('username')\n    @classmethod\n    def username_valid(cls, v: str) -&gt; str:\n        if len(v) &lt; 3:\n            raise ValueError(\"Username must be at least 3 characters\")\n        if not v.isalnum():\n            raise ValueError(\"Username must be alphanumeric\")\n        return v\n\n    @field_validator('age')\n    @classmethod\n    def age_valid(cls, v: int) -&gt; int:\n        if v &lt; 13:\n            raise ValueError(\"Must be at least 13 years old\")\n        return v\n</code></pre> <p>Error Response: <pre><code>{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error\",\n    \"status\": 422,\n    \"details\": [\n      {\n        \"loc\": [\"body\", \"username\"],\n        \"msg\": \"Username must be alphanumeric\",\n        \"type\": \"value_error\"\n      }\n    ]\n  }\n}\n</code></pre></p>"},{"location":"guide/error_handling/#error-recovery","title":"Error Recovery","text":""},{"location":"guide/error_handling/#fallback-values","title":"Fallback Values","text":"<pre><code>@router.get(\"/config\")\ndef get_config():\n    try:\n        config = load_config_from_database()\n        return config\n    except DatabaseError:\n        logger.warning(\"Failed to load config from database, using defaults\")\n        return get_default_config()\n</code></pre>"},{"location":"guide/error_handling/#retry-logic","title":"Retry Logic","text":"<pre><code>from tenacity import retry, stop_after_attempt, wait_fixed\n\n@retry(stop=stop_after_attempt(3), wait=wait_fixed(1))\ndef fetch_external_data(url: str):\n    response = requests.get(url, timeout=5)\n    response.raise_for_status()\n    return response.json()\n\n@router.get(\"/external-data\")\ndef get_external_data():\n    try:\n        data = fetch_external_data(\"https://api.example.com/data\")\n        return data\n    except Exception as e:\n        logger.error(f\"Failed to fetch external data: {str(e)}\")\n        raise ServiceUnavailableError(\"External service unavailable\")\n</code></pre>"},{"location":"guide/error_handling/#partial-failure-handling","title":"Partial Failure Handling","text":""},{"location":"guide/error_handling/#batch-operations","title":"Batch Operations","text":"<pre><code>class BatchResult(BaseModel):\n    succeeded: list[int]\n    failed: list[dict]\n\n@router.post(\"/items/batch\", response_model=BatchResult)\ndef create_items_batch(items: list[Item]):\n    succeeded = []\n    failed = []\n\n    for idx, item in enumerate(items):\n        try:\n            result = database.create(item)\n            succeeded.append(result.id)\n        except Exception as e:\n            failed.append({\n                \"index\": idx,\n                \"item\": item.model_dump(),\n                \"error\": str(e)\n            })\n\n    return BatchResult(succeeded=succeeded, failed=failed)\n</code></pre>"},{"location":"guide/error_handling/#error-monitoring","title":"Error Monitoring","text":""},{"location":"guide/error_handling/#sentry-integration","title":"Sentry Integration","text":"<pre><code>import sentry_sdk\n\nsentry_sdk.init(dsn=\"your-sentry-dsn\")\n\n@router.post(\"/critical-operation\")\ndef critical_operation(data: dict):\n    try:\n        result = perform_critical_task(data)\n        return result\n    except Exception as e:\n        sentry_sdk.capture_exception(e)\n        logger.error(f\"Critical operation failed: {str(e)}\", exc_info=True)\n        raise InternalServerError(\"Operation failed\")\n</code></pre>"},{"location":"guide/error_handling/#debugging-errors","title":"Debugging Errors","text":""},{"location":"guide/error_handling/#development-mode","title":"Development Mode","text":"<pre><code>import os\n\nDEBUG = os.getenv(\"DEBUG\", \"false\").lower() == \"true\"\n\n@router.post(\"/items\")\ndef create_item(item: Item):\n    try:\n        result = database.create(item)\n        return result\n    except Exception as e:\n        if DEBUG:\n            # Return full traceback in development\n            import traceback\n            raise InternalServerError(\n                message=\"Operation failed\",\n                details={\n                    \"error\": str(e),\n                    \"traceback\": traceback.format_exc()\n                }\n            )\n        else:\n            # Hide details in production\n            logger.error(f\"Failed to create item: {str(e)}\", exc_info=True)\n            raise InternalServerError(\"Failed to create item\")\n</code></pre>"},{"location":"guide/error_handling/#best-practices","title":"Best Practices","text":""},{"location":"guide/error_handling/#1-use-appropriate-status-codes","title":"1. Use Appropriate Status Codes","text":"<pre><code># Good - specific error\nraise ResourceNotFoundError(\"User not found\")  # 404\n\n# Avoid - generic error\nraise InternalServerError(\"User not found\")  # 500\n</code></pre>"},{"location":"guide/error_handling/#2-provide-helpful-messages","title":"2. Provide Helpful Messages","text":"<pre><code># Good - actionable message\nraise BadRequestError(\"Email is required. Please provide a valid email address\")\n\n# Avoid - vague message\nraise BadRequestError(\"Invalid input\")\n</code></pre>"},{"location":"guide/error_handling/#3-dont-expose-sensitive-information","title":"3. Don't Expose Sensitive Information","text":"<pre><code># Good\nraise AuthenticationError(\"Invalid credentials\")\n\n# Avoid - reveals which field is wrong\nraise AuthenticationError(\"Password is incorrect\")\n</code></pre>"},{"location":"guide/error_handling/#4-log-before-raising","title":"4. Log Before Raising","text":"<pre><code># Good\ntry:\n    database.create(item)\nexcept Exception as e:\n    logger.error(f\"Database error: {str(e)}\", exc_info=True)\n    raise InternalServerError(\"Failed to create item\")\n</code></pre>"},{"location":"guide/error_handling/#5-use-specific-exceptions","title":"5. Use Specific Exceptions","text":"<pre><code># Good\nif user.balance &lt; amount:\n    raise PaymentRequiredError(\"Insufficient balance\")\n\n# Avoid - generic\nif user.balance &lt; amount:\n    raise BadRequestError(\"Error\")\n</code></pre>"},{"location":"guide/error_handling/#6-clean-up-resources","title":"6. Clean Up Resources","text":"<pre><code># Good\ndef process_file(file: FileUpload):\n    temp_path = None\n    try:\n        temp_path = save_temp_file(file)\n        result = process(temp_path)\n        return result\n    except Exception as e:\n        logger.error(f\"Processing failed: {str(e)}\")\n        raise InternalServerError(\"File processing failed\")\n    finally:\n        if temp_path:\n            os.remove(temp_path)\n</code></pre>"},{"location":"guide/error_handling/#7-dont-swallow-exceptions","title":"7. Don't Swallow Exceptions","text":"<pre><code># Good\ntry:\n    risky_operation()\nexcept SpecificError as e:\n    logger.error(f\"Operation failed: {str(e)}\")\n    raise\n\n# Avoid\ntry:\n    risky_operation()\nexcept:\n    pass  # Silent failure\n</code></pre>"},{"location":"guide/error_handling/#error-response-examples","title":"Error Response Examples","text":""},{"location":"guide/error_handling/#400-bad-request","title":"400 Bad Request","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"bad_request\",\n    \"message\": \"Invalid date format. Expected YYYY-MM-DD\",\n    \"status\": 400\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#401-unauthorized","title":"401 Unauthorized","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"authentication_error\",\n    \"message\": \"Invalid or expired token\",\n    \"status\": 401\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#403-forbidden","title":"403 Forbidden","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"authorization_error\",\n    \"message\": \"You don't have permission to delete this resource\",\n    \"status\": 403\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#404-not-found","title":"404 Not Found","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"resource_not_found\",\n    \"message\": \"User with ID 123 not found\",\n    \"status\": 404\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#409-conflict","title":"409 Conflict","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"resource_conflict\",\n    \"message\": \"A user with this email already exists\",\n    \"status\": 409,\n    \"details\": {\n      \"email\": \"user@example.com\"\n    }\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#422-validation-error","title":"422 Validation Error","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error\",\n    \"status\": 422,\n    \"details\": [\n      {\n        \"loc\": [\"body\", \"price\"],\n        \"msg\": \"Input should be greater than 0\",\n        \"type\": \"greater_than\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#500-internal-server-error","title":"500 Internal Server Error","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"internal_server_error\",\n    \"message\": \"An unexpected error occurred\",\n    \"status\": 500\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#503-service-unavailable","title":"503 Service Unavailable","text":"<pre><code>{\n  \"error\": {\n    \"type\": \"service_unavailable\",\n    \"message\": \"Database is temporarily unavailable. Please try again later\",\n    \"status\": 503\n  }\n}\n</code></pre>"},{"location":"guide/error_handling/#next-steps","title":"Next Steps","text":"<ul> <li>Security - Handle authentication errors</li> <li>Validation - Understand validation errors</li> <li>Dependencies - Error handling in dependencies</li> <li>Testing - Test error scenarios</li> </ul>"},{"location":"guide/request_body/","title":"Request Body","text":"<p>This guide covers handling request bodies including JSON, form data, and file uploads.</p>"},{"location":"guide/request_body/#json-request-body","title":"JSON Request Body","text":"<p>The most common type of request body in REST APIs is JSON.</p>"},{"location":"guide/request_body/#basic-json-body","title":"Basic JSON Body","text":"<pre><code>from pydantic import BaseModel\nfrom fastopenapi import Body\n\nclass Item(BaseModel):\n    name: str\n    price: float\n    description: str | None = None\n\n@router.post(\"/items\")\ndef create_item(item: Item = Body(...)):\n    return {\"item\": item}\n</code></pre> <p>Request: <pre><code>POST /items HTTP/1.1\nContent-Type: application/json\n\n{\"name\": \"Laptop\", \"price\": 999.99, \"description\": \"Gaming laptop\"}\n</code></pre></p>"},{"location":"guide/request_body/#automatic-body-detection","title":"Automatic Body Detection","text":"<p>If a parameter is a Pydantic model, FastOpenAPI automatically treats it as the request body:</p> <pre><code>@router.post(\"/items\")\ndef create_item(item: Item):  # Automatically uses Body()\n    return {\"item\": item}\n</code></pre>"},{"location":"guide/request_body/#nested-models","title":"Nested Models","text":"<pre><code>class Address(BaseModel):\n    street: str\n    city: str\n    country: str\n    postal_code: str\n\nclass User(BaseModel):\n    name: str\n    email: str\n    address: Address\n\n@router.post(\"/users\")\ndef create_user(user: User):\n    return {\"user\": user}\n</code></pre> <p>Request: <pre><code>POST /users HTTP/1.1\nContent-Type: application/json\n\n{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"address\": {\n    \"street\": \"123 Main St\",\n    \"city\": \"New York\",\n    \"country\": \"USA\",\n    \"postal_code\": \"10001\"\n  }\n}\n</code></pre></p>"},{"location":"guide/request_body/#lists-in-body","title":"Lists in Body","text":"<pre><code>@router.post(\"/items/bulk\")\ndef create_items(items: list[Item]):\n    return {\"count\": len(items), \"items\": items}\n</code></pre> <p>Request: <pre><code>POST /items/bulk HTTP/1.1\nContent-Type: application/json\n\n[\n  {\"name\": \"Item 1\", \"price\": 10.0},\n  {\"name\": \"Item 2\", \"price\": 20.0}\n]\n</code></pre></p>"},{"location":"guide/request_body/#body-with-path-and-query-parameters","title":"Body with Path and Query Parameters","text":"<p>Combine body with other parameter types:</p> <pre><code>@router.put(\"/items/{item_id}\")\ndef update_item(\n    item_id: int,                           # Path parameter\n    item: Item,                             # Body\n    notify: bool = Query(False)             # Query parameter\n):\n    return {\n        \"item_id\": item_id,\n        \"item\": item,\n        \"notify\": notify\n    }\n</code></pre> <p>Request: <pre><code>PUT /items/123?notify=true HTTP/1.1\nContent-Type: application/json\n\n{\"name\": \"Updated Item\", \"price\": 15.99}\n</code></pre></p>"},{"location":"guide/request_body/#form-data","title":"Form Data","text":"<p>Handle HTML form submissions and <code>application/x-www-form-urlencoded</code> data.</p>"},{"location":"guide/request_body/#basic-form","title":"Basic Form","text":"<pre><code>from fastopenapi import Form\n\n@router.post(\"/login\")\ndef login(\n    username: str = Form(...),\n    password: str = Form(...)\n):\n    # Authenticate user\n    return {\"username\": username}\n</code></pre> <p>Request: <pre><code>POST /login HTTP/1.1\nContent-Type: application/x-www-form-urlencoded\n\nusername=john&amp;password=secret123\n</code></pre></p>"},{"location":"guide/request_body/#form-with-pydantic-model","title":"Form with Pydantic Model","text":"<pre><code>class LoginForm(BaseModel):\n    username: str\n    password: str\n    remember_me: bool = False\n\n@router.post(\"/login\")\ndef login(form: LoginForm = Form(...)):\n    return {\"username\": form.username}\n</code></pre>"},{"location":"guide/request_body/#mixed-form-and-query-parameters","title":"Mixed Form and Query Parameters","text":"<pre><code>@router.post(\"/search\")\ndef search(\n    query: str = Form(...),\n    page: int = Query(1),\n    per_page: int = Query(10)\n):\n    return {\n        \"query\": query,\n        \"page\": page,\n        \"per_page\": per_page\n    }\n</code></pre>"},{"location":"guide/request_body/#file-uploads","title":"File Uploads","text":"<p>Handle single and multiple file uploads.</p>"},{"location":"guide/request_body/#single-file-upload","title":"Single File Upload","text":"<pre><code>from fastopenapi import File, FileUpload\n\n@router.post(\"/upload\")\nasync def upload_file(\n    file: FileUpload = File(...)\n):\n    content = await file.aread()  # For async frameworks\n    # or: content = file.read()   # For sync frameworks\n\n    return {\n        \"filename\": file.filename,\n        \"content_type\": file.content_type,\n        \"size\": len(content)\n    }\n</code></pre> <p>Request: <pre><code>POST /upload HTTP/1.1\nContent-Type: multipart/form-data; boundary=----Boundary\n\n------Boundary\nContent-Disposition: form-data; name=\"file\"; filename=\"document.pdf\"\nContent-Type: application/pdf\n\n[binary content]\n------Boundary--\n</code></pre></p>"},{"location":"guide/request_body/#fileupload-object","title":"FileUpload Object","text":"<p>The <code>FileUpload</code> object provides:</p> <ul> <li><code>filename: str</code> - Original filename</li> <li><code>content_type: str</code> - MIME type</li> <li><code>size: int | None</code> - File size in bytes</li> <li><code>file: Any</code> - Framework-specific file object</li> <li><code>read()</code> - Read file content (sync)</li> <li><code>aread()</code> - Read file content (async)</li> </ul>"},{"location":"guide/request_body/#multiple-file-uploads","title":"Multiple File Uploads","text":"<pre><code>@router.post(\"/upload-multiple\")\nasync def upload_files(\n    files: list[FileUpload] = File(...)\n):\n    results = []\n    for file in files:\n        content = await file.aread()\n        results.append({\n            \"filename\": file.filename,\n            \"size\": len(content)\n        })\n    return {\"files\": results}\n</code></pre>"},{"location":"guide/request_body/#file-with-additional-form-data","title":"File with Additional Form Data","text":"<pre><code>@router.post(\"/upload-with-data\")\nasync def upload_with_data(\n    file: FileUpload = File(...),\n    title: str = Form(...),\n    description: str = Form(None)\n):\n    content = await file.aread()\n    return {\n        \"filename\": file.filename,\n        \"title\": title,\n        \"description\": description,\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"guide/request_body/#optional-file-upload","title":"Optional File Upload","text":"<pre><code>@router.post(\"/profile\")\nasync def update_profile(\n    name: str = Form(...),\n    avatar: FileUpload | None = File(None)\n):\n    if avatar:\n        content = await avatar.aread()\n        # Save avatar\n        return {\"name\": name, \"avatar_uploaded\": True}\n    return {\"name\": name, \"avatar_uploaded\": False}\n</code></pre>"},{"location":"guide/request_body/#file-validation","title":"File Validation","text":"<pre><code>from fastopenapi.errors import BadRequestError\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    # Check file size\n    if file.size and file.size &gt; 10 * 1024 * 1024:  # 10 MB\n        raise BadRequestError(\"File too large (max 10 MB)\")\n\n    # Check file type\n    allowed_types = [\"image/jpeg\", \"image/png\", \"image/gif\"]\n    if file.content_type not in allowed_types:\n        raise BadRequestError(f\"Invalid file type: {file.content_type}\")\n\n    content = await file.aread()\n    # Process file\n    return {\"filename\": file.filename, \"size\": len(content)}\n</code></pre>"},{"location":"guide/request_body/#saving-files","title":"Saving Files","text":"<pre><code>import os\nfrom pathlib import Path\n\nUPLOAD_DIR = Path(\"uploads\")\nUPLOAD_DIR.mkdir(exist_ok=True)\n\n@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()\n\n    # Generate safe filename\n    safe_filename = file.filename.replace(\"/\", \"_\")\n    file_path = UPLOAD_DIR / safe_filename\n\n    # Save to disk\n    with open(file_path, \"wb\") as f:\n        f.write(content)\n\n    return {\n        \"filename\": file.filename,\n        \"saved_as\": str(file_path),\n        \"size\": len(content)\n    }\n</code></pre>"},{"location":"guide/request_body/#streaming-large-files","title":"Streaming Large Files","text":"<p>For large files, read in chunks:</p> <pre><code>@router.post(\"/upload-large\")\nasync def upload_large_file(file: FileUpload = File(...)):\n    file_path = UPLOAD_DIR / file.filename\n\n    # For async frameworks\n    with open(file_path, \"wb\") as f:\n        # Read in chunks\n        content = await file.aread()\n        f.write(content)\n\n    return {\n        \"filename\": file.filename,\n        \"size\": file_path.stat().st_size\n    }\n</code></pre>"},{"location":"guide/request_body/#body-validation","title":"Body Validation","text":""},{"location":"guide/request_body/#required-fields","title":"Required Fields","text":"<pre><code>class User(BaseModel):\n    name: str                    # Required\n    email: str                   # Required\n    age: int | None = None       # Optional\n</code></pre>"},{"location":"guide/request_body/#field-constraints","title":"Field Constraints","text":"<pre><code>from pydantic import Field\n\nclass Item(BaseModel):\n    name: str = Field(..., min_length=1, max_length=100)\n    price: float = Field(..., gt=0, description=\"Price must be positive\")\n    quantity: int = Field(1, ge=1, le=1000)\n    tags: list[str] = Field(default_factory=list, max_length=10)\n</code></pre>"},{"location":"guide/request_body/#custom-validators","title":"Custom Validators","text":"<pre><code>from pydantic import field_validator\n\nclass User(BaseModel):\n    username: str\n    password: str\n\n    @field_validator('username')\n    @classmethod\n    def username_alphanumeric(cls, v):\n        if not v.isalnum():\n            raise ValueError('Username must be alphanumeric')\n        return v\n\n    @field_validator('password')\n    @classmethod\n    def password_strong(cls, v):\n        if len(v) &lt; 8:\n            raise ValueError('Password must be at least 8 characters')\n        return v\n</code></pre>"},{"location":"guide/request_body/#complex-validation","title":"Complex Validation","text":"<pre><code>from pydantic import model_validator\n\nclass DateRange(BaseModel):\n    start_date: date\n    end_date: date\n\n    @model_validator(mode='after')\n    def check_dates(self):\n        if self.start_date &gt; self.end_date:\n            raise ValueError('start_date must be before end_date')\n        return self\n</code></pre>"},{"location":"guide/request_body/#response-examples","title":"Response Examples","text":""},{"location":"guide/request_body/#successful-creation","title":"Successful Creation","text":"<pre><code>@router.post(\"/items\", status_code=201)\ndef create_item(item: Item):\n    # Save to database\n    item_dict = item.model_dump()\n    item_dict[\"id\"] = generate_id()\n    return item_dict\n</code></pre> <p>Response: <pre><code>HTTP/1.1 201 Created\nContent-Type: application/json\n\n{\n  \"id\": 123,\n  \"name\": \"Laptop\",\n  \"price\": 999.99,\n  \"description\": null\n}\n</code></pre></p>"},{"location":"guide/request_body/#validation-error","title":"Validation Error","text":"<p>Request: <pre><code>POST /items HTTP/1.1\nContent-Type: application/json\n\n{\"name\": \"Item\", \"price\": -10}\n</code></pre></p> <p>Response: <pre><code>HTTP/1.1 422 Unprocessable Entity\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error for parameter 'price'\",\n    \"status\": 422,\n    \"details\": \"Input should be greater than 0\"\n  }\n}\n</code></pre></p>"},{"location":"guide/request_body/#sync-vs-async-file-handling","title":"Sync vs Async File Handling","text":""},{"location":"guide/request_body/#synchronous-flask-django-wsgi","title":"Synchronous (Flask, Django WSGI)","text":"<pre><code>@router.post(\"/upload\")\ndef upload_file(file: FileUpload = File(...)):\n    content = file.read()  # Sync read\n    return {\"size\": len(content)}\n</code></pre>"},{"location":"guide/request_body/#asynchronous-starlette-aiohttp-sanic","title":"Asynchronous (Starlette, AIOHTTP, Sanic)","text":"<pre><code>@router.post(\"/upload\")\nasync def upload_file(file: FileUpload = File(...)):\n    content = await file.aread()  # Async read\n    return {\"size\": len(content)}\n</code></pre>"},{"location":"guide/request_body/#best-practices","title":"Best Practices","text":""},{"location":"guide/request_body/#1-use-pydantic-models","title":"1. Use Pydantic Models","text":"<pre><code># Good - type-safe and validated\nclass CreateItemRequest(BaseModel):\n    name: str\n    price: float\n\n@router.post(\"/items\")\ndef create_item(request: CreateItemRequest):\n    pass\n\n# Avoid - no validation\n@router.post(\"/items\")\ndef create_item(data: dict):\n    pass\n</code></pre>"},{"location":"guide/request_body/#2-validate-file-uploads","title":"2. Validate File Uploads","text":"<pre><code># Good - validate before processing\n@router.post(\"/upload\")\nasync def upload(file: FileUpload = File(...)):\n    if file.size &gt; MAX_SIZE:\n        raise BadRequestError(\"File too large\")\n    if not file.content_type.startswith(\"image/\"):\n        raise BadRequestError(\"Only images allowed\")\n    # Process file\n</code></pre>"},{"location":"guide/request_body/#3-use-descriptive-field-names","title":"3. Use Descriptive Field Names","text":"<pre><code># Good\nclass CreateUserRequest(BaseModel):\n    full_name: str\n    email_address: str\n    phone_number: str | None\n\n# Avoid\nclass CreateUserRequest(BaseModel):\n    n: str\n    e: str\n    p: str | None\n</code></pre>"},{"location":"guide/request_body/#4-provide-default-values","title":"4. Provide Default Values","text":"<pre><code># Good\nclass SearchRequest(BaseModel):\n    query: str\n    page: int = 1\n    per_page: int = 20\n    sort_by: str = \"created_at\"\n</code></pre>"},{"location":"guide/request_body/#5-document-your-models","title":"5. Document Your Models","text":"<pre><code>class Item(BaseModel):\n    \"\"\"Represents an item in the store.\"\"\"\n\n    name: str = Field(..., description=\"The item name\", example=\"Laptop\")\n    price: float = Field(..., description=\"Price in USD\", example=999.99)\n    in_stock: bool = Field(True, description=\"Availability status\")\n</code></pre>"},{"location":"guide/request_body/#common-patterns","title":"Common Patterns","text":""},{"location":"guide/request_body/#createupdate-split","title":"Create/Update Split","text":"<pre><code>class ItemCreate(BaseModel):\n    name: str\n    price: float\n    description: str | None = None\n\nclass ItemUpdate(BaseModel):\n    name: str | None = None\n    price: float | None = None\n    description: str | None = None\n\n@router.post(\"/items\")\ndef create_item(item: ItemCreate):\n    # All fields required\n    return item\n\n@router.patch(\"/items/{item_id}\")\ndef update_item(item_id: int, updates: ItemUpdate):\n    # All fields optional\n    return {\"item_id\": item_id, \"updates\": updates}\n</code></pre>"},{"location":"guide/request_body/#bulk-operations","title":"Bulk Operations","text":"<pre><code>class BulkCreateRequest(BaseModel):\n    items: list[ItemCreate] = Field(..., max_length=100)\n\n@router.post(\"/items/bulk\")\ndef bulk_create(request: BulkCreateRequest):\n    return {\"count\": len(request.items)}\n</code></pre>"},{"location":"guide/request_body/#next-steps","title":"Next Steps","text":"<ul> <li>Response Handling - Customize response format</li> <li>Validation - Advanced Pydantic validation</li> <li>Error Handling - Handle validation errors</li> <li>Dependencies - Inject dependencies into endpoints</li> </ul>"},{"location":"guide/request_parameters/","title":"Request Parameters","text":"<p>This guide covers how to extract and validate parameters from requests using FastOpenAPI's parameter classes.</p>"},{"location":"guide/request_parameters/#overview","title":"Overview","text":"<p>FastOpenAPI provides several parameter types for extracting data from different parts of the request:</p> <ul> <li><code>Path(...)</code> - URL path parameters</li> <li><code>Query(...)</code> - Query string parameters</li> <li><code>Header(...)</code> - HTTP headers</li> <li><code>Cookie(...)</code> - HTTP cookies</li> </ul> <p>These classes provide validation, documentation, and type conversion.</p>"},{"location":"guide/request_parameters/#query-parameters","title":"Query Parameters","text":"<p>Query parameters come from the URL query string (<code>?param=value</code>).</p>"},{"location":"guide/request_parameters/#basic-query-parameters","title":"Basic Query Parameters","text":"<pre><code>from fastopenapi import Query\n\n@router.get(\"/items\")\ndef list_items(\n    skip: int = Query(0, description=\"Number of items to skip\"),\n    limit: int = Query(10, description=\"Maximum number of items\")\n):\n    return {\"skip\": skip, \"limit\": limit}\n\n# GET /items?skip=20&amp;limit=50\n</code></pre>"},{"location":"guide/request_parameters/#optional-query-parameters","title":"Optional Query Parameters","text":"<pre><code>@router.get(\"/search\")\ndef search(\n    q: str | None = Query(None, description=\"Search query\"),\n    category: str | None = Query(None, description=\"Filter by category\")\n):\n    if q:\n        return {\"searching_for\": q, \"category\": category}\n    return {\"message\": \"No search query provided\"}\n\n# GET /search?q=laptop&amp;category=electronics\n</code></pre>"},{"location":"guide/request_parameters/#required-query-parameters","title":"Required Query Parameters","text":"<pre><code>@router.get(\"/search\")\ndef search(\n    q: str = Query(..., description=\"Search query (required)\")\n):\n    return {\"searching_for\": q}\n\n# GET /search          -&gt; 422 error\n# GET /search?q=laptop -&gt; OK\n</code></pre>"},{"location":"guide/request_parameters/#query-parameter-validation","title":"Query Parameter Validation","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    skip: int = Query(0, ge=0, description=\"Must be &gt;= 0\"),\n    limit: int = Query(10, ge=1, le=100, description=\"Between 1 and 100\")\n):\n    return {\"skip\": skip, \"limit\": limit}\n\n# GET /items?skip=-1&amp;limit=200 -&gt; 422 error\n</code></pre> <p>Validation constraints:</p> <ul> <li><code>ge</code> - Greater than or equal</li> <li><code>le</code> - Less than or equal</li> <li><code>gt</code> - Greater than</li> <li><code>lt</code> - Less than</li> <li><code>min_length</code> - Minimum string length</li> <li><code>max_length</code> - Maximum string length</li> <li><code>pattern</code> - Regular expression pattern</li> </ul>"},{"location":"guide/request_parameters/#multiple-values","title":"Multiple Values","text":"<pre><code>@router.get(\"/items\")\ndef filter_items(\n    tags: list[str] = Query([], description=\"Filter by tags\")\n):\n    return {\"tags\": tags}\n\n# GET /items?tags=new&amp;tags=featured&amp;tags=sale\n# Returns: {\"tags\": [\"new\", \"featured\", \"sale\"]}\n</code></pre>"},{"location":"guide/request_parameters/#default-values","title":"Default Values","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    sort: str = Query(\"created_at\", description=\"Sort field\"),\n    order: str = Query(\"desc\", description=\"Sort order\")\n):\n    return {\"sort\": sort, \"order\": order}\n\n# GET /items                         -&gt; sort=\"created_at\", order=\"desc\"\n# GET /items?sort=name&amp;order=asc     -&gt; sort=\"name\", order=\"asc\"\n</code></pre>"},{"location":"guide/request_parameters/#aliasing","title":"Aliasing","text":"<p>Use different names in code vs. URL:</p> <pre><code>@router.get(\"/items\")\ndef list_items(\n    items_per_page: int = Query(10, alias=\"per_page\")\n):\n    return {\"items_per_page\": items_per_page}\n\n# GET /items?per_page=50\n</code></pre>"},{"location":"guide/request_parameters/#path-parameters","title":"Path Parameters","text":"<p>Path parameters are extracted from the URL path.</p>"},{"location":"guide/request_parameters/#basic-path-parameters","title":"Basic Path Parameters","text":"<pre><code>from fastopenapi import Path\n\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int = Path(..., description=\"User ID\")):\n    return {\"user_id\": user_id}\n\n# GET /users/123\n</code></pre>"},{"location":"guide/request_parameters/#path-parameter-validation","title":"Path Parameter Validation","text":"<pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(\n    item_id: int = Path(..., ge=1, description=\"Item ID must be positive\")\n):\n    return {\"item_id\": item_id}\n\n# GET /items/0  -&gt; 422 error\n# GET /items/1  -&gt; OK\n</code></pre>"},{"location":"guide/request_parameters/#multiple-path-parameters","title":"Multiple Path Parameters","text":"<pre><code>@router.get(\"/users/{user_id}/posts/{post_id}\")\ndef get_user_post(\n    user_id: int = Path(..., description=\"User ID\"),\n    post_id: int = Path(..., description=\"Post ID\")\n):\n    return {\"user_id\": user_id, \"post_id\": post_id}\n\n# GET /users/123/posts/456\n</code></pre>"},{"location":"guide/request_parameters/#string-path-parameters","title":"String Path Parameters","text":"<pre><code>@router.get(\"/categories/{category_name}\")\ndef get_category(\n    category_name: str = Path(\n        ..., \n        min_length=2,\n        max_length=50,\n        description=\"Category name\"\n    )\n):\n    return {\"category\": category_name}\n\n# GET /categories/electronics\n</code></pre>"},{"location":"guide/request_parameters/#path-with-query-parameters","title":"Path with Query Parameters","text":"<p>Combine path and query parameters:</p> <pre><code>@router.get(\"/users/{user_id}/posts\")\ndef get_user_posts(\n    user_id: int = Path(..., description=\"User ID\"),\n    limit: int = Query(10, description=\"Number of posts\"),\n    offset: int = Query(0, description=\"Offset\")\n):\n    return {\n        \"user_id\": user_id,\n        \"limit\": limit,\n        \"offset\": offset\n    }\n\n# GET /users/123/posts?limit=5&amp;offset=10\n</code></pre>"},{"location":"guide/request_parameters/#header-parameters","title":"Header Parameters","text":"<p>Extract data from HTTP headers.</p>"},{"location":"guide/request_parameters/#basic-headers","title":"Basic Headers","text":"<pre><code>from fastopenapi import Header\n\n@router.get(\"/items\")\ndef list_items(\n    user_agent: str | None = Header(None, alias=\"User-Agent\")\n):\n    return {\"user_agent\": user_agent}\n</code></pre> <p>Note: Header names are case-insensitive in HTTP, but use kebab-case in the <code>alias</code>.</p>"},{"location":"guide/request_parameters/#required-headers","title":"Required Headers","text":"<pre><code>@router.get(\"/protected\")\ndef protected_endpoint(\n    api_key: str = Header(..., alias=\"X-API-Key\")\n):\n    if api_key != \"secret\":\n        raise AuthorizationError(\"Invalid API key\")\n    return {\"message\": \"Access granted\"}\n\n# GET /protected\n# Headers: X-API-Key: secret\n</code></pre>"},{"location":"guide/request_parameters/#common-headers","title":"Common Headers","text":"<pre><code>@router.post(\"/items\")\ndef create_item(\n    content_type: str = Header(..., alias=\"Content-Type\"),\n    content_length: int | None = Header(None, alias=\"Content-Length\"),\n    authorization: str | None = Header(None, alias=\"Authorization\")\n):\n    return {\n        \"content_type\": content_type,\n        \"content_length\": content_length\n    }\n</code></pre>"},{"location":"guide/request_parameters/#custom-headers","title":"Custom Headers","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    request_id: str = Header(..., alias=\"X-Request-ID\"),\n    correlation_id: str | None = Header(None, alias=\"X-Correlation-ID\")\n):\n    return {\n        \"request_id\": request_id,\n        \"correlation_id\": correlation_id\n    }\n</code></pre>"},{"location":"guide/request_parameters/#cookie-parameters","title":"Cookie Parameters","text":"<p>Extract data from cookies.</p>"},{"location":"guide/request_parameters/#basic-cookies","title":"Basic Cookies","text":"<pre><code>from fastopenapi import Cookie\n\n@router.get(\"/items\")\ndef list_items(\n    session_id: str | None = Cookie(None, description=\"Session ID\")\n):\n    return {\"session_id\": session_id}\n</code></pre>"},{"location":"guide/request_parameters/#required-cookies","title":"Required Cookies","text":"<pre><code>@router.get(\"/profile\")\ndef get_profile(\n    session_token: str = Cookie(..., description=\"Session token required\")\n):\n    # Validate session token\n    user = validate_session(session_token)\n    return {\"user\": user}\n</code></pre>"},{"location":"guide/request_parameters/#multiple-cookies","title":"Multiple Cookies","text":"<pre><code>@router.get(\"/dashboard\")\ndef dashboard(\n    session_id: str = Cookie(...),\n    preferences: str | None = Cookie(None),\n    theme: str = Cookie(\"light\")\n):\n    return {\n        \"session_id\": session_id,\n        \"preferences\": preferences,\n        \"theme\": theme\n    }\n</code></pre>"},{"location":"guide/request_parameters/#combining-parameter-types","title":"Combining Parameter Types","text":"<p>You can use all parameter types together:</p> <pre><code>from fastopenapi import Path, Query, Header, Cookie\n\n@router.get(\"/users/{user_id}/posts/{post_id}\")\ndef get_post(\n    # Path parameters\n    user_id: int = Path(..., description=\"User ID\"),\n    post_id: int = Path(..., description=\"Post ID\"),\n\n    # Query parameters\n    include_comments: bool = Query(False, description=\"Include comments\"),\n\n    # Headers\n    accept_language: str = Header(\"en\", alias=\"Accept-Language\"),\n\n    # Cookies\n    session_id: str | None = Cookie(None)\n):\n    return {\n        \"user_id\": user_id,\n        \"post_id\": post_id,\n        \"include_comments\": include_comments,\n        \"language\": accept_language,\n        \"session_id\": session_id\n    }\n</code></pre>"},{"location":"guide/request_parameters/#type-conversion","title":"Type Conversion","text":"<p>FastOpenAPI automatically converts parameter values:</p> <pre><code>@router.get(\"/convert\")\ndef convert_types(\n    integer: int = Query(...),\n    floating: float = Query(...),\n    boolean: bool = Query(...),\n    string: str = Query(...)\n):\n    return {\n        \"integer\": integer,       # \"123\" -&gt; 123\n        \"floating\": floating,     # \"1.5\" -&gt; 1.5\n        \"boolean\": boolean,       # \"true\" -&gt; True, \"1\" -&gt; True\n        \"string\": string          # No conversion\n    }\n\n# GET /convert?integer=123&amp;floating=1.5&amp;boolean=true&amp;string=hello\n</code></pre>"},{"location":"guide/request_parameters/#boolean-conversion","title":"Boolean Conversion","text":"<p>The following values are converted to <code>True</code>:</p> <ul> <li><code>true</code>, <code>True</code>, <code>TRUE</code></li> <li><code>1</code>, <code>yes</code>, <code>on</code></li> </ul> <p>The following values are converted to <code>False</code>:</p> <ul> <li><code>false</code>, <code>False</code>, <code>FALSE</code></li> <li><code>0</code>, <code>no</code>, <code>off</code></li> </ul>"},{"location":"guide/request_parameters/#pydantic-model-parameters","title":"Pydantic Model Parameters","text":"<p>Use Pydantic models for complex query parameters:</p> <pre><code>from pydantic import BaseModel, Field\n\nclass Pagination(BaseModel):\n    page: int = Field(1, ge=1, description=\"Page number\")\n    per_page: int = Field(10, ge=1, le=100, description=\"Items per page\")\n\nclass Filters(BaseModel):\n    category: str | None = None\n    min_price: float | None = Field(None, ge=0)\n    max_price: float | None = Field(None, ge=0)\n    in_stock: bool = True\n\n@router.get(\"/items\")\ndef list_items(\n    pagination: Pagination = Query(...),\n    filters: Filters = Query(...)\n):\n    return {\n        \"page\": pagination.page,\n        \"per_page\": pagination.per_page,\n        \"filters\": filters.model_dump(exclude_none=True)\n    }\n\n# GET /items?page=2&amp;per_page=20&amp;category=electronics&amp;min_price=100\n</code></pre>"},{"location":"guide/request_parameters/#documentation-and-examples","title":"Documentation and Examples","text":""},{"location":"guide/request_parameters/#adding-descriptions","title":"Adding Descriptions","text":"<pre><code>@router.get(\"/items\")\ndef list_items(\n    search: str = Query(\n        None,\n        description=\"Search items by name or description\",\n        example=\"laptop\"\n    ),\n    min_price: float = Query(\n        0,\n        description=\"Minimum price filter\",\n        example=99.99\n    )\n):\n    return {}\n</code></pre>"},{"location":"guide/request_parameters/#deprecated-parameters","title":"Deprecated Parameters","text":"<p>Mark parameters as deprecated:</p> <pre><code>@router.get(\"/items\")\ndef list_items(\n    old_filter: str | None = Query(\n        None,\n        deprecated=True,\n        description=\"Use 'search' parameter instead\"\n    ),\n    search: str | None = Query(None, description=\"Search query\")\n):\n    # Handle backwards compatibility\n    query = search or old_filter\n    return {\"query\": query}\n</code></pre>"},{"location":"guide/request_parameters/#validation-examples","title":"Validation Examples","text":""},{"location":"guide/request_parameters/#email-validation","title":"Email Validation","text":"<pre><code>from pydantic import EmailStr\n\n@router.get(\"/users\")\ndef find_user(\n    email: EmailStr = Query(..., description=\"User email\")\n):\n    return {\"email\": email}\n\n# GET /users?email=invalid -&gt; 422 error\n# GET /users?email=user@example.com -&gt; OK\n</code></pre>"},{"location":"guide/request_parameters/#enum-validation","title":"Enum Validation","text":"<pre><code>from enum import Enum\n\nclass SortOrder(str, Enum):\n    asc = \"asc\"\n    desc = \"desc\"\n\n@router.get(\"/items\")\ndef list_items(\n    sort: SortOrder = Query(SortOrder.desc, description=\"Sort order\")\n):\n    return {\"sort\": sort.value}\n\n# GET /items?sort=asc  -&gt; OK\n# GET /items?sort=invalid -&gt; 422 error\n</code></pre>"},{"location":"guide/request_parameters/#date-validation","title":"Date Validation","text":"<pre><code>from datetime import date\n\n@router.get(\"/events\")\ndef list_events(\n    start_date: date = Query(..., description=\"Start date (YYYY-MM-DD)\"),\n    end_date: date | None = Query(None, description=\"End date\")\n):\n    return {\n        \"start_date\": start_date.isoformat(),\n        \"end_date\": end_date.isoformat() if end_date else None\n    }\n\n# GET /events?start_date=2024-01-01&amp;end_date=2024-12-31\n</code></pre>"},{"location":"guide/request_parameters/#error-handling","title":"Error Handling","text":""},{"location":"guide/request_parameters/#validation-errors","title":"Validation Errors","text":"<p>When parameters fail validation, FastOpenAPI returns a 422 error:</p> <pre><code>GET /items?limit=-5\n\nHTTP/1.1 422 Unprocessable Entity\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Error parsing parameter 'limit'\",\n    \"status\": 422,\n    \"details\": \"Input should be greater than or equal to 1\"\n  }\n}\n</code></pre>"},{"location":"guide/request_parameters/#missing-required-parameters","title":"Missing Required Parameters","text":"<pre><code>GET /search\n\nHTTP/1.1 422 Unprocessable Entity\nContent-Type: application/json\n\n{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Missing required parameter: 'q'\",\n    \"status\": 422\n  }\n}\n</code></pre> <p>Note: For missing parameters, the <code>details</code> field is omitted. For validation failures, <code>details</code> contains a string description of the error.</p>"},{"location":"guide/request_parameters/#best-practices","title":"Best Practices","text":""},{"location":"guide/request_parameters/#1-use-type-hints","title":"1. Use Type Hints","text":"<pre><code># Good\ndef list_items(limit: int = Query(10)):\n    pass\n\n# Avoid\ndef list_items(limit = Query(10)):\n    pass\n</code></pre>"},{"location":"guide/request_parameters/#2-provide-descriptions","title":"2. Provide Descriptions","text":"<pre><code># Good\nlimit: int = Query(10, description=\"Maximum number of items to return\")\n\n# Avoid\nlimit: int = Query(10)\n</code></pre>"},{"location":"guide/request_parameters/#3-set-sensible-defaults","title":"3. Set Sensible Defaults","text":"<pre><code># Good\nlimit: int = Query(20, ge=1, le=100)\n\n# Avoid (unbounded)\nlimit: int = Query(999999)\n</code></pre>"},{"location":"guide/request_parameters/#4-use-validation-constraints","title":"4. Use Validation Constraints","text":"<pre><code># Good - prevents abuse\npage: int = Query(1, ge=1, le=1000)\n\n# Risky - no limits\npage: int = Query(1)\n</code></pre>"},{"location":"guide/request_parameters/#5-group-related-parameters","title":"5. Group Related Parameters","text":"<pre><code># Good - using a model\nclass SearchParams(BaseModel):\n    query: str\n    category: str | None\n    min_price: float\n\n# Instead of many individual parameters\n</code></pre>"},{"location":"guide/request_parameters/#next-steps","title":"Next Steps","text":"<ul> <li>Request Body - Handle JSON, forms, and files</li> <li>Response Handling - Customize responses</li> <li>Validation - Advanced Pydantic validation</li> <li>Dependencies - Dependency injection for parameters</li> </ul>"},{"location":"guide/response_handling/","title":"Response Handling","text":"<p>This guide covers how to return and customize responses in FastOpenAPI.</p>"},{"location":"guide/response_handling/#basic-responses","title":"Basic Responses","text":""},{"location":"guide/response_handling/#returning-dictionaries","title":"Returning Dictionaries","text":"<p>The simplest way to return data:</p> <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id, \"name\": \"Item\"}\n</code></pre> <p>FastOpenAPI automatically converts the dictionary to JSON.</p>"},{"location":"guide/response_handling/#returning-pydantic-models","title":"Returning Pydantic Models","text":"<p>Return Pydantic models directly:</p> <pre><code>from pydantic import BaseModel\n\nclass Item(BaseModel):\n    id: int\n    name: str\n    price: float\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    item = Item(id=item_id, name=\"Laptop\", price=999.99)\n    return item\n</code></pre> <p>The model is automatically serialized to JSON.</p>"},{"location":"guide/response_handling/#returning-lists","title":"Returning Lists","text":"<p>Return lists of items:</p> <pre><code>@router.get(\"/items\")\ndef list_items():\n    return [\n        {\"id\": 1, \"name\": \"Item 1\"},\n        {\"id\": 2, \"name\": \"Item 2\"}\n    ]\n</code></pre> <p>Or lists of models:</p> <pre><code>@router.get(\"/items\")\ndef list_items():\n    return [\n        Item(id=1, name=\"Item 1\", price=10.0),\n        Item(id=2, name=\"Item 2\", price=20.0)\n    ]\n</code></pre>"},{"location":"guide/response_handling/#response-models","title":"Response Models","text":"<p>Define the response structure with <code>response_model</code>:</p> <pre><code>class UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user_data = database.get_user(user_id)\n    return user_data  # Validated against UserResponse\n</code></pre> <p>Benefits:</p> <ul> <li>Automatic validation of response data</li> <li>Documentation in OpenAPI schema</li> <li>Type safety</li> <li>Filters out extra fields</li> </ul>"},{"location":"guide/response_handling/#response-model-with-list","title":"Response Model with List","text":"<pre><code>@router.get(\"/users\", response_model=list[UserResponse])\ndef list_users():\n    users = database.get_all_users()\n    return users\n</code></pre>"},{"location":"guide/response_handling/#excluding-fields","title":"Excluding Fields","text":"<p>Use different models for requests and responses:</p> <pre><code>class UserCreate(BaseModel):\n    username: str\n    email: str\n    password: str\n\nclass UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n    # password excluded\n\n@router.post(\"/users\", response_model=UserResponse)\ndef create_user(user: UserCreate):\n    # Password is hashed and stored\n    user_id = database.create_user(user)\n    return {\n        \"id\": user_id,\n        \"username\": user.username,\n        \"email\": user.email\n    }\n</code></pre>"},{"location":"guide/response_handling/#status-codes","title":"Status Codes","text":""},{"location":"guide/response_handling/#setting-status-codes","title":"Setting Status Codes","text":"<p>Specify the success status code:</p> <pre><code>@router.get(\"/items/{item_id}\", status_code=200)  # Default\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", status_code=201)  # Created\ndef create_item(item: Item):\n    return item\n\n@router.delete(\"/items/{item_id}\", status_code=204)  # No Content\ndef delete_item(item_id: int):\n    database.delete(item_id)\n    return None\n</code></pre>"},{"location":"guide/response_handling/#common-status-codes","title":"Common Status Codes","text":"<ul> <li><code>200 OK</code> - Successful GET, PUT, PATCH</li> <li><code>201 Created</code> - Successful POST</li> <li><code>204 No Content</code> - Successful DELETE</li> <li><code>400 Bad Request</code> - Invalid request</li> <li><code>401 Unauthorized</code> - Authentication required</li> <li><code>403 Forbidden</code> - Not allowed</li> <li><code>404 Not Found</code> - Resource not found</li> <li><code>422 Unprocessable Entity</code> - Validation error</li> <li><code>500 Internal Server Error</code> - Server error</li> </ul>"},{"location":"guide/response_handling/#dynamic-status-codes","title":"Dynamic Status Codes","text":"<p>Return a tuple with status code:</p> <pre><code>@router.post(\"/items\")\ndef create_item(item: Item):\n    item_id = database.create(item)\n    return {\"id\": item_id, \"name\": item.name}, 201\n</code></pre> <p>Or with headers:</p> <pre><code>@router.post(\"/items\")\ndef create_item(item: Item):\n    item_id = database.create(item)\n    headers = {\"X-Item-ID\": str(item_id)}\n    return {\"id\": item_id}, 201, headers\n</code></pre>"},{"location":"guide/response_handling/#custom-response-class","title":"Custom Response Class","text":"<p>Use the <code>Response</code> class for full control:</p> <pre><code>from fastopenapi import Response\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return Response(\n        content={\"item_id\": item_id},\n        status_code=200,\n        headers={\"X-Custom-Header\": \"value\"}\n    )\n</code></pre>"},{"location":"guide/response_handling/#setting-headers","title":"Setting Headers","text":"<p>Add custom headers:</p> <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return Response(\n        content={\"item_id\": item_id},\n        headers={\n            \"X-Request-ID\": \"123\",\n            \"Cache-Control\": \"no-cache\"\n        }\n    )\n</code></pre>"},{"location":"guide/response_handling/#content-type-header","title":"Content-Type Header","text":"<p>Specify content type:</p> <pre><code>@router.get(\"/data\")\ndef get_data():\n    csv_data = \"id,name\\n1,Item1\\n2,Item2\"\n    return Response(\n        content=csv_data,\n        headers={\"Content-Type\": \"text/csv\"}\n    )\n</code></pre>"},{"location":"guide/response_handling/#special-response-types","title":"Special Response Types","text":""},{"location":"guide/response_handling/#empty-responses-204-no-content","title":"Empty Responses (204 No Content)","text":"<pre><code>@router.delete(\"/items/{item_id}\", status_code=204)\ndef delete_item(item_id: int):\n    database.delete(item_id)\n    return None\n</code></pre>"},{"location":"guide/response_handling/#redirect-responses","title":"Redirect Responses","text":"<pre><code>@router.get(\"/old-endpoint\", status_code=301)\ndef redirect():\n    return Response(\n        content=None,\n        status_code=301,\n        headers={\"Location\": \"/new-endpoint\"}\n    )\n</code></pre>"},{"location":"guide/response_handling/#binary-responses","title":"Binary Responses","text":"<p>Return binary data:</p> <pre><code>@router.get(\"/download/{filename}\")\ndef download_file(filename: str):\n    file_data = read_file(filename)\n    return Response(\n        content=file_data,\n        headers={\n            \"Content-Type\": \"application/octet-stream\",\n            \"Content-Disposition\": f\"attachment; filename={filename}\"\n        }\n    )\n</code></pre>"},{"location":"guide/response_handling/#image-responses","title":"Image Responses","text":"<pre><code>@router.get(\"/images/{image_id}\")\ndef get_image(image_id: int):\n    image_bytes = load_image(image_id)\n    return Response(\n        content=image_bytes,\n        headers={\"Content-Type\": \"image/jpeg\"}\n    )\n</code></pre>"},{"location":"guide/response_handling/#xml-responses","title":"XML Responses","text":"<pre><code>@router.get(\"/data.xml\")\ndef get_xml():\n    xml_content = \"&lt;root&gt;&lt;item&gt;data&lt;/item&gt;&lt;/root&gt;\"\n    return Response(\n        content=xml_content,\n        headers={\"Content-Type\": \"application/xml\"}\n    )\n</code></pre>"},{"location":"guide/response_handling/#framework-specific-responses","title":"Framework-Specific Responses","text":"<p>You can also return framework-specific response objects:</p>"},{"location":"guide/response_handling/#flask","title":"Flask","text":"<pre><code>from flask import make_response, jsonify\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    response = make_response(jsonify({\"item_id\": item_id}))\n    response.headers[\"X-Custom\"] = \"value\"\n    return response\n</code></pre>"},{"location":"guide/response_handling/#starlette","title":"Starlette","text":"<pre><code>from starlette.responses import JSONResponse\n\n@router.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):\n    return JSONResponse(\n        content={\"item_id\": item_id},\n        headers={\"X-Custom\": \"value\"}\n    )\n</code></pre>"},{"location":"guide/response_handling/#django","title":"Django","text":"<pre><code>from django.http import JsonResponse\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return JsonResponse({\"item_id\": item_id})\n</code></pre>"},{"location":"guide/response_handling/#response-validation","title":"Response Validation","text":"<p>When <code>response_model</code> is set, responses are validated:</p> <pre><code>class ItemResponse(BaseModel):\n    id: int\n    name: str\n    price: float\n\n@router.get(\"/items/{item_id}\", response_model=ItemResponse)\ndef get_item(item_id: int):\n    # This will raise InternalServerError if data doesn't match\n    return {\n        \"id\": item_id,\n        \"name\": \"Item\",\n        \"price\": \"invalid\"  # Wrong type!\n    }\n</code></pre>"},{"location":"guide/response_handling/#handling-validation-errors","title":"Handling Validation Errors","text":"<pre><code>from fastopenapi.errors import InternalServerError\n\n@router.get(\"/items/{item_id}\", response_model=ItemResponse)\ndef get_item(item_id: int):\n    try:\n        data = database.get_item(item_id)\n        return data\n    except Exception as e:\n        # Handle unexpected data structure\n        raise InternalServerError(\"Failed to format response\")\n</code></pre>"},{"location":"guide/response_handling/#pagination","title":"Pagination","text":"<p>Common pagination pattern:</p> <pre><code>class PaginatedResponse(BaseModel):\n    items: list[Item]\n    total: int\n    page: int\n    per_page: int\n    total_pages: int\n\n@router.get(\"/items\", response_model=PaginatedResponse)\ndef list_items(\n    page: int = Query(1, ge=1),\n    per_page: int = Query(20, ge=1, le=100)\n):\n    offset = (page - 1) * per_page\n    items = database.get_items(offset=offset, limit=per_page)\n    total = database.count_items()\n\n    return {\n        \"items\": items,\n        \"total\": total,\n        \"page\": page,\n        \"per_page\": per_page,\n        \"total_pages\": (total + per_page - 1) // per_page\n    }\n</code></pre>"},{"location":"guide/response_handling/#cursor-based-pagination","title":"Cursor-Based Pagination","text":"<pre><code>class CursorPaginatedResponse(BaseModel):\n    items: list[Item]\n    next_cursor: str | None\n    prev_cursor: str | None\n\n@router.get(\"/items\", response_model=CursorPaginatedResponse)\ndef list_items(\n    cursor: str | None = Query(None),\n    limit: int = Query(20, ge=1, le=100)\n):\n    items, next_cursor = database.get_items_by_cursor(cursor, limit)\n\n    return {\n        \"items\": items,\n        \"next_cursor\": next_cursor,\n        \"prev_cursor\": cursor\n    }\n</code></pre>"},{"location":"guide/response_handling/#streaming-responses","title":"Streaming Responses","text":"<p>For large responses, consider streaming (framework-specific):</p>"},{"location":"guide/response_handling/#starlette-streaming","title":"Starlette Streaming","text":"<pre><code>from starlette.responses import StreamingResponse\n\n@router.get(\"/large-file\")\nasync def stream_file():\n    async def generate():\n        with open(\"large_file.txt\", \"rb\") as f:\n            while chunk := f.read(8192):\n                yield chunk\n\n    return StreamingResponse(\n        generate(),\n        media_type=\"application/octet-stream\"\n    )\n</code></pre>"},{"location":"guide/response_handling/#response-documentation","title":"Response Documentation","text":"<p>Document possible responses in OpenAPI:</p> <pre><code>from fastopenapi.errors import ResourceNotFoundError\n\n@router.get(\n    \"/items/{item_id}\",\n    response_model=Item,\n    responses={\n        200: {\"description\": \"Item found\"},\n        404: {\"description\": \"Item not found\"}\n    }\n)\ndef get_item(item_id: int):\n    item = database.get(item_id)\n    if not item:\n        raise ResourceNotFoundError(f\"Item {item_id} not found\")\n    return item\n</code></pre>"},{"location":"guide/response_handling/#content-negotiation","title":"Content Negotiation","text":"<p>Handle different content types based on Accept header:</p> <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(\n    item_id: int,\n    accept: str = Header(\"application/json\", alias=\"Accept\")\n):\n    item = database.get(item_id)\n\n    if \"application/xml\" in accept:\n        xml = convert_to_xml(item)\n        return Response(\n            content=xml,\n            headers={\"Content-Type\": \"application/xml\"}\n        )\n\n    return item  # Default JSON\n</code></pre>"},{"location":"guide/response_handling/#caching-headers","title":"Caching Headers","text":"<p>Add cache control headers:</p> <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    item = database.get(item_id)\n\n    return Response(\n        content=item,\n        headers={\n            \"Cache-Control\": \"public, max-age=3600\",\n            \"ETag\": f'\"{item.id}-{item.updated_at}\"'\n        }\n    )\n</code></pre>"},{"location":"guide/response_handling/#cors-headers","title":"CORS Headers","text":"<p>Add CORS headers (better to use middleware):</p> <pre><code>@router.get(\"/items\")\ndef list_items():\n    items = database.get_all()\n\n    return Response(\n        content=items,\n        headers={\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE\",\n            \"Access-Control-Allow-Headers\": \"Content-Type\"\n        }\n    )\n</code></pre>"},{"location":"guide/response_handling/#best-practices","title":"Best Practices","text":""},{"location":"guide/response_handling/#1-use-response-models","title":"1. Use Response Models","text":"<pre><code># Good - validated and documented\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    return database.get_user(user_id)\n\n# Avoid - no validation\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    return database.get_user(user_id)\n</code></pre>"},{"location":"guide/response_handling/#2-use-correct-status-codes","title":"2. Use Correct Status Codes","text":"<pre><code># Good\n@router.post(\"/users\", status_code=201)\n@router.delete(\"/users/{user_id}\", status_code=204)\n\n# Avoid - always 200\n@router.post(\"/users\")\n@router.delete(\"/users/{user_id}\")\n</code></pre>"},{"location":"guide/response_handling/#3-include-helpful-metadata","title":"3. Include Helpful Metadata","text":"<pre><code># Good - includes pagination metadata\n{\n    \"items\": [...],\n    \"total\": 100,\n    \"page\": 1,\n    \"per_page\": 20\n}\n\n# Avoid - just data\n[...]\n</code></pre>"},{"location":"guide/response_handling/#4-use-consistent-response-formats","title":"4. Use Consistent Response Formats","text":"<pre><code># Good - consistent error format\n{\n    \"error\": {\n        \"type\": \"not_found\",\n        \"message\": \"User not found\"\n    }\n}\n\n# Avoid - inconsistent formats\n{\"error\": \"not found\"}\n{\"message\": \"error occurred\"}\n</code></pre>"},{"location":"guide/response_handling/#5-document-error-responses","title":"5. Document Error Responses","text":"<pre><code>@router.get(\n    \"/users/{user_id}\",\n    response_model=User,\n    responses={\n        404: {\"description\": \"User not found\"},\n        500: {\"description\": \"Internal server error\"}\n    }\n)\n</code></pre>"},{"location":"guide/response_handling/#common-patterns","title":"Common Patterns","text":""},{"location":"guide/response_handling/#successerror-wrapper","title":"Success/Error Wrapper","text":"<pre><code>class ApiResponse(BaseModel):\n    success: bool\n    data: dict | None = None\n    error: str | None = None\n\n@router.get(\"/items/{item_id}\", response_model=ApiResponse)\ndef get_item(item_id: int):\n    try:\n        item = database.get(item_id)\n        return {\"success\": True, \"data\": item}\n    except Exception as e:\n        return {\"success\": False, \"error\": str(e)}\n</code></pre>"},{"location":"guide/response_handling/#partial-updates","title":"Partial Updates","text":"<pre><code>@router.patch(\"/items/{item_id}\", response_model=Item)\ndef update_item(item_id: int, updates: ItemUpdate):\n    item = database.get(item_id)\n    updated_data = item.model_dump()\n    updated_data.update(updates.model_dump(exclude_unset=True))\n\n    database.update(item_id, updated_data)\n    return updated_data\n</code></pre>"},{"location":"guide/response_handling/#batch-operations","title":"Batch Operations","text":"<pre><code>class BatchResponse(BaseModel):\n    success: list[int]\n    failed: list[dict]\n\n@router.post(\"/items/batch\", response_model=BatchResponse)\ndef create_batch(items: list[Item]):\n    success = []\n    failed = []\n\n    for idx, item in enumerate(items):\n        try:\n            item_id = database.create(item)\n            success.append(item_id)\n        except Exception as e:\n            failed.append({\"index\": idx, \"error\": str(e)})\n\n    return {\"success\": success, \"failed\": failed}\n</code></pre>"},{"location":"guide/response_handling/#next-steps","title":"Next Steps","text":"<ul> <li>Validation - Deep dive into Pydantic validation</li> <li>Error Handling - Handle exceptions properly</li> <li>Dependencies - Use dependency injection</li> <li>Examples - See complete examples</li> </ul>"},{"location":"guide/routing/","title":"Routing","text":"<p>This guide covers how to define routes and endpoints in FastOpenAPI.</p>"},{"location":"guide/routing/#basic-routing","title":"Basic Routing","text":"<p>Use decorator methods on your router to define endpoints:</p> <pre><code>from fastopenapi.routers import FlaskRouter\nfrom flask import Flask\n\napp = Flask(__name__)\nrouter = FlaskRouter(app=app)\n\n@router.get(\"/\")\ndef root():\n    return {\"message\": \"Hello, World!\"}\n\n@router.get(\"/items\")\ndef list_items():\n    return {\"items\": [\"item1\", \"item2\"]}\n</code></pre>"},{"location":"guide/routing/#http-methods","title":"HTTP Methods","text":"<p>FastOpenAPI supports all standard HTTP methods:</p>"},{"location":"guide/routing/#get","title":"GET","text":"<p>Retrieve resources:</p> <pre><code>@router.get(\"/items\")\ndef list_items():\n    return {\"items\": []}\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n</code></pre>"},{"location":"guide/routing/#post","title":"POST","text":"<p>Create new resources:</p> <pre><code>from pydantic import BaseModel\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@router.post(\"/items\", status_code=201)\ndef create_item(item: Item):\n    # Save item to database\n    return item\n</code></pre>"},{"location":"guide/routing/#put","title":"PUT","text":"<p>Replace entire resources:</p> <pre><code>@router.put(\"/items/{item_id}\")\ndef replace_item(item_id: int, item: Item):\n    # Replace the entire item\n    return {\"item_id\": item_id, **item.model_dump()}\n</code></pre>"},{"location":"guide/routing/#patch","title":"PATCH","text":"<p>Partially update resources:</p> <pre><code>class ItemUpdate(BaseModel):\n    name: str | None = None\n    price: float | None = None\n\n@router.patch(\"/items/{item_id}\")\ndef update_item(item_id: int, updates: ItemUpdate):\n    # Update only provided fields\n    return {\"item_id\": item_id, \"updated\": True}\n</code></pre>"},{"location":"guide/routing/#delete","title":"DELETE","text":"<p>Remove resources:</p> <pre><code>@router.delete(\"/items/{item_id}\", status_code=204)\ndef delete_item(item_id: int):\n    # Delete item from database\n    return None  # 204 No Content\n</code></pre>"},{"location":"guide/routing/#head","title":"HEAD","text":"<p>Get headers without body (useful for checking existence):</p> <pre><code>@router.head(\"/items/{item_id}\")\ndef check_item(item_id: int):\n    # Check if item exists\n    exists = database.exists(item_id)\n    if not exists:\n        raise ResourceNotFoundError()\n    return None\n</code></pre>"},{"location":"guide/routing/#options","title":"OPTIONS","text":"<p>Get allowed methods (usually handled automatically):</p> <pre><code>@router.options(\"/items/{item_id}\")\ndef item_options():\n    return None\n</code></pre>"},{"location":"guide/routing/#path-parameters","title":"Path Parameters","text":"<p>Extract values from the URL path:</p> <pre><code>@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    return {\"user_id\": user_id}\n\n@router.get(\"/users/{user_id}/posts/{post_id}\")\ndef get_user_post(user_id: int, post_id: int):\n    return {\"user_id\": user_id, \"post_id\": post_id}\n</code></pre>"},{"location":"guide/routing/#type-conversion","title":"Type Conversion","text":"<p>Path parameters are automatically converted to the specified type:</p> <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    # item_id is guaranteed to be an int\n    # /items/abc returns 422 error\n    return {\"item_id\": item_id, \"type\": type(item_id).__name__}\n</code></pre>"},{"location":"guide/routing/#path-with-documentation","title":"Path with Documentation","text":"<p>Use the <code>Path</code> class for additional documentation:</p> <pre><code>from fastopenapi import Path\n\n@router.get(\"/items/{item_id}\")\ndef get_item(\n    item_id: int = Path(..., description=\"The ID of the item to retrieve\", ge=1)\n):\n    return {\"item_id\": item_id}\n</code></pre> <p>Parameters:</p> <ul> <li><code>...</code> - Required (no default value)</li> <li><code>description</code> - Shown in docs</li> <li><code>ge=1</code> - Greater than or equal to 1</li> <li><code>le=100</code> - Less than or equal to 100</li> <li><code>gt=0</code> - Greater than 0</li> <li><code>lt=100</code> - Less than 100</li> </ul>"},{"location":"guide/routing/#route-metadata","title":"Route Metadata","text":""},{"location":"guide/routing/#tags","title":"Tags","text":"<p>Group endpoints in documentation:</p> <pre><code>@router.get(\"/users\", tags=[\"Users\"])\ndef list_users():\n    return []\n\n@router.post(\"/users\", tags=[\"Users\"])\ndef create_user(user: User):\n    return user\n\n@router.get(\"/items\", tags=[\"Items\"])\ndef list_items():\n    return []\n</code></pre> <p>In Swagger UI, endpoints are grouped under their tags.</p>"},{"location":"guide/routing/#status-codes","title":"Status Codes","text":"<p>Specify the success status code:</p> <pre><code>@router.get(\"/items/{item_id}\", status_code=200)  # Default\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.post(\"/items\", status_code=201)  # Created\ndef create_item(item: Item):\n    return item\n\n@router.delete(\"/items/{item_id}\", status_code=204)  # No Content\ndef delete_item(item_id: int):\n    database.delete(item_id)\n    return None\n</code></pre>"},{"location":"guide/routing/#response-model","title":"Response Model","text":"<p>Define the response structure:</p> <pre><code>class UserResponse(BaseModel):\n    id: int\n    username: str\n    email: str\n\n@router.get(\"/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int):\n    user = database.get_user(user_id)\n    return user  # Validated against UserResponse\n</code></pre>"},{"location":"guide/routing/#docstrings","title":"Docstrings","text":"<p>Function docstrings appear in the documentation:</p> <pre><code>@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    \"\"\"\n    Retrieve an item by ID.\n\n    This endpoint returns detailed information about a specific item.\n    \"\"\"\n    return {\"item_id\": item_id}\n</code></pre>"},{"location":"guide/routing/#multiple-routes-for-one-function","title":"Multiple Routes for One Function","text":"<p>You can register the same function under multiple paths:</p> <pre><code>@router.get(\"/items\")\n@router.get(\"/products\")\ndef list_items():\n    return {\"items\": []}\n</code></pre> <p>Or use the router's <code>add_route</code> method:</p> <pre><code>def list_items():\n    return {\"items\": []}\n\nrouter.add_route(\"/items\", \"GET\", list_items)\nrouter.add_route(\"/products\", \"GET\", list_items)\n</code></pre>"},{"location":"guide/routing/#sub-routers","title":"Sub-Routers","text":"<p>Organize large applications with sub-routers:</p>"},{"location":"guide/routing/#creating-a-sub-router","title":"Creating a Sub-Router","text":"<pre><code># users.py\nfrom fastopenapi.routers import FlaskRouter\n\nusers_router = FlaskRouter()\n\n@users_router.get(\"/\")\ndef list_users():\n    return {\"users\": []}\n\n@users_router.get(\"/{user_id}\")\ndef get_user(user_id: int):\n    return {\"user_id\": user_id}\n\n@users_router.post(\"/\", status_code=201)\ndef create_user(user: User):\n    return user\n</code></pre>"},{"location":"guide/routing/#including-sub-routers","title":"Including Sub-Routers","text":"<pre><code># main.py\nfrom flask import Flask\nfrom fastopenapi.routers import FlaskRouter\nfrom users import users_router\n\napp = Flask(__name__)\nmain_router = FlaskRouter(app=app)\n\n# Include users router under /users prefix\nmain_router.include_router(users_router, prefix=\"/users\")\n\n# Routes are now:\n# GET  /users/\n# GET  /users/{user_id}\n# POST /users/\n</code></pre>"},{"location":"guide/routing/#nested-sub-routers","title":"Nested Sub-Routers","text":"<p>You can nest routers multiple levels deep:</p> <pre><code># api/v1/users.py\nusers_router = FlaskRouter()\n\n@users_router.get(\"/\")\ndef list_users():\n    return []\n\n# api/v1/__init__.py\nv1_router = FlaskRouter()\nv1_router.include_router(users_router, prefix=\"/users\")\n\n# main.py\nmain_router = FlaskRouter(app=app)\nmain_router.include_router(v1_router, prefix=\"/api/v1\")\n\n# Final route: GET /api/v1/users/\n</code></pre>"},{"location":"guide/routing/#sub-router-tags","title":"Sub-Router Tags","text":"<p>Apply tags to all routes in a sub-router:</p> <pre><code># When including, you can override tags\n# (Note: This requires manually adding tags to each route)\nusers_router = FlaskRouter()\n\n@users_router.get(\"/\", tags=[\"Users\"])\ndef list_users():\n    return []\n\n@users_router.post(\"/\", tags=[\"Users\"])\ndef create_user(user: User):\n    return user\n\nmain_router.include_router(users_router, prefix=\"/users\")\n</code></pre>"},{"location":"guide/routing/#router-configuration","title":"Router Configuration","text":"<p>Configure the router when creating it:</p> <pre><code>router = FlaskRouter(\n    app=app,\n    title=\"My API\",                    # API title\n    version=\"1.0.0\",                   # API version\n    description=\"My API documentation\", # Description\n    docs_url=\"/docs\",                  # Swagger UI path\n    redoc_url=\"/redoc\",                # ReDoc path\n    openapi_url=\"/openapi.json\",       # OpenAPI schema path\n    openapi_version=\"3.0.0\",           # OpenAPI spec version\n)\n</code></pre>"},{"location":"guide/routing/#disabling-documentation","title":"Disabling Documentation","text":"<p>To disable all documentation endpoints, set any URL to <code>None</code>:</p> <pre><code>router = FlaskRouter(\n    app=app,\n    docs_url=None,         # Disables all: Swagger UI, ReDoc, and OpenAPI JSON\n)\n</code></pre>"},{"location":"guide/routing/#custom-documentation-urls","title":"Custom Documentation URLs","text":"<p>Use custom paths for documentation:</p> <pre><code>router = FlaskRouter(\n    app=app,\n    docs_url=\"/api-docs\",           # Custom Swagger UI path\n    redoc_url=\"/api-documentation\", # Custom ReDoc path\n    openapi_url=\"/api-schema.json\", # Custom schema path\n)\n</code></pre>"},{"location":"guide/routing/#route-order-and-priority","title":"Route Order and Priority","text":"<p>Routes are matched in the order they're defined. More specific routes should come before generic ones:</p> <pre><code># Good - specific before generic\n@router.get(\"/items/featured\")\ndef get_featured_items():\n    return {\"items\": [\"featured1\", \"featured2\"]}\n\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n# Bad - generic catches everything\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n\n@router.get(\"/items/featured\")  # This will never be reached!\ndef get_featured_items():\n    return {\"items\": [\"featured1\", \"featured2\"]}\n</code></pre>"},{"location":"guide/routing/#advanced-route-patterns","title":"Advanced Route Patterns","text":""},{"location":"guide/routing/#optional-path-segments","title":"Optional Path Segments","text":"<p>Use query parameters instead of optional path segments:</p> <pre><code># Don't do this:\n# /items/{item_id?}\n\n# Do this:\n@router.get(\"/items\")\ndef get_items(item_id: int | None = Query(None)):\n    if item_id:\n        return {\"item\": item_id}\n    return {\"items\": []}\n</code></pre>"},{"location":"guide/routing/#multiple-path-types","title":"Multiple Path Types","text":"<pre><code># String path\n@router.get(\"/categories/{category_name}\")\ndef get_category(category_name: str):\n    return {\"category\": category_name}\n\n# Integer path\n@router.get(\"/items/{item_id}\")\ndef get_item(item_id: int):\n    return {\"item_id\": item_id}\n</code></pre>"},{"location":"guide/routing/#path-with-regex-framework-specific","title":"Path with Regex (Framework-specific)","text":"<p>Some frameworks support regex in paths. Check your framework's documentation:</p> <pre><code># Flask example with regex converter\n@router.get(\"/users/&lt;regex('[a-z]+'):username&gt;\")\ndef get_user(username: str):\n    return {\"username\": username}\n</code></pre>"},{"location":"guide/routing/#best-practices","title":"Best Practices","text":""},{"location":"guide/routing/#1-use-descriptive-names","title":"1. Use Descriptive Names","text":"<pre><code># Good\n@router.get(\"/users/{user_id}\")\ndef get_user(user_id: int):\n    pass\n\n# Bad\n@router.get(\"/users/{id}\")\ndef get(id: int):\n    pass\n</code></pre>"},{"location":"guide/routing/#2-follow-rest-conventions","title":"2. Follow REST Conventions","text":"<pre><code># Collection operations\n@router.get(\"/items\")        # List items\n@router.post(\"/items\")       # Create item\n\n# Resource operations\n@router.get(\"/items/{id}\")    # Get item\n@router.put(\"/items/{id}\")    # Replace item\n@router.patch(\"/items/{id}\")  # Update item\n@router.delete(\"/items/{id}\") # Delete item\n</code></pre>"},{"location":"guide/routing/#3-use-plural-nouns-for-collections","title":"3. Use Plural Nouns for Collections","text":"<pre><code># Good\n@router.get(\"/users\")\n@router.get(\"/items\")\n\n# Avoid\n@router.get(\"/user\")\n@router.get(\"/item\")\n</code></pre>"},{"location":"guide/routing/#4-version-your-api","title":"4. Version Your API","text":"<pre><code># Use URL versioning\nmain_router.include_router(v1_router, prefix=\"/api/v1\")\nmain_router.include_router(v2_router, prefix=\"/api/v2\")\n</code></pre>"},{"location":"guide/routing/#5-use-nouns-not-verbs","title":"5. Use Nouns, Not Verbs","text":"<pre><code># Good\n@router.post(\"/items\")        # Create an item\n@router.delete(\"/items/{id}\") # Delete an item\n\n# Avoid\n@router.post(\"/create-item\")\n@router.post(\"/delete-item\")\n</code></pre>"},{"location":"guide/routing/#next-steps","title":"Next Steps","text":"<ul> <li>Request Parameters - Query, header, cookie parameters</li> <li>Request Body - Handle JSON, forms, and files</li> <li>Response Handling - Customize responses</li> <li>Error Handling - Handle exceptions</li> </ul>"},{"location":"guide/security/","title":"Security","text":"<p>This guide covers authentication and authorization in FastOpenAPI.</p>"},{"location":"guide/security/#security-schemes","title":"Security Schemes","text":"<p>FastOpenAPI supports multiple security schemes out of the box.</p>"},{"location":"guide/security/#configuring-security","title":"Configuring Security","text":"<p>Set the security scheme when creating the router:</p> <pre><code>from fastopenapi.routers import FlaskRouter\nfrom fastopenapi import SecuritySchemeType\n\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.BEARER_JWT\n)\n</code></pre>"},{"location":"guide/security/#available-security-schemes","title":"Available Security Schemes","text":"<ul> <li><code>BEARER_JWT</code> - Bearer token with JWT (default)</li> <li><code>API_KEY_HEADER</code> - API key in header</li> <li><code>API_KEY_QUERY</code> - API key in query parameter</li> <li><code>BASIC_AUTH</code> - Basic authentication</li> <li><code>OAUTH2</code> - OAuth2 flows</li> </ul>"},{"location":"guide/security/#understanding-security","title":"Understanding Security()","text":"<p>The <code>Security()</code> class is a specialized dependency marker for authentication. It works like <code>Depends()</code> but additionally marks the endpoint as requiring authentication in the OpenAPI documentation.</p>"},{"location":"guide/security/#basic-usage","title":"Basic Usage","text":"<p><code>Security()</code> takes a dependency function that handles your authentication logic:</p> <pre><code>from fastopenapi import Security, Depends, Header\nfrom fastopenapi.errors import AuthenticationError\n\ndef get_bearer_token(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Bearer \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n    return authorization[7:]  # Token without \"Bearer \" prefix\n\n@router.get(\"/protected\")\ndef protected(token: str = Security(get_bearer_token)):\n    payload = verify_jwt_token(token)\n    return {\"user_id\": payload[\"user_id\"]}\n</code></pre>"},{"location":"guide/security/#chaining-dependencies","title":"Chaining Dependencies","text":"<p>You can build authentication chains using <code>Depends()</code> and <code>Security()</code>:</p> <pre><code>def get_current_user(token: str = Depends(get_bearer_token)):\n    payload = verify_jwt_token(token)\n    user = database.get_user(payload[\"user_id\"])\n    if not user:\n        raise AuthenticationError(\"User not found\")\n    return user\n\n@router.get(\"/profile\")\ndef profile(user = Security(get_current_user)):\n    return {\"username\": user.username}\n</code></pre>"},{"location":"guide/security/#security-with-scopes","title":"Security() With Scopes","text":"<p>The <code>scopes</code> parameter allows OAuth2-style scope validation. Required scopes are injected into the dependency function via the <code>SecurityScopes</code> parameter:</p> <pre><code>from fastopenapi import Security, SecurityScopes, Depends\nfrom fastopenapi.errors import AuthorizationError\n\ndef verify_scopes(\n    security_scopes: SecurityScopes,\n    token: str = Depends(get_bearer_token),\n):\n    payload = verify_jwt_token(token)\n    token_scopes = payload.get(\"scopes\", [])\n\n    for scope in security_scopes.scopes:\n        if scope not in token_scopes:\n            raise AuthorizationError(f\"Scope '{scope}' required\")\n\n    return payload\n\n# Require specific scopes\n@router.get(\"/admin/users\")\ndef list_users(user = Security(verify_scopes, scopes=[\"admin:read\"])):\n    return {\"users\": [...]}\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user(user_id: int, user = Security(verify_scopes, scopes=[\"users:delete\"])):\n    return {\"deleted\": user_id}\n</code></pre> <p>The <code>SecurityScopes</code> object receives the <code>scopes</code> list from the <code>Security()</code> declaration. The function itself decides how to validate them. Scopes are also shown in the OpenAPI documentation.</p>"},{"location":"guide/security/#bearer-jwt-authentication","title":"Bearer JWT Authentication","text":""},{"location":"guide/security/#basic-setup","title":"Basic Setup","text":"<pre><code>from fastopenapi import Security\n\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.BEARER_JWT\n)\n\n@router.get(\"/protected\")\ndef protected_endpoint(token: str = Security(get_bearer_token)):\n    payload = verify_jwt_token(token)\n    return {\"user_id\": payload[\"user_id\"]}\n</code></pre>"},{"location":"guide/security/#jwt-token-validation","title":"JWT Token Validation","text":"<pre><code>import jwt\nfrom datetime import datetime, timedelta\nfrom fastopenapi.errors import AuthenticationError\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\ndef create_token(user_id: int) -&gt; str:\n    payload = {\n        \"user_id\": user_id,\n        \"exp\": datetime.utcnow() + timedelta(hours=24)\n    }\n    return jwt.encode(payload, SECRET_KEY, algorithm=ALGORITHM)\n\ndef verify_jwt_token(token: str) -&gt; dict:\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        return payload\n    except jwt.ExpiredSignatureError:\n        raise AuthenticationError(\"Token has expired\")\n    except jwt.InvalidTokenError:\n        raise AuthenticationError(\"Invalid token\")\n</code></pre>"},{"location":"guide/security/#login-endpoint","title":"Login Endpoint","text":"<pre><code>from pydantic import BaseModel\n\nclass LoginRequest(BaseModel):\n    username: str\n    password: str\n\nclass LoginResponse(BaseModel):\n    access_token: str\n    token_type: str = \"bearer\"\n\n@router.post(\"/login\", response_model=LoginResponse)\ndef login(credentials: LoginRequest):\n    user = authenticate_user(credentials.username, credentials.password)\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    token = create_token(user.id)\n    return {\"access_token\": token, \"token_type\": \"bearer\"}\n</code></pre>"},{"location":"guide/security/#protected-endpoints-with-jwt","title":"Protected Endpoints with JWT","text":"<pre><code>def get_current_user(token: str = Depends(get_bearer_token)):\n    payload = verify_jwt_token(token)\n    user = database.get_user(payload[\"user_id\"])\n    if not user:\n        raise AuthenticationError(\"User not found\")\n    return user\n\n@router.get(\"/profile\")\ndef get_profile(current_user = Depends(get_current_user)):\n    return {\n        \"user_id\": current_user.id,\n        \"username\": current_user.username,\n        \"email\": current_user.email\n    }\n</code></pre>"},{"location":"guide/security/#api-key-authentication","title":"API Key Authentication","text":""},{"location":"guide/security/#header-based-api-key","title":"Header-Based API Key","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.API_KEY_HEADER\n)\n\nVALID_API_KEYS = {\n    \"key123\": {\"user_id\": 1, \"name\": \"User 1\"},\n    \"key456\": {\"user_id\": 2, \"name\": \"User 2\"}\n}\n\ndef verify_api_key(api_key: str = Header(..., alias=\"X-API-Key\")):\n    if api_key not in VALID_API_KEYS:\n        raise AuthenticationError(\"Invalid API key\")\n    return VALID_API_KEYS[api_key]\n\n@router.get(\"/data\")\ndef get_data(user_data = Depends(verify_api_key)):\n    return {\"data\": \"sensitive\", \"user\": user_data[\"name\"]}\n</code></pre>"},{"location":"guide/security/#query-parameter-api-key","title":"Query Parameter API Key","text":"<pre><code>router = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.API_KEY_QUERY\n)\n\ndef verify_api_key(api_key: str = Query(...)):\n    if api_key not in VALID_API_KEYS:\n        raise AuthenticationError(\"Invalid API key\")\n    return VALID_API_KEYS[api_key]\n\n@router.get(\"/data\")\ndef get_data(user_data = Depends(verify_api_key)):\n    return {\"data\": \"sensitive\"}\n</code></pre>"},{"location":"guide/security/#basic-authentication","title":"Basic Authentication","text":""},{"location":"guide/security/#setup","title":"Setup","text":"<pre><code>import base64\nfrom fastopenapi import Header\n\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.BASIC_AUTH\n)\n\ndef verify_basic_auth(authorization: str = Header(..., alias=\"Authorization\")):\n    if not authorization.startswith(\"Basic \"):\n        raise AuthenticationError(\"Invalid authorization header\")\n\n    # Decode base64\n    encoded = authorization[6:]\n    try:\n        decoded = base64.b64decode(encoded).decode(\"utf-8\")\n        username, password = decoded.split(\":\", 1)\n    except Exception:\n        raise AuthenticationError(\"Invalid authorization format\")\n\n    # Verify credentials\n    user = authenticate_user(username, password)\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    return user\n\n@router.get(\"/protected\")\ndef protected_endpoint(user = Depends(verify_basic_auth)):\n    return {\"message\": f\"Hello, {user.username}\"}\n</code></pre>"},{"location":"guide/security/#oauth2","title":"OAuth2","text":""},{"location":"guide/security/#oauth2-password-flow","title":"OAuth2 Password Flow","text":"<pre><code>from pydantic import BaseModel\n\nrouter = FlaskRouter(\n    app=app,\n    security_scheme=SecuritySchemeType.OAUTH2\n)\n\nclass OAuth2TokenRequest(BaseModel):\n    grant_type: str\n    username: str\n    password: str\n    scope: str = \"\"\n\nclass OAuth2TokenResponse(BaseModel):\n    access_token: str\n    token_type: str\n    expires_in: int\n    scope: str\n\n@router.post(\"/token\", response_model=OAuth2TokenResponse)\ndef get_token(form_data: OAuth2TokenRequest = Form(...)):\n    if form_data.grant_type != \"password\":\n        raise BadRequestError(\"Unsupported grant type\")\n\n    user = authenticate_user(form_data.username, form_data.password)\n    if not user:\n        raise AuthenticationError(\"Invalid credentials\")\n\n    token = create_token(user.id)\n\n    return {\n        \"access_token\": token,\n        \"token_type\": \"bearer\",\n        \"expires_in\": 86400,\n        \"scope\": form_data.scope\n    }\n</code></pre>"},{"location":"guide/security/#role-based-access-control","title":"Role-Based Access Control","text":""},{"location":"guide/security/#simple-role-check","title":"Simple Role Check","text":"<pre><code>class User:\n    def __init__(self, id: int, username: str, role: str):\n        self.id = id\n        self.username = username\n        self.role = role\n\ndef get_current_user(token: str = Depends(get_bearer_token)) -&gt; User:\n    payload = verify_jwt_token(token)\n    user = database.get_user(payload[\"user_id\"])\n    return user\n\ndef require_role(role: str):\n    def role_checker(current_user: User = Depends(get_current_user)):\n        if current_user.role != role:\n            raise AuthorizationError(f\"Role '{role}' required\")\n        return current_user\n    return role_checker\n\n@router.get(\"/admin/users\")\ndef list_all_users(admin: User = Depends(require_role(\"admin\"))):\n    return {\"users\": database.get_all_users()}\n</code></pre>"},{"location":"guide/security/#multiple-roles","title":"Multiple Roles","text":"<pre><code>def require_any_role(*roles: str):\n    def role_checker(current_user: User = Depends(get_current_user)):\n        if current_user.role not in roles:\n            raise AuthorizationError(f\"One of roles {roles} required\")\n        return current_user\n    return role_checker\n\n@router.get(\"/moderator/reports\")\ndef get_reports(user: User = Depends(require_any_role(\"admin\", \"moderator\"))):\n    return {\"reports\": get_pending_reports()}\n</code></pre>"},{"location":"guide/security/#permission-based-access-control","title":"Permission-Based Access Control","text":""},{"location":"guide/security/#permission-system","title":"Permission System","text":"<pre><code>class User:\n    def __init__(self, id: int, username: str, permissions: list[str]):\n        self.id = id\n        self.username = username\n        self.permissions = permissions\n\n    def has_permission(self, permission: str) -&gt; bool:\n        return permission in self.permissions\n\ndef require_permission(permission: str):\n    def permission_checker(current_user: User = Depends(get_current_user)):\n        if not current_user.has_permission(permission):\n            raise AuthorizationError(f\"Permission '{permission}' required\")\n        return current_user\n    return permission_checker\n\n@router.delete(\"/users/{user_id}\")\ndef delete_user(\n    user_id: int,\n    current_user: User = Depends(require_permission(\"users:delete\"))\n):\n    database.delete_user(user_id)\n    return {\"deleted\": user_id}\n</code></pre>"},{"location":"guide/security/#hierarchical-permissions","title":"Hierarchical Permissions","text":"<pre><code>PERMISSION_HIERARCHY = {\n    \"admin\": [\"users:read\", \"users:write\", \"users:delete\", \"posts:*\"],\n    \"editor\": [\"posts:read\", \"posts:write\"],\n    \"viewer\": [\"posts:read\"]\n}\n\ndef expand_permissions(role: str) -&gt; set[str]:\n    perms = set()\n    for perm in PERMISSION_HIERARCHY.get(role, []):\n        if perm.endswith(\":*\"):\n            # Wildcard permission\n            prefix = perm[:-1]\n            perms.update([p for p in ALL_PERMISSIONS if p.startswith(prefix)])\n        else:\n            perms.add(perm)\n    return perms\n\ndef check_permission(user: User, required: str) -&gt; bool:\n    user_perms = expand_permissions(user.role)\n    return required in user_perms\n</code></pre>"},{"location":"guide/security/#resource-ownership","title":"Resource Ownership","text":""},{"location":"guide/security/#owner-only-access","title":"Owner-Only Access","text":"<pre><code>def require_owner(resource_type: str):\n    def ownership_checker(\n        resource_id: int,\n        current_user: User = Depends(get_current_user)\n    ):\n        resource = database.get_resource(resource_type, resource_id)\n        if not resource:\n            raise ResourceNotFoundError(f\"{resource_type} not found\")\n\n        if resource.owner_id != current_user.id and current_user.role != \"admin\":\n            raise AuthorizationError(\"You don't own this resource\")\n\n        return resource\n    return ownership_checker\n\n@router.put(\"/posts/{post_id}\")\ndef update_post(\n    post_id: int,\n    updates: PostUpdate,\n    post = Depends(require_owner(\"post\"))\n):\n    database.update_post(post_id, updates)\n    return {\"updated\": post_id}\n</code></pre>"},{"location":"guide/security/#scopes","title":"Scopes","text":""},{"location":"guide/security/#token-with-scopes","title":"Token with Scopes","text":"<pre><code>def create_token_with_scopes(user_id: int, scopes: list[str]) -&gt; str:\n    payload = {\n        \"user_id\": user_id,\n        \"scopes\": scopes,\n        \"exp\": datetime.utcnow() + timedelta(hours=24)\n    }\n    return jwt.encode(payload, SECRET_KEY, algorithm=ALGORITHM)\n\ndef verify_scopes(\n    security_scopes: SecurityScopes,\n    token: str = Depends(get_bearer_token),\n):\n    payload = verify_jwt_token(token)\n    token_scopes = set(payload.get(\"scopes\", []))\n\n    for scope in security_scopes.scopes:\n        if scope not in token_scopes:\n            raise AuthorizationError(f\"Scope '{scope}' required\")\n\n    return payload\n\n@router.get(\"/admin/stats\")\ndef admin_stats(payload = Security(verify_scopes, scopes=[\"admin:read\", \"stats:read\"])):\n    return {\"stats\": get_statistics()}\n</code></pre>"},{"location":"guide/security/#rate-limiting","title":"Rate Limiting","text":""},{"location":"guide/security/#simple-rate-limiter","title":"Simple Rate Limiter","text":"<pre><code>from datetime import datetime, timedelta\nfrom collections import defaultdict\n\nrate_limits = defaultdict(list)\n\ndef rate_limit(max_requests: int = 100, window_seconds: int = 3600):\n    def limiter(\n        api_key: str = Header(..., alias=\"X-API-Key\")\n    ):\n        now = datetime.utcnow()\n        key = f\"rate:{api_key}\"\n\n        # Clean old requests\n        rate_limits[key] = [\n            req_time for req_time in rate_limits[key]\n            if now - req_time &lt; timedelta(seconds=window_seconds)\n        ]\n\n        # Check limit\n        if len(rate_limits[key]) &gt;= max_requests:\n            raise AuthorizationError(\"Rate limit exceeded\")\n\n        # Record request\n        rate_limits[key].append(now)\n        return api_key\n\n    return limiter\n\n@router.get(\"/api/data\")\ndef get_data(api_key: str = Depends(rate_limit(max_requests=100))):\n    return {\"data\": \"...\"}\n</code></pre>"},{"location":"guide/security/#user-based-rate-limiting","title":"User-Based Rate Limiting","text":"<pre><code>def user_rate_limit(max_requests: int = 100):\n    def limiter(current_user: User = Depends(get_current_user)):\n        now = datetime.utcnow()\n        key = f\"rate:user:{current_user.id}\"\n\n        rate_limits[key] = [\n            req_time for req_time in rate_limits[key]\n            if now - req_time &lt; timedelta(hours=1)\n        ]\n\n        if len(rate_limits[key]) &gt;= max_requests:\n            raise AuthorizationError(\"Rate limit exceeded\")\n\n        rate_limits[key].append(now)\n        return current_user\n\n    return limiter\n\n@router.get(\"/expensive-operation\")\ndef expensive_op(user: User = Depends(user_rate_limit(max_requests=10))):\n    return perform_expensive_operation()\n</code></pre>"},{"location":"guide/security/#ip-whitelisting","title":"IP Whitelisting","text":""},{"location":"guide/security/#ip-based-access-control","title":"IP-Based Access Control","text":"<pre><code>from fastopenapi import Header, Depends\nfrom fastopenapi.errors import AuthorizationError\n\nALLOWED_IPS = {\"192.168.1.1\", \"10.0.0.1\"}\n\ndef require_whitelisted_ip(\n    x_forwarded_for: str = Header(..., alias=\"X-Forwarded-For\"),\n):\n    if x_forwarded_for not in ALLOWED_IPS:\n        raise AuthorizationError(\"Access denied from this IP\")\n    return x_forwarded_for\n\n@router.get(\"/internal/status\")\ndef internal_status(client_ip: str = Depends(require_whitelisted_ip)):\n    return {\"status\": \"ok\", \"client_ip\": client_ip}\n</code></pre>"},{"location":"guide/security/#multi-factor-authentication","title":"Multi-Factor Authentication","text":""},{"location":"guide/security/#totp-verification","title":"TOTP Verification","text":"<pre><code>import pyotp\n\ndef verify_totp(\n    totp_code: str = Header(..., alias=\"X-TOTP-Code\"),\n    current_user: User = Depends(get_current_user)\n):\n    totp = pyotp.TOTP(current_user.totp_secret)\n\n    if not totp.verify(totp_code):\n        raise AuthenticationError(\"Invalid TOTP code\")\n\n    return current_user\n\n@router.get(\"/sensitive-data\")\ndef get_sensitive_data(user: User = Depends(verify_totp)):\n    return {\"data\": \"highly sensitive\"}\n</code></pre>"},{"location":"guide/security/#security-headers","title":"Security Headers","text":""},{"location":"guide/security/#adding-security-headers","title":"Adding Security Headers","text":"<pre><code>from fastopenapi import Response\n\n@router.get(\"/secure-endpoint\")\ndef secure_endpoint():\n    return Response(\n        content={\"data\": \"secure\"},\n        headers={\n            \"X-Content-Type-Options\": \"nosniff\",\n            \"X-Frame-Options\": \"DENY\",\n            \"X-XSS-Protection\": \"1; mode=block\",\n            \"Strict-Transport-Security\": \"max-age=31536000; includeSubDomains\"\n        }\n    )\n</code></pre>"},{"location":"guide/security/#cors-configuration","title":"CORS Configuration","text":""},{"location":"guide/security/#framework-specific-cors","title":"Framework-Specific CORS","text":"<p>For production, use framework-specific CORS middleware:</p> <p>Flask: <pre><code>from flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app, resources={r\"/api/*\": {\"origins\": \"https://example.com\"}})\n</code></pre></p> <p>Starlette: <pre><code>from starlette.middleware.cors import CORSMiddleware\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://example.com\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"]\n)\n</code></pre></p>"},{"location":"guide/security/#password-security","title":"Password Security","text":""},{"location":"guide/security/#password-hashing","title":"Password Hashing","text":"<pre><code>from passlib.context import CryptContext\n\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\ndef hash_password(password: str) -&gt; str:\n    return pwd_context.hash(password)\n\ndef verify_password(plain_password: str, hashed_password: str) -&gt; bool:\n    return pwd_context.verify(plain_password, hashed_password)\n\ndef authenticate_user(username: str, password: str) -&gt; User | None:\n    user = database.get_user_by_username(username)\n    if not user:\n        return None\n\n    if not verify_password(password, user.hashed_password):\n        return None\n\n    return user\n</code></pre>"},{"location":"guide/security/#session-management","title":"Session Management","text":""},{"location":"guide/security/#session-tokens","title":"Session Tokens","text":"<pre><code>import secrets\n\nsessions = {}  # Use Redis in production\n\ndef create_session(user_id: int) -&gt; str:\n    session_token = secrets.token_urlsafe(32)\n    sessions[session_token] = {\n        \"user_id\": user_id,\n        \"created_at\": datetime.utcnow(),\n        \"expires_at\": datetime.utcnow() + timedelta(hours=24)\n    }\n    return session_token\n\ndef get_session_user(session_token: str = Cookie(...)):\n    session = sessions.get(session_token)\n    if not session:\n        raise AuthenticationError(\"Invalid session\")\n\n    if datetime.utcnow() &gt; session[\"expires_at\"]:\n        del sessions[session_token]\n        raise AuthenticationError(\"Session expired\")\n\n    user = database.get_user(session[\"user_id\"])\n    return user\n\n@router.get(\"/profile\")\ndef get_profile(user: User = Depends(get_session_user)):\n    return {\"user\": user}\n</code></pre>"},{"location":"guide/security/#security-best-practices","title":"Security Best Practices","text":""},{"location":"guide/security/#1-never-store-plaintext-passwords","title":"1. Never Store Plaintext Passwords","text":"<pre><code># Good\nuser.hashed_password = hash_password(password)\n\n# NEVER DO THIS\nuser.password = password\n</code></pre>"},{"location":"guide/security/#2-use-https-in-production","title":"2. Use HTTPS in Production","text":"<p>Always use HTTPS for APIs handling authentication.</p>"},{"location":"guide/security/#3-validate-token-expiration","title":"3. Validate Token Expiration","text":"<pre><code># Good\nif datetime.utcnow() &gt; token_payload[\"exp\"]:\n    raise AuthenticationError(\"Token expired\")\n\n# Avoid - no expiration check\n</code></pre>"},{"location":"guide/security/#4-use-strong-secret-keys","title":"4. Use Strong Secret Keys","text":"<pre><code># Good\nSECRET_KEY = secrets.token_urlsafe(32)\n\n# NEVER DO THIS\nSECRET_KEY = \"password123\"\n</code></pre>"},{"location":"guide/security/#5-implement-rate-limiting","title":"5. Implement Rate Limiting","text":"<p>Always implement rate limiting on authentication endpoints.</p>"},{"location":"guide/security/#6-log-security-events","title":"6. Log Security Events","text":"<pre><code>import logging\n\nlogger = logging.getLogger(__name__)\n\ndef authenticate_user(username: str, password: str):\n    user = database.get_user_by_username(username)\n\n    if not user or not verify_password(password, user.hashed_password):\n        logger.warning(f\"Failed login attempt for user: {username}\")\n        return None\n\n    logger.info(f\"Successful login for user: {username}\")\n    return user\n</code></pre>"},{"location":"guide/security/#7-use-secure-token-storage","title":"7. Use Secure Token Storage","text":"<p>Store JWT secret keys in environment variables:</p> <pre><code>import os\n\nSECRET_KEY = os.getenv(\"JWT_SECRET_KEY\")\nif not SECRET_KEY:\n    raise ValueError(\"JWT_SECRET_KEY environment variable not set\")\n</code></pre>"},{"location":"guide/security/#common-security-patterns","title":"Common Security Patterns","text":""},{"location":"guide/security/#refresh-tokens","title":"Refresh Tokens","text":"<pre><code>def create_tokens(user_id: int):\n    access_token = create_token(user_id, expires_delta=timedelta(minutes=15))\n    refresh_token = create_token(user_id, expires_delta=timedelta(days=30))\n    return access_token, refresh_token\n\n@router.post(\"/refresh\")\ndef refresh_access_token(refresh_token: str = Body(...)):\n    try:\n        payload = verify_jwt_token(refresh_token)\n        new_access_token = create_token(payload[\"user_id\"])\n        return {\"access_token\": new_access_token}\n    except Exception:\n        raise AuthenticationError(\"Invalid refresh token\")\n</code></pre>"},{"location":"guide/security/#password-reset","title":"Password Reset","text":"<pre><code>def create_reset_token(email: str) -&gt; str:\n    token = secrets.token_urlsafe(32)\n    reset_tokens[token] = {\n        \"email\": email,\n        \"expires_at\": datetime.utcnow() + timedelta(hours=1)\n    }\n    return token\n\n@router.post(\"/password-reset-request\")\ndef request_password_reset(email: str = Body(...)):\n    user = database.get_user_by_email(email)\n    if user:\n        token = create_reset_token(email)\n        send_reset_email(email, token)\n\n    # Always return success to prevent email enumeration\n    return {\"message\": \"If account exists, reset email sent\"}\n\n@router.post(\"/password-reset\")\ndef reset_password(token: str = Body(...), new_password: str = Body(...)):\n    reset_data = reset_tokens.get(token)\n\n    if not reset_data or datetime.utcnow() &gt; reset_data[\"expires_at\"]:\n        raise AuthenticationError(\"Invalid or expired reset token\")\n\n    user = database.get_user_by_email(reset_data[\"email\"])\n    user.hashed_password = hash_password(new_password)\n    database.save(user)\n\n    del reset_tokens[token]\n    return {\"message\": \"Password reset successful\"}\n</code></pre>"},{"location":"guide/security/#next-steps","title":"Next Steps","text":"<ul> <li>Error Handling - Handle authentication errors</li> <li>Dependencies - More on dependency injection</li> <li>Examples - Complete auth example</li> <li>Testing - Test secured endpoints</li> </ul>"},{"location":"guide/validation/","title":"Validation","text":"<p>This guide covers data validation using Pydantic models in FastOpenAPI.</p>"},{"location":"guide/validation/#pydantic-basics","title":"Pydantic Basics","text":"<p>FastOpenAPI uses Pydantic v2 for validation. All request bodies and response models are Pydantic models.</p>"},{"location":"guide/validation/#basic-model","title":"Basic Model","text":"<pre><code>from pydantic import BaseModel\n\nclass User(BaseModel):\n    name: str\n    email: str\n    age: int\n</code></pre>"},{"location":"guide/validation/#type-validation","title":"Type Validation","text":"<p>Pydantic automatically validates types:</p> <pre><code># Valid\nUser(name=\"John\", email=\"john@example.com\", age=25)\n\n# Invalid - age must be int\nUser(name=\"John\", email=\"john@example.com\", age=\"25\")  # Converts to int\n\n# Invalid - missing field\nUser(name=\"John\", email=\"john@example.com\")  # ValidationError\n</code></pre>"},{"location":"guide/validation/#field-constraints","title":"Field Constraints","text":"<p>Use <code>Field</code> to add validation rules:</p> <pre><code>from pydantic import BaseModel, Field\n\nclass Item(BaseModel):\n    name: str = Field(..., min_length=1, max_length=100)\n    price: float = Field(..., gt=0, description=\"Price must be positive\")\n    quantity: int = Field(1, ge=0, le=10000)\n    description: str | None = Field(None, max_length=500)\n</code></pre>"},{"location":"guide/validation/#string-constraints","title":"String Constraints","text":"<pre><code>from pydantic import Field\n\nclass Product(BaseModel):\n    name: str = Field(..., min_length=3, max_length=50)\n    sku: str = Field(..., pattern=r'^[A-Z]{3}-\\d{6}$')\n    description: str = Field(None, max_length=1000)\n</code></pre> <p>Available constraints:</p> <ul> <li><code>min_length</code> - Minimum string length</li> <li><code>max_length</code> - Maximum string length</li> <li><code>pattern</code> - Regex pattern (string must match)</li> </ul>"},{"location":"guide/validation/#numeric-constraints","title":"Numeric Constraints","text":"<pre><code>class PriceRange(BaseModel):\n    min_price: float = Field(..., ge=0, description=\"Minimum price\")\n    max_price: float = Field(..., gt=0, le=1000000)\n    discount: float = Field(0, ge=0, le=1, description=\"0 to 1\")\n</code></pre> <p>Available constraints:</p> <ul> <li><code>gt</code> - Greater than</li> <li><code>ge</code> - Greater than or equal to</li> <li><code>lt</code> - Less than</li> <li><code>le</code> - Less than or equal to</li> <li><code>multiple_of</code> - Must be multiple of value</li> </ul>"},{"location":"guide/validation/#collection-constraints","title":"Collection Constraints","text":"<pre><code>class ItemList(BaseModel):\n    tags: list[str] = Field(..., min_length=1, max_length=10)\n    categories: set[str] = Field(default_factory=set, max_length=5)\n</code></pre>"},{"location":"guide/validation/#default-values","title":"Default Values","text":""},{"location":"guide/validation/#simple-defaults","title":"Simple Defaults","text":"<pre><code>class User(BaseModel):\n    name: str\n    email: str\n    age: int = 18  # Default value\n    is_active: bool = True\n</code></pre>"},{"location":"guide/validation/#default-factories","title":"Default Factories","text":"<p>Use <code>default_factory</code> for mutable defaults:</p> <pre><code>class Order(BaseModel):\n    items: list[str] = Field(default_factory=list)\n    metadata: dict = Field(default_factory=dict)\n    created_at: datetime = Field(default_factory=datetime.now)\n</code></pre>"},{"location":"guide/validation/#optional-fields","title":"Optional Fields","text":"<pre><code>class User(BaseModel):\n    name: str\n    email: str\n    phone: str | None = None  # Optional field\n    address: str | None = None\n</code></pre>"},{"location":"guide/validation/#custom-validators","title":"Custom Validators","text":""},{"location":"guide/validation/#field-validator","title":"Field Validator","text":"<p>Validate individual fields:</p> <pre><code>from pydantic import field_validator\n\nclass User(BaseModel):\n    username: str\n    email: str\n\n    @field_validator('username')\n    @classmethod\n    def username_alphanumeric(cls, v: str) -&gt; str:\n        if not v.isalnum():\n            raise ValueError('Username must be alphanumeric')\n        return v.lower()  # Normalize to lowercase\n\n    @field_validator('email')\n    @classmethod\n    def email_valid(cls, v: str) -&gt; str:\n        if '@' not in v:\n            raise ValueError('Invalid email format')\n        return v.lower()\n</code></pre>"},{"location":"guide/validation/#multiple-field-validator","title":"Multiple Field Validator","text":"<p>Validate multiple fields with one validator:</p> <pre><code>class Password(BaseModel):\n    password: str\n    confirm_password: str\n\n    @field_validator('password')\n    @classmethod\n    def password_strength(cls, v: str) -&gt; str:\n        if len(v) &lt; 8:\n            raise ValueError('Password must be at least 8 characters')\n        if not any(c.isupper() for c in v):\n            raise ValueError('Password must contain uppercase letter')\n        if not any(c.isdigit() for c in v):\n            raise ValueError('Password must contain digit')\n        return v\n</code></pre>"},{"location":"guide/validation/#model-validator","title":"Model Validator","text":"<p>Validate relationships between fields:</p> <pre><code>from pydantic import model_validator\n\nclass DateRange(BaseModel):\n    start_date: date\n    end_date: date\n\n    @model_validator(mode='after')\n    def validate_dates(self):\n        if self.start_date &gt; self.end_date:\n            raise ValueError('start_date must be before end_date')\n        return self\n</code></pre>"},{"location":"guide/validation/#beforeafter-validation","title":"Before/After Validation","text":"<pre><code>class Item(BaseModel):\n    name: str\n    price: float\n\n    @field_validator('name', mode='before')\n    @classmethod\n    def strip_name(cls, v):\n        # Runs before type validation\n        if isinstance(v, str):\n            return v.strip()\n        return v\n\n    @field_validator('price', mode='after')\n    @classmethod\n    def round_price(cls, v: float) -&gt; float:\n        # Runs after type validation\n        return round(v, 2)\n</code></pre>"},{"location":"guide/validation/#built-in-types","title":"Built-in Types","text":"<p>Pydantic provides many built-in validated types:</p>"},{"location":"guide/validation/#email","title":"Email","text":"<pre><code>from pydantic import EmailStr\n\nclass User(BaseModel):\n    email: EmailStr  # Validates email format\n</code></pre>"},{"location":"guide/validation/#urls","title":"URLs","text":"<pre><code>from pydantic import HttpUrl, AnyUrl\n\nclass Link(BaseModel):\n    website: HttpUrl  # Must be valid HTTP/HTTPS URL\n    homepage: AnyUrl  # Any URL scheme\n</code></pre>"},{"location":"guide/validation/#uuids","title":"UUIDs","text":"<pre><code>from uuid import UUID\n\nclass Resource(BaseModel):\n    id: UUID  # Validates UUID format\n</code></pre>"},{"location":"guide/validation/#dates-and-times","title":"Dates and Times","text":"<pre><code>from datetime import date, datetime, time\n\nclass Event(BaseModel):\n    event_date: date\n    event_time: time\n    created_at: datetime\n</code></pre>"},{"location":"guide/validation/#json","title":"JSON","text":"<pre><code>from pydantic import Json\n\nclass Config(BaseModel):\n    settings: Json  # Parses JSON string to dict\n</code></pre>"},{"location":"guide/validation/#strict-types","title":"Strict Types","text":"<pre><code>from pydantic import StrictInt, StrictStr, StrictBool\n\nclass StrictData(BaseModel):\n    id: StrictInt  # Won't convert from string\n    name: StrictStr  # Won't convert from other types\n    active: StrictBool  # Won't convert from int\n</code></pre>"},{"location":"guide/validation/#enums","title":"Enums","text":"<p>Use enums for fixed choices:</p> <pre><code>from enum import Enum\n\nclass Status(str, Enum):\n    PENDING = \"pending\"\n    APPROVED = \"approved\"\n    REJECTED = \"rejected\"\n\nclass Order(BaseModel):\n    id: int\n    status: Status  # Must be one of the enum values\n</code></pre> <p>Usage:</p> <pre><code># Valid\nOrder(id=1, status=\"pending\")\nOrder(id=1, status=Status.PENDING)\n\n# Invalid\nOrder(id=1, status=\"unknown\")  # ValidationError\n</code></pre>"},{"location":"guide/validation/#nested-models","title":"Nested Models","text":"<p>Validate nested data structures:</p> <pre><code>class Address(BaseModel):\n    street: str\n    city: str\n    postal_code: str\n    country: str = \"USA\"\n\nclass User(BaseModel):\n    name: str\n    email: EmailStr\n    address: Address  # Nested model\n\n# Usage\nuser = User(\n    name=\"John\",\n    email=\"john@example.com\",\n    address={\n        \"street\": \"123 Main St\",\n        \"city\": \"New York\",\n        \"postal_code\": \"10001\"\n    }\n)\n</code></pre>"},{"location":"guide/validation/#lists-of-nested-models","title":"Lists of Nested Models","text":"<pre><code>class Item(BaseModel):\n    name: str\n    price: float\n\nclass Order(BaseModel):\n    order_id: int\n    items: list[Item]  # List of nested models\n    total: float\n</code></pre>"},{"location":"guide/validation/#deeply-nested-models","title":"Deeply Nested Models","text":"<pre><code>class LineItem(BaseModel):\n    product_id: int\n    quantity: int\n    price: float\n\nclass ShippingAddress(BaseModel):\n    street: str\n    city: str\n    country: str\n\nclass Order(BaseModel):\n    order_id: int\n    items: list[LineItem]\n    shipping_address: ShippingAddress\n    created_at: datetime\n</code></pre>"},{"location":"guide/validation/#validation-modes","title":"Validation Modes","text":""},{"location":"guide/validation/#strict-mode","title":"Strict Mode","text":"<p>Disable type coercion:</p> <pre><code>from pydantic import ConfigDict\n\nclass StrictUser(BaseModel):\n    model_config = ConfigDict(strict=True)\n\n    id: int  # Won't convert \"123\" to 123\n    name: str  # Won't convert 123 to \"123\"\n</code></pre>"},{"location":"guide/validation/#extra-fields","title":"Extra Fields","text":"<p>Control behavior with extra fields:</p> <pre><code>class User(BaseModel):\n    model_config = ConfigDict(extra='forbid')  # Reject extra fields\n\n    name: str\n    email: str\n\n# This will raise ValidationError\nUser(name=\"John\", email=\"john@example.com\", age=25)  # age not allowed\n</code></pre> <p>Options:</p> <ul> <li><code>extra='allow'</code> - Allow and include extra fields</li> <li><code>extra='ignore'</code> - Allow but ignore extra fields</li> <li><code>extra='forbid'</code> - Reject extra fields (validation error)</li> </ul>"},{"location":"guide/validation/#alias-and-serialization","title":"Alias and Serialization","text":""},{"location":"guide/validation/#field-aliases","title":"Field Aliases","text":"<p>Use different names in JSON vs Python:</p> <pre><code>class User(BaseModel):\n    name: str = Field(..., alias='fullName')\n    email: str = Field(..., alias='emailAddress')\n</code></pre> <p>Request: <pre><code>{\n  \"fullName\": \"John Doe\",\n  \"emailAddress\": \"john@example.com\"\n}\n</code></pre></p> <p>Python: <pre><code>user.name  # \"John Doe\"\nuser.email  # \"john@example.com\"\n</code></pre></p>"},{"location":"guide/validation/#serialization-aliases","title":"Serialization Aliases","text":"<p>Different alias for serialization:</p> <pre><code>class User(BaseModel):\n    internal_id: int = Field(..., alias='userId', serialization_alias='id')\n</code></pre> <p>Request uses <code>userId</code>, response uses <code>id</code></p>"},{"location":"guide/validation/#complex-validation-examples","title":"Complex Validation Examples","text":""},{"location":"guide/validation/#password-validation","title":"Password Validation","text":"<pre><code>import re\nfrom pydantic import field_validator\n\nclass PasswordCreate(BaseModel):\n    password: str\n    confirm_password: str\n\n    @field_validator('password')\n    @classmethod\n    def validate_password(cls, v: str) -&gt; str:\n        if len(v) &lt; 8:\n            raise ValueError('Password must be at least 8 characters')\n        if not re.search(r'[A-Z]', v):\n            raise ValueError('Password must contain uppercase letter')\n        if not re.search(r'[a-z]', v):\n            raise ValueError('Password must contain lowercase letter')\n        if not re.search(r'\\d', v):\n            raise ValueError('Password must contain digit')\n        if not re.search(r'[!@#$%^&amp;*(),.?\":{}|&lt;&gt;]', v):\n            raise ValueError('Password must contain special character')\n        return v\n\n    @model_validator(mode='after')\n    def passwords_match(self):\n        if self.password != self.confirm_password:\n            raise ValueError('Passwords do not match')\n        return self\n</code></pre>"},{"location":"guide/validation/#phone-number-validation","title":"Phone Number Validation","text":"<pre><code>class Contact(BaseModel):\n    phone: str\n\n    @field_validator('phone')\n    @classmethod\n    def validate_phone(cls, v: str) -&gt; str:\n        # Remove non-digits\n        digits = re.sub(r'\\D', '', v)\n\n        if len(digits) != 10:\n            raise ValueError('Phone number must be 10 digits')\n\n        # Format as (XXX) XXX-XXXX\n        return f'({digits[:3]}) {digits[3:6]}-{digits[6:]}'\n</code></pre>"},{"location":"guide/validation/#credit-card-validation","title":"Credit Card Validation","text":"<pre><code>class Payment(BaseModel):\n    card_number: str\n    cvv: str\n    expiry_month: int\n    expiry_year: int\n\n    @field_validator('card_number')\n    @classmethod\n    def validate_card(cls, v: str) -&gt; str:\n        digits = v.replace(' ', '').replace('-', '')\n\n        if not digits.isdigit():\n            raise ValueError('Card number must contain only digits')\n\n        if len(digits) not in [13, 14, 15, 16]:\n            raise ValueError('Invalid card number length')\n\n        # Luhn algorithm\n        total = 0\n        reverse_digits = digits[::-1]\n        for i, digit in enumerate(reverse_digits):\n            n = int(digit)\n            if i % 2 == 1:\n                n *= 2\n                if n &gt; 9:\n                    n -= 9\n            total += n\n\n        if total % 10 != 0:\n            raise ValueError('Invalid card number')\n\n        return digits\n\n    @field_validator('cvv')\n    @classmethod\n    def validate_cvv(cls, v: str) -&gt; str:\n        if not v.isdigit() or len(v) not in [3, 4]:\n            raise ValueError('CVV must be 3 or 4 digits')\n        return v\n\n    @model_validator(mode='after')\n    def validate_expiry(self):\n        if not (1 &lt;= self.expiry_month &lt;= 12):\n            raise ValueError('Invalid expiry month')\n\n        current_year = datetime.now().year\n        if self.expiry_year &lt; current_year:\n            raise ValueError('Card has expired')\n\n        if self.expiry_year == current_year:\n            current_month = datetime.now().month\n            if self.expiry_month &lt; current_month:\n                raise ValueError('Card has expired')\n\n        return self\n</code></pre>"},{"location":"guide/validation/#validation-error-format","title":"Validation Error Format","text":"<p>When validation fails, FastOpenAPI returns a standardized error:</p> <pre><code>{\n  \"error\": {\n    \"type\": \"validation_error\",\n    \"message\": \"Validation error for parameter 'price'\",\n    \"status\": 422,\n    \"details\": \"Input should be greater than 0\"\n  }\n}\n</code></pre> <p>Note: The <code>details</code> field is a string with the Pydantic validation error message. If there are no details, the field is omitted entirely.</p>"},{"location":"guide/validation/#custom-error-messages","title":"Custom Error Messages","text":"<p>Provide custom error messages:</p> <pre><code>class Item(BaseModel):\n    name: str = Field(\n        ...,\n        min_length=3,\n        max_length=50,\n        description=\"Item name\",\n        json_schema_extra={\n            \"examples\": [\"Laptop\", \"Phone\"]\n        }\n    )\n    price: float = Field(\n        ...,\n        gt=0,\n        description=\"Price must be positive\"\n    )\n</code></pre>"},{"location":"guide/validation/#performance-tips","title":"Performance Tips","text":""},{"location":"guide/validation/#use-strict-mode-selectively","title":"Use Strict Mode Selectively","text":"<pre><code># Only strict for critical fields\nclass Transaction(BaseModel):\n    amount: StrictFloat  # No coercion for money\n    description: str     # Coercion ok\n</code></pre>"},{"location":"guide/validation/#reuse-models","title":"Reuse Models","text":"<pre><code># Don't create new models unnecessarily\nUserBase = ...  # Define once\nUserCreate = UserBase  # Reuse\nUserUpdate = UserBase  # Reuse\n</code></pre>"},{"location":"guide/validation/#lazy-validation","title":"Lazy Validation","text":"<pre><code># Validate only when needed\nclass User(BaseModel):\n    model_config = ConfigDict(validate_assignment=False)\n\n    name: str\n    email: str\n\n# Validation happens only on creation\nuser = User(name=\"John\", email=\"john@example.com\")\nuser.email = \"invalid\"  # Not validated immediately\n</code></pre>"},{"location":"guide/validation/#best-practices","title":"Best Practices","text":""},{"location":"guide/validation/#1-use-field-descriptions","title":"1. Use Field Descriptions","text":"<pre><code># Good\nname: str = Field(..., description=\"User's full name\")\n\n# Avoid\nname: str\n</code></pre>"},{"location":"guide/validation/#2-provide-examples","title":"2. Provide Examples","text":"<pre><code># Good\nemail: EmailStr = Field(\n    ...,\n    description=\"User email\",\n    examples=[\"user@example.com\"]\n)\n</code></pre>"},{"location":"guide/validation/#3-use-meaningful-error-messages","title":"3. Use Meaningful Error Messages","text":"<pre><code>@field_validator('age')\n@classmethod\ndef validate_age(cls, v: int) -&gt; int:\n    if v &lt; 18:\n        raise ValueError('Must be 18 or older to register')\n    return v\n</code></pre>"},{"location":"guide/validation/#4-separate-createupdate-models","title":"4. Separate Create/Update Models","text":"<pre><code># Create - all required\nclass ItemCreate(BaseModel):\n    name: str\n    price: float\n\n# Update - all optional\nclass ItemUpdate(BaseModel):\n    name: str | None = None\n    price: float | None = None\n</code></pre>"},{"location":"guide/validation/#5-use-type-hints-consistently","title":"5. Use Type Hints Consistently","text":"<pre><code># Good\nitems: list[str]\nmetadata: dict[str, Any]\n\n# Avoid\nitems: list\nmetadata: dict\n</code></pre>"},{"location":"guide/validation/#next-steps","title":"Next Steps","text":"<ul> <li>Error Handling - Handle validation errors</li> <li>Request Body - Use validation in requests</li> <li>Response Handling - Validate responses</li> <li>Dependencies - Validate dependency returns</li> </ul>"}]}